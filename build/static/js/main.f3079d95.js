/*! For license information please see main.f3079d95.js.LICENSE.txt */
(()=>{var e={3966:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>P});var i=n(9950),s=n(8429),o=n(2074),a=n(6564),l=(n(6747),n(4894)),c=n(2981),u=(n(3114),n(7697)),h=n(3881),d=n(6881),f=n(3690),p=(n(1965),n(9217),n(5522)),m=n(9703),g=n(7345),v=n(9343),y=n(6836),_=n(3031),b=(n(7131),n(7172)),w=n(8682),x=(n(2758),n(4853)),T=n(7353),S=n(9481),E=n(4414),C=e([l,u,h,f,p,m,g,v,y,_,b,w,T]);[l,u,h,f,p,m,g,v,y,_,b,w,T]=C.then?(await C)():C;const k=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!0),u=(0,s.Zp)(),h=a.A.auth().currentUser;return(0,i.useEffect)((()=>{(async()=>{if(h)try{const e=await l.A.ref("Coupon_Access/".concat(h.uid)).once("value");if(!e.val())return void u("/dashboard");r(!0)}catch(e){console.error("Error checking access:",e),u("/dashboard")}finally{c(!1)}else u("/")})()}),[h,u]),o?null:n?t:null},I=e=>e?e.toString().replace(/\./g,"-dot-").replace(/@/g,"-at-").replace(/\$/g,"-dollar-").replace(/\[/g,"-lbracket-").replace(/\]/g,"-rbracket-").replace(/#/g,"-hash-"):"",A=()=>(0,E.jsx)(o.Kd,{children:(0,E.jsx)(N,{})}),N=()=>{(0,s.Zp)();const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!0),[o,v]=(0,i.useState)(JSON.parse(localStorage.getItem("looksEttarraWishlist"))||[]),[C,A]=(0,i.useState)(!1),[N,P]=(0,i.useState)([]),[O,D]=(0,i.useState)(!1),[M,L]=(0,i.useState)(null),[F,j]=(0,i.useState)(JSON.parse(localStorage.getItem("looksEttarraUserName"))||null),[U,B]=(0,i.useState)(null),[V,z]=(0,i.useState)({}),[W,q]=(0,i.useState)({}),[H,K]=(0,i.useState)(0),[G,Y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=a.A.auth().onAuthStateChanged((e=>{e?(t(e.uid),console.log("User is logged in:",e.uid),F||(j(e.email),localStorage.setItem("looksEttarraUserName",JSON.stringify(e.email)))):(t(null),P([]),console.log("No user logged in")),r(!1)}));return()=>e()}),[F]),(0,i.useEffect)((()=>{if(e){const e=a.A.auth().currentUser;if(null!==e&&void 0!==e&&e.email){I(e.email);const t=l.A.ref("UserCoupons").orderByChild("email").equalTo(e.email);return t.on("value",(e=>{const t=e.val();t&&B(Object.values(t)[0])})),()=>t.off()}}}),[e]),(0,i.useEffect)((()=>{(async()=>{try{if(!F)return;const e=I(F),t=l.A.ref("orders/".concat(e)),n=l.A.ref("new").on("value",(t=>{const n=t.val(),r=[];if(n){const e={};Object.entries(n).forEach((t=>{let[n,r]=t;r.customer_name&&r.customer_name.startsWith(F)&&(e[r.order_id]||(e[r.order_id]={id:r.order_id,items:[],status:"Pending",timestamp:r.created_on,customer_name:r.customer_name}),e[r.order_id].items.push({...r,id:n}),"Preparing"===r.status&&(e[r.order_id].status="Preparing"))})),Object.values(e).forEach((e=>{r.push(e)}))}l.A.ref("completed").orderByChild("customer_name").startAt(F).endAt(F+"\uf8ff").on("value",(t=>{const n=t.val(),i=[];if(n){const e={};Object.entries(n).forEach((t=>{let[n,r]=t;r.customer_name&&r.customer_name.startsWith(F)&&(e[r.order_id]||(e[r.order_id]={id:r.order_id,items:[],status:r.status||"Served",timestamp:r.created_on,customer_name:r.customer_name}),e[r.order_id].items.push({...r,id:n}))})),Object.values(e).forEach((e=>{i.push(e)}))}l.A.ref("orders/".concat(e)).on("value",(e=>{const t=e.val(),n=[];if(t){const e={};Object.entries(t).forEach((t=>{let[n,r]=t;"Cancelled"===r.status&&(e[r.order_id]||(e[r.order_id]={id:r.order_id,items:[],status:"Cancelled",timestamp:r.created_on,customer_name:r.customer_name}),e[r.order_id].items.push({...r,id:n}))})),Object.values(e).forEach((e=>{n.push(e)}))}const s=[...r,...i,...n].sort(((e,t)=>{const n=new Date(e.timestamp.split(", ")[0].split("/").reverse().join("-")+"T"+e.timestamp.split(", ")[1]);return new Date(t.timestamp.split(", ")[0].split("/").reverse().join("-")+"T"+t.timestamp.split(", ")[1])-n}));P(s)}))}))}));return()=>{l.A.ref("new").off("value",n),t.off()}}catch(e){console.error("Error fetching orders:",e)}})()}),[F]);(0,i.useEffect)((()=>{localStorage.setItem("looksEttarraWishlist",JSON.stringify(o))}),[o]);const Q=e=>{const t=parseFloat(e.Price),n=parseInt(e.Count);return{...e,Price:isNaN(t)?0:Math.max(0,t),Count:isNaN(n)?0:Math.max(0,n)}};(0,i.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("looksEttarraWishlist"))||[];v(e.map(Q))}),[]);const $=(e,t,n,r)=>{var i;const s=o.findIndex((n=>n.Name===e.Name&&n.Size===t&&n.Category===r&&JSON.stringify(n.syrup)===JSON.stringify(e.syrup)));if(e.Stock<=0)return void alert("This item is out of stock.");if(((null===(i=o[s])||void 0===i?void 0:i.Count)||0)>=e.Stock)alert("Only ".concat(e.Stock," ").concat(e.Name," Available"));else{if(-1!==s){const t=[...o];t[s].Count+=1,t[s].Stock=e.Stock,v(t)}else v([...o,{Name:e.Name,Size:t,Price:n,Count:1,Category:r,Stock:e.Stock,Desc:e.Desc,syrup:e.syrup}]);try{const t=new Date;"function"===typeof window.gtag&&window.gtag("event","Looks_Item_Added",{timestamp:t.toLocaleString("en-GB"),Item:e})}catch(a){console.warn("Analytics error:",a)}}},X=(e,t,n)=>{const r=o.findIndex((r=>r.Name===e.Name&&r.Size===t&&r.Category===n));if(-1!==r){const e=[...o],t=e[r],n={...t};t.Count>1?(t.Count-=1,v(e)):(e.splice(r,1),v(e));try{const e=new Date;"function"===typeof window.gtag&&window.gtag("event","Looks_Item_Removed",{timestamp:e.toLocaleString("en-GB"),Order:n})}catch(i){console.warn("Analytics error:",i)}}},J=()=>o&&Array.isArray(o)?o.reduce(((e,t)=>e+(Number(t.Count)||0)),0):0,Z=()=>{new Audio(x).play()};return n?(0,E.jsx)("div",{children:"Loading..."}):(0,E.jsxs)(E.Fragment,{children:[O?(0,E.jsxs)("div",{className:"wishlist",children:[(0,E.jsxs)("div",{className:"closeWishlist",onClick:()=>D(!1),children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,E.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})}),(0,E.jsx)("div",{className:"cookies-notice",children:"Order Status"})]}),(0,E.jsx)("h2",{className:"wishlist-title",children:"Your Orders"}),N&&N.length>0?(0,E.jsx)("div",{className:"order-status-container",children:N.map((e=>(0,E.jsxs)("div",{className:"order-status-card status-".concat(e.status.toLowerCase()),children:[(0,E.jsxs)("div",{className:"order-status-header",children:[(0,E.jsxs)("div",{className:"order-id",children:["Order #",e.id.slice(-6)]}),(0,E.jsx)("div",{className:"order-timestamp",children:e.timestamp}),"Pending"===e.status&&(0,E.jsx)("div",{className:"cancel-order",onClick:()=>(async e=>{try{r(!0);const n=N.find((t=>t.id===e));if(!n)return alert("Order not found"),void r(!1);if("Pending"!==n.status)return alert("Only pending orders can be cancelled"),void r(!1);if(window.confirm("Proceed with order cancellation?")){const r=I(F);let i=0;for(const e of n.items){await l.A.ref("new/".concat(e.id)).remove();const t=new Date;await l.A.ref("orders/".concat(r,"/").concat(e.id)).update({status:"Cancelled",cancelled_by:F,cancelled_on:t.toLocaleString("en-GB")}),e.coupon_redeemed&&(i+=e.coupon_quantity||1)}if(i>0)try{const t=a.A.auth().currentUser;if(t&&t.email){const n=l.A.ref("UserCoupons").orderByChild("email").equalTo(t.email),r=(await n.once("value")).val();if(r){const[t]=Object.keys(r),n=l.A.ref("UserCoupons/".concat(t)),s=(await n.once("value")).val(),o={date:Date.now(),action:"refund",reason:"order_cancelled",order_id:e,coupons_refunded:i,refunded_at:(new Date).toISOString()},a=s.cancellation_history||[];a.push(o),await n.update({active_coupons:(s.active_coupons||0)+i,cancellation_history:a}),console.log("Refunded ".concat(i," coupons for cancelled order ").concat(e))}}}catch(t){console.error("Error refunding coupons:",t)}alert("Order cancelled successfully!")}}catch(t){console.error("Error cancelling order:",t),alert("Error cancelling order: "+t.message)}finally{r(!1)}})(e.id),children:(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#d32f2f",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})})]}),(0,E.jsxs)("div",{className:"order-status-badge",children:["Pending"===e.status&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#f57c00",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,E.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),(0,E.jsx)("span",{children:"Pending"})]}),"Preparing"===e.status&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#ff9800",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})]}),(0,E.jsx)("span",{children:"Preparing"})]}),"Served"===e.status&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#4caf50",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})]}),(0,E.jsx)("span",{children:"Served"})]}),"Cancelled"===e.status&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#d32f2f",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),(0,E.jsx)("span",{children:"Cancelled"})]})]}),(0,E.jsx)("div",{className:"order-items-list",children:e.items.map(((e,t)=>{var n;return(0,E.jsxs)("div",{className:"order-item",children:[(0,E.jsx)("div",{className:"order-item-name",children:e.Name}),(0,E.jsx)("div",{className:"order-item-size",children:e.Size}),(0,E.jsxs)("div",{className:"order-item-count",children:["x",e.Count]}),(0,E.jsx)("div",{className:"order-item-status status-".concat((null===(n=e.status)||void 0===n?void 0:n.toLowerCase())||"pending"),children:e.status||"Pending"})]},t)}))})]},e.id)))}):(0,E.jsxs)("div",{className:"empty-orders",children:[(0,E.jsx)("div",{className:"empty-orders-icon",children:"\ud83d\udccb"}),(0,E.jsx)("p",{children:"You haven't placed any orders yet"}),(0,E.jsx)("button",{className:"continue-shopping",onClick:()=>D(!1),children:"Back to Menu"})]})]}):C?(0,E.jsxs)("div",{className:"wishlist",children:[(0,E.jsxs)("div",{className:"closeWishlist",onClick:()=>A(!1),children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,E.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})}),(0,E.jsx)("div",{className:"cookies-notice",children:"we use Cookies*"})]}),(0,E.jsx)("h2",{className:"wishlist-title",children:"Your Cart"}),o&&o.length>0?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"wishlist-items",children:o.map(((e,t)=>{var n;const r=U&&U.active_coupons>0&&t<Math.min(J(),U.active_coupons),i="".concat(e.Name,"-").concat(e.Size,"-").concat((null===(n=e.syrup)||void 0===n?void 0:n.name)||"no-syrup");return(0,E.jsxs)("div",{className:"wishlistItem ".concat(r?"has-coupon":""),children:[(0,E.jsxs)("div",{className:"wishlistItemName",children:[e.Name,e.syrup&&(0,E.jsxs)("span",{className:"syrup-tag",children:["+ ",e.syrup.name," Syrup"]})]}),(0,E.jsxs)("div",{className:"wishlistWishlistToggler",children:[(0,E.jsx)("div",{className:"itemRemove",onClick:()=>X(e,e.Size,e.Category),children:"-"}),(0,E.jsx)("div",{className:"itemCount",children:e.Count}),(0,E.jsx)("div",{className:"itemAdd",onClick:()=>$(e,e.Size,e.Price,e.Category),children:"+"})]}),(0,E.jsx)("div",{className:"wishlistItemSize",children:e.Size}),r&&(0,E.jsxs)("div",{className:"coupon-tag",children:[(0,E.jsx)("span",{className:"coupon-tag-icon",children:"\ud83c\udf9f\ufe0f"}),(0,E.jsx)("span",{children:"Coupon Applied"})]}),e.syrup&&(0,E.jsxs)("div",{className:"item-price",children:["+\u20b9",e.syrup.price]})]},i)}))}),(0,E.jsxs)("div",{className:"order-summary",children:[U&&U.active_coupons>0&&(0,E.jsxs)("div",{className:"coupon-summary",children:[(0,E.jsx)("div",{className:"coupon-badge",children:"\ud83c\udf9f\ufe0f"}),(0,E.jsxs)("div",{className:"coupon-message",children:[(0,E.jsxs)("div",{className:"coupon-counter",children:[(0,E.jsxs)("div",{className:"coupon-counter-available",children:[(0,E.jsx)("span",{className:"counter-number",children:U.active_coupons}),(0,E.jsx)("span",{className:"counter-label",children:"Available"})]}),(0,E.jsx)("div",{className:"coupon-counter-divider"}),(0,E.jsxs)("div",{className:"coupon-counter-needed",children:[(0,E.jsx)("span",{className:"counter-number",children:J()}),(0,E.jsx)("span",{className:"counter-label",children:"Needed"})]})]}),(0,E.jsx)("div",{className:"coupon-status ".concat(J()>U.active_coupons?"coupon-warning":"coupon-ok"),children:J()>U.active_coupons?"Not enough coupons for all items":J()===U.active_coupons?"Perfect match! All items covered":"All items will be covered by coupons"})]})]}),(0,E.jsx)("div",{className:"placeOrderBar ".concat(U&&J()>U.active_coupons&&U.active_coupons>0?"has-warning":""),onClick:async()=>{try{if(r(!0),!U||U.active_coupons<=0)return Y(!0),void r(!1);let t=F;const n=J();if(n>U.active_coupons)return alert("You have ".concat(U.active_coupons," coupons but trying to order ").concat(n," items. Please adjust your cart or get more coupons.")),void r(!1);if(window.confirm("Confirm and Proceed")){if(!F||"undefined"===F||""===F||"Enter here"===F){let e=window.prompt("Please enter your name","");for(;!e||"undefined"===e||""===e||"Enter here"===e;)e=window.prompt("Please enter your name","Enter here");t=e,j(e),localStorage.setItem("looksEttarraUserName",JSON.stringify(e))}const i={};let s=U.active_coupons;for(const e of o)if(s>0){const t=Math.min(e.Count,s);i[e.Name]=t,s-=t}const c=await async function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{r(!0);const s=(new Date).toLocaleString("en-GB"),[o,a]=s.split(", "),c="".concat(o.split("/").join("")).concat(a.split(":").join("")),u=I(t);for(let r=0;r<e.length;r++){const h=e[r],d="".concat(c).concat(r),f=i&&i[h.Name]>0,p=parseFloat(h.Price)||0,m=(h.syrup&&parseFloat(h.syrup.price),p),g={Name:h.Name,Price:m,Section:n||"Main",Size:h.Size||"",Stock:h.Stock||0,Category:h.Category||"",Count:h.Count||1,Desc:h.Desc||"",created_on:s,created_on_date:o,created_on_time:a,customer_name:t,order_id:c,order_item_id:d,status:"Pending",coupon_redeemed:f,coupon_quantity:f?i[h.Name]:0};h.syrup&&(g.syrup={name:h.syrup.name,price:h.syrup.price,total_price:m},g.has_syrup=!0),console.log("Saving item data:",g),await l.A.ref("new/".concat(d)).set(g),await l.A.ref("orders/".concat(u,"/").concat(d)).set(g)}return r(!1),!0}catch(s){return console.error("Error placing order:",s),r(!1),!1}}(o,t,localStorage.getItem("looksEttarraSection"),i);if(c){try{const e=a.A.auth().currentUser;if(e&&e.email){const t=l.A.ref("UserCoupons").orderByChild("email").equalTo(e.email),r=(await t.once("value")).val();if(r){const[e]=Object.keys(r),t=o.filter((e=>i[e.Name]>0)).map((e=>({item_name:e.Name,item_price:e.Price,date:Date.now(),category:e.Category||"Unknown",redeemed_at:(new Date).toISOString(),quantity:i[e.Name]})));await l.A.ref("UserCoupons/".concat(e)).update({active_coupons:U.active_coupons-n,redemption_history:[...U.redemption_history||[],...t],last_redemption_date:(new Date).toISOString(),total_redemptions:(U.total_redemptions||0)+n})}}}catch(e){console.error("Error updating coupon count:",e)}Z(),v([]),localStorage.removeItem("looksEttarraWishlist"),A(!1),alert("Order Placed Successfully!")}else alert("Failed to place order. Please try again.")}}catch(e){console.error("Error in handlePlaceOrder:",e),alert(e.message||"An error occurred while placing the order")}finally{r(!1)}},children:"Place Order"})]})]}):(0,E.jsxs)("div",{className:"empty-cart",children:[(0,E.jsx)("div",{className:"empty-cart-icon",children:"\ud83d\uded2"}),(0,E.jsx)("p",{children:"Your cart is empty"}),(0,E.jsx)("button",{className:"continue-shopping",onClick:()=>A(!1),children:"Continue Shopping"})]})]}):(0,E.jsxs)(E.Fragment,{children:[o.length>0&&(0,E.jsxs)("div",{className:0!==N.length?"placedOrderOpenWishlistBar":"wishlistBar",onClick:()=>A(!0),children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"28px",viewBox:"0 -960 960 960",width:"28px",fill:"#ffffff",children:(0,E.jsx)("path",{d:"M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM246-720l96 200h280l110-200H246Zm-38-80h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Zm134 280h280-280Z"})})," Cart"]}),N.length>0&&(0,E.jsxs)("div",{className:"ordersBar",onClick:()=>D(!0),children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"28px",viewBox:"0 0 24 24",width:"28px",fill:"#ffffff",children:[(0,E.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,E.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"})]})," Orders"]})]}),(0,E.jsxs)(s.BV,{children:[(0,E.jsx)(s.qh,{path:"/",element:e?(0,E.jsx)(s.C5,{to:"/menu",replace:!0}):(0,E.jsx)(c.A,{setLoggedInUser:t})}),(0,E.jsx)(s.qh,{path:"/menu",element:e?(0,E.jsx)(h.A,{}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsxs)(s.qh,{path:"/menu",children:[(0,E.jsx)(s.qh,{index:!0,element:(0,E.jsx)(h.A,{})}),(0,E.jsx)(s.qh,{path:"tea",element:e?(0,E.jsx)(_.A,{WHICH:"TeaMenu",wishlist:o,setWishlist:v,itemAdd:$,itemRemove:X}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsx)(s.qh,{path:"coffee",element:e?(0,E.jsx)(_.A,{WHICH:"CoffeeMenu",wishlist:o,setWishlist:v,itemAdd:$,itemRemove:X}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsx)(s.qh,{path:"savoury",element:e?(0,E.jsx)(_.A,{WHICH:"SavouryMenu",wishlist:o,setWishlist:v,itemAdd:$,itemRemove:X}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsx)(s.qh,{path:"kaapi-fest",element:e?(0,E.jsx)(b.A,{WHICH:"KaapiFestMenu",wishlist:o,setWishlist:v,itemAdd:$,itemRemove:X}):(0,E.jsx)(s.C5,{to:"/",replace:!0})})]}),(0,E.jsx)(s.qh,{path:"/admin/login",element:(0,E.jsx)(d.A,{setLoggedInUser:t})}),(0,E.jsxs)(s.qh,{path:"/dashboard",children:[(0,E.jsx)(s.qh,{index:!0,element:e?(0,E.jsx)(f.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})}),(0,E.jsx)(s.qh,{path:"KDS",element:e?(0,E.jsx)(p.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})}),(0,E.jsx)(s.qh,{path:"Stocks",element:e?(0,E.jsx)(g.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})}),(0,E.jsx)(s.qh,{path:"Reports",element:e?(0,E.jsx)(m.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})}),(0,E.jsx)(s.qh,{path:"coupon-management",element:e?(0,E.jsx)(y.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})}),(0,E.jsx)(s.qh,{path:"coupon-analytics",element:e?(0,E.jsx)(T.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/admin/login",replace:!0})})]}),(0,E.jsx)(s.qh,{path:"/user-dashboard",element:e?(0,E.jsx)(u.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsx)(s.qh,{path:"/profile",element:e?(0,E.jsx)(w.A,{loggedInUser:e}):(0,E.jsx)(s.C5,{to:"/",replace:!0})}),(0,E.jsx)(s.qh,{path:"/coupon-analytics",element:(0,E.jsx)(k,{children:(0,E.jsx)(T.A,{})})}),(0,E.jsx)(s.qh,{path:"/Menu/KaapiFest",element:(0,E.jsx)(b.A,{})}),(0,E.jsx)(s.qh,{path:"/Games",element:(0,E.jsx)(S.A,{})}),(0,E.jsx)(s.qh,{path:"*",element:(0,E.jsx)(s.C5,{to:"/",replace:!0})})]}),G&&(0,E.jsx)(R,{onClose:()=>Y(!1)})]})},R=e=>{let{onClose:t}=e;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"modal-overlay",onClick:t}),(0,E.jsx)("div",{className:"no-coupons-modal",children:(0,E.jsxs)("div",{className:"no-coupons-content",children:[(0,E.jsx)("div",{className:"no-coupons-title",children:"Busted! \ud83d\udd75\ufe0f\u200d\u2642\ufe0f"}),(0,E.jsxs)("div",{className:"emoji-container",children:[(0,E.jsx)("div",{className:"coffee-emoji",children:"\u2615"}),(0,E.jsx)("div",{className:"thief-emoji",children:"\ud83c\udfc3\u200d\u2642\ufe0f"})]}),(0,E.jsxs)("div",{className:"no-coupons-message",children:["Sneaking coffee without coupons?",(0,E.jsx)("br",{}),"That's not very brew-tiful of you!"]}),(0,E.jsx)("button",{className:"no-coupons-button",onClick:t,children:"Bean caught, need coupons!"})]})})]})},P=A;r()}catch(k){r(k)}}))},7604:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(9950);var r=n(4894),i=(n(5321),e([r]));r=(i.then?(await i)():i)[0];t()}catch(s){t(s)}}))},2528:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(9950);var r=n(4414);const i=e=>{let{item:t,loggedInUser:n,onOrder:i}=e;return(0,r.jsxs)("div",{className:"menu-item",children:[(0,r.jsx)("h3",{children:t.Name}),(0,r.jsxs)("p",{className:"price",children:["\u20b9",t.Price]}),(0,r.jsxs)("button",{className:"order-button",onClick:()=>i({...t}),children:["Add to Order (\u20b9",t.Price,")"]})]})}},1480:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9950),i=n(8429),s=n(6564),o=(n(6747),n(4414));const a=e=>{let{onClick:t}=e;const n=(0,i.zy)(),[a,l]=(0,r.useState)("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3C/svg%3E"),[c,u]=(0,r.useState)(!1),h=(0,r.useRef)(null),d=(0,r.useRef)(0),f="/menu"===n.pathname||"/"===n.pathname,p=async()=>{try{const e=s.A.auth().currentUser;if(e)if(e.photoURL)m(e.photoURL);else{const t=e.providerData.find((e=>"google.com"===e.providerId));t&&t.photoURL?m(t.photoURL):g()}}catch(e){console.error("Error fetching profile image:",e),g()}},m=e=>{const t=new Image;t.onload=()=>{l(e),u(!0),d.current=0,clearTimeout(h.current)},t.onerror=()=>{console.log("Failed to load image from URL: ".concat(e,", retrying...")),g()},t.src=e},g=()=>{d.current<10&&(clearTimeout(h.current),h.current=setTimeout((()=>{d.current+=1,console.log("Retrying profile image fetch (".concat(d.current,"/").concat(10,")...")),p()}),2e3))};return(0,r.useEffect)((()=>{if(f){p();const e=s.A.auth().onAuthStateChanged((()=>{d.current=0,u(!1),p()}));return()=>{e(),clearTimeout(h.current)}}}),[f]),(0,r.useEffect)((()=>{if(f&&!c){const e=setInterval((()=>{c||(console.log("Periodic refresh: attempting to fetch profile image again..."),p())}),3e4);return()=>clearInterval(e)}}),[f,c]),f?(0,o.jsx)("button",{className:"profile-circle-button",onClick:t,"aria-label":"User Profile",children:(0,o.jsx)("img",{src:a,alt:"Profile",className:"profile-button-image",onError:()=>{console.log("Image failed to load in render, retrying..."),g()}})}):null}},1965:(e,t,n)=>{"use strict";n(9950),n(6564),n(4414)},3114:(e,t,n)=>{"use strict";n(9950),n(6564),n(4414)},4894:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>o});var i=n(6564);n(6747),n(5855),n(9492);const e={apiKey:"AIzaSyCC_IdWcuvEAVKifvcVqI2bPOsR-uW9OYc",authDomain:"wondrlab-e27fc.firebaseapp.com",databaseURL:"https://wondrlab-e27fc-default-rtdb.firebaseio.com",projectId:"wondrlab-e27fc",storageBucket:"wondrlab-e27fc.firebasestorage.app",messagingSenderId:"677211500256",appId:"1:677211500256:web:1f0197a4521b877da42a85",measurementId:"G-SXD2EN7X6W"};i.A.initializeApp(e);const s=i.A.database();i.A.firestore();await i.A.auth().setPersistence("local");const o=s;i.A.auth();r()}catch(s){r(s)}}),1)},9217:(e,t,n)=>{"use strict";var r=n(6564);n(6747),n(5855);const i={apiKey:"AIzaSyCC_IdWcuvEAVKifvcVqI2bPOsR-uW9OYc",authDomain:"wondrlab-e27fc.firebaseapp.com",databaseURL:"https://wondrlab-e27fc-default-rtdb.firebaseio.com",projectId:"wondrlab-e27fc",storageBucket:"wondrlab-e27fc.firebasestorage.app",messagingSenderId:"677211500256",appId:"1:677211500256:web:1f0197a4521b877da42a85",measurementId:"G-SXD2EN7X6W"};r.A.apps.length||r.A.initializeApp(i);r.A.database(),r.A.auth()},4737:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var r=n(9950),i=n(1352),s=(n(7238),n(3966)),o=n(4954),a=n(4414),l=e([s]);s=(l.then?(await l)():l)[0];i.createRoot(document.getElementById("root")).render((0,a.jsx)(r.StrictMode,{children:(0,a.jsx)(s.A,{})})),(0,o.A)(),t()}catch(c){t(c)}}))},6836:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>u});var i=n(9950),s=(n(6564),n(5855),n(4894)),o=n(847),a=n.n(o),l=(n(1677),n(4414)),c=e([s]);s=(c.then?(await c)():c)[0];const u=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)([]),[u,h]=(0,i.useState)(null),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)({redemptions:[],allocations:[]}),[g,v]=(0,i.useState)([]),[y,_]=(0,i.useState)({activeUsers:[],exhaustedUsers:[],overdueUsers:[],refillNeeded:[]});(0,i.useEffect)((()=>{(async()=>{try{if(console.log("Checking coupon access for user:",t),!t)return console.log("No user logged in"),void r(!1);const e=s.A.ref("Coupon_Access/".concat(t));return console.log("Checking coupon access at path:","Coupon_Access/".concat(t)),e.on("value",(e=>{const t=e.exists()&&e.val();console.log("Coupon access value:",t),r(t)})),()=>e.off()}catch(e){console.error("Error checking access:",e),r(!1)}})()}),[t]),(0,i.useEffect)((()=>{console.log("Current access state:",n)}),[n]),(0,i.useEffect)((()=>{if(n){const e=s.A.ref("UserCoupons"),t=async e=>{const t=e.val();if(t){const e=Object.entries(t).map((e=>{let[t,n]=e;return{uid:t,...n}}));c(e),w(e)}};return e.on("value",t),()=>e.off("value",t)}}),[n]),(0,i.useEffect)((()=>((async()=>{s.A.ref("Reports_Access_Data/Coupons/redemptions").on("value",(e=>{const t=e.val();if(t){const e=Object.values(t);v(e)}}))})(),()=>{s.A.ref("Reports_Access_Data/Coupons/redemptions").off()})),[]),(0,i.useEffect)((()=>{o.length>0&&b(o)}),[o]);const b=e=>{const t=Date.now(),n=e.reduce(((e,n)=>{const r=n.last_allocation_date||n.created_at,i=t-r,s=Math.floor(i/864e5),o=Math.max(0,30-s);return s>=30?n.active_coupons>0?e.overdueUsers.push({...n,couponsLeft:n.active_coupons,daysOverdue:s-30}):e.refillNeeded.push({...n,daysOverdue:s-30}):n.active_coupons>0?e.activeUsers.push({...n,couponsLeft:n.active_coupons,daysRemaining:o,exactDaysRemaining:((2592e6-i)/864e5).toFixed(1)}):e.exhaustedUsers.push({...n,daysUntilRefill:o}),e}),{activeUsers:[],exhaustedUsers:[],overdueUsers:[],refillNeeded:[]});_(n)},w=e=>{const t={},n={};e.forEach((e=>{if(e.redemption_history&&e.redemption_history.forEach((e=>{const n=new Date(e.redeemed_at).toLocaleDateString();t[n]=(t[n]||0)+1})),e.last_allocation_date){const t=new Date(e.last_allocation_date).toLocaleDateString();e.active_coupons&&!isNaN(e.active_coupons)&&(n[t]=(n[t]||0)+parseInt(e.active_coupons))}}));const r=(e,t)=>new Date(t.date)-new Date(e.date);m({redemptions:Object.entries(t).map((e=>{let[t,n]=e;return{date:t,count:n}})).sort(r),allocations:Object.entries(n).map((e=>{let[t,n]=e;return{date:t,count:n}})).sort(r)})};return n?(0,l.jsxs)("div",{className:"admin-coupon-container",children:[(0,l.jsx)("div",{className:"admin-header",children:(0,l.jsx)("h1",{children:"Coupon Management"})}),(0,l.jsxs)("div",{className:"csv-upload-section",children:[(0,l.jsx)("h2",{children:"Allocate Coupons"}),(0,l.jsxs)("div",{className:"sample-download",children:[(0,l.jsx)("button",{onClick:()=>{const e=a().unparse([{"Sr.No":"1","Emp Code":"WYP-201",Name:"Sanjana","Personal Contact number":"8082639106","Official E mail add":"sanjana@drilldown.online",number_of_coupons:"10"},{"Sr.No":"2","Emp Code":"WYP-271",Name:"Aniruddh S","Personal Contact number":"8928335178","Official E mail add":"aniruddhs105@gmail.com",number_of_coupons:"10"}]),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.setAttribute("download","coupon_allocation_template.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"sample-btn",children:"Download Sample CSV"}),(0,l.jsx)("p",{className:"sample-text",children:"Use this sample as a template for your coupon allocation file"})]}),(0,l.jsxs)("div",{className:"file-upload-container",children:[(0,l.jsx)("input",{type:"file",accept:".csv",onChange:async e=>{try{const n=e.target.files[0];if(!n)return void alert("No file selected");const r=await s.A.ref("Coupon_Access/".concat(t)).once("value");if(!r.exists()||!r.val())return alert("You do not have permission to allocate coupons."),void(e.target.value="");if(!window.confirm("Are you sure you want to upload and process this CSV file?"))return void(e.target.value="");f(!0),a().parse(n,{header:!0,skipEmptyLines:!0,complete:async e=>{try{if(!e.data||0===e.data.length)return alert("No valid data found in CSV file"),void f(!1);console.log("Raw CSV data:",e.data);const r=e.data[0];if(!r["Official E mail add"]||!r.number_of_coupons)return alert("CSV file is missing required columns. Please use the correct format."),void f(!1);const i=e.data.filter((e=>{const t=e["Official E mail add"]&&e["Official E mail add"].trim(),n=e.number_of_coupons&&!isNaN(parseInt(e.number_of_coupons));return t&&n}));if(console.log("Valid data after filtering:",i),0===i.length)return alert("No valid data found after filtering"),void f(!1);const o=[],a=[];for(const e of i)try{const n=e["Official E mail add"].trim(),r=parseInt(e.number_of_coupons);console.log("Processing: Email=".concat(n,", Coupons=").concat(r));const i=s.A.ref("UserCoupons").orderByChild("email").equalTo(n),l=(await i.once("value")).val();if(l){const e=Object.keys(l)[0],i=l[e],c=Date.now();if(i.active_coupons>0){const e=i.last_allocation_date,t=e?Math.floor((c-Number(e))/864e5):31;if(t<30){o.push({email:n,reason:"Already has ".concat(i.active_coupons," active coupons, allocated ").concat(t," days ago. Must wait ").concat(30-t," more days.")}),console.log("Skipped ".concat(n,": Has active coupons"));continue}}const u={active_coupons:r,last_allocation_date:c,allocation_history:{...i.allocation_history||{},[c]:{amount:r,admin_id:t}}};await s.A.ref("UserCoupons/".concat(e)).update(u),a.push(n),console.log("Updated ".concat(n," with ").concat(r," coupons"))}else{const e=s.A.ref("UserCoupons").push();await e.set({email:n,active_coupons:r,last_allocation_date:Date.now(),redemption_history:[],allocation_history:{[Date.now()]:{amount:r,admin_id:t}},created_at:Date.now(),total_redemptions:0}),a.push(n),console.log("Created new user ".concat(n," with ").concat(r," coupons"))}}catch(n){console.error("Error processing ".concat(e["Official E mail add"],":"),n),o.push({email:e["Official E mail add"],reason:"Error: ".concat(n.message)})}console.log("Processing complete:",{successful:a,skipped:o});let l="Coupon Allocation Summary:\n\n";a.length>0?(l+="Successfully allocated to ".concat(a.length," users:\n"),l+=a.join("\n")+"\n\n"):l+="No successful allocations.\n\n",o.length>0&&(l+="Skipped ".concat(o.length," users:\n"),l+=o.map((e=>"".concat(e.email,": ").concat(e.reason))).join("\n")),alert(l)}catch(n){console.error("Error in CSV processing:",n),alert("Error processing CSV: ".concat(n.message))}finally{f(!1)}},error:e=>{console.error("CSV parsing error:",e),alert("Error parsing CSV file: ".concat(e.message)),f(!1)}})}catch(n){console.error("Error in file upload:",n),alert("Error uploading file: ".concat(n.message)),f(!1)}finally{e.target.value=""}}}),(0,l.jsx)("button",{className:"upload-btn",disabled:!u||d,children:d?"Processing...":"Process CSV"})]})]}),(0,l.jsxs)("div",{className:"analytics-section",children:[(0,l.jsxs)("div",{className:"chart-container",children:[(0,l.jsx)("h3",{children:"Daily Redemptions"}),(0,l.jsxs)("table",{className:"analytics-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Count"})]})}),(0,l.jsxs)("tbody",{children:[p.redemptions.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.date}),(0,l.jsx)("td",{children:e.count})]},e.date))),0===p.redemptions.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"2",className:"no-data",children:"No redemptions yet"})})]})]})]}),(0,l.jsxs)("div",{className:"chart-container",children:[(0,l.jsx)("h3",{children:"Coupon Allocations"}),(0,l.jsxs)("table",{className:"analytics-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Count"})]})}),(0,l.jsxs)("tbody",{children:[p.allocations.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.date}),(0,l.jsx)("td",{children:e.count})]},e.date))),0===p.allocations.length&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"2",className:"no-data",children:"No allocations yet"})})]})]})]})]}),(0,l.jsxs)("div",{className:"users-list",children:[(0,l.jsx)("h2",{children:"Active Users"}),(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Active Coupons"}),(0,l.jsx)("th",{children:"Last Allocation"}),(0,l.jsx)("th",{children:"Total Redemptions"})]})}),(0,l.jsx)("tbody",{children:o.map((e=>{var t;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.email}),(0,l.jsx)("td",{children:e.active_coupons||0}),(0,l.jsx)("td",{children:e.last_allocation_date?new Date(e.last_allocation_date).toLocaleDateString():"Never"}),(0,l.jsx)("td",{children:(null===(t=e.redemption_history)||void 0===t?void 0:t.length)||0})]},e.uid)}))})]})]}),(0,l.jsx)("h2",{children:"Redemption History"}),(0,l.jsx)("div",{className:"redemptions-list",children:g.map(((e,t)=>(0,l.jsxs)("div",{className:"redemption-card",children:[(0,l.jsxs)("p",{children:["User: ",e.user_email]}),(0,l.jsxs)("p",{children:["Item: ",e.item_name]}),(0,l.jsxs)("p",{children:["Original Price: \u20b9",e.item_price]}),(0,l.jsxs)("p",{children:["Redeemed: ",new Date(e.redeemed_at).toLocaleString()]})]},t)))}),(0,l.jsxs)("div",{className:"categorized-tables",children:[(0,l.jsxs)("div",{className:"table-section",children:[(0,l.jsx)("h3",{children:"Active Users (Within 30 Days)"}),(0,l.jsxs)("table",{className:"coupon-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Coupons Left"}),(0,l.jsx)("th",{children:"Days Remaining"})]})}),(0,l.jsx)("tbody",{children:y.activeUsers.map(((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.email}),(0,l.jsx)("td",{className:"coupon-count",children:e.couponsLeft}),(0,l.jsxs)("td",{children:[e.exactDaysRemaining," days"]})]},t)))})]})]}),(0,l.jsxs)("div",{className:"table-section",children:[(0,l.jsx)("h3",{children:"Exhausted Users (Waiting for Refill)"}),(0,l.jsxs)("table",{className:"coupon-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Days Until Refill"})]})}),(0,l.jsx)("tbody",{children:y.exhaustedUsers.map(((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.email}),(0,l.jsxs)("td",{children:[e.daysUntilRefill," days"]})]},t)))})]})]}),(0,l.jsxs)("div",{className:"table-section",children:[(0,l.jsx)("h3",{children:"Overdue Users with Coupons"}),(0,l.jsxs)("table",{className:"coupon-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Unused Coupons"})]})}),(0,l.jsx)("tbody",{children:y.overdueUsers.map(((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.email}),(0,l.jsx)("td",{className:"overdue-coupons",children:e.couponsLeft})]},t)))})]})]}),(0,l.jsxs)("div",{className:"table-section",children:[(0,l.jsx)("h3",{children:"Users Needing Refill"}),(0,l.jsxs)("table",{className:"coupon-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Days Overdue"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:y.refillNeeded.map(((e,n)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.email}),(0,l.jsxs)("td",{children:[e.daysOverdue," days"]}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"refill-actions",children:[(0,l.jsx)("input",{type:"number",min:"1",placeholder:"Count",className:"refill-input",onChange:e=>{const t=[...y.refillNeeded];t[n].refillAmount=e.target.value,_({...y,refillNeeded:t})}}),(0,l.jsx)("button",{className:"refill-btn",onClick:()=>(async(e,n)=>{try{f(!0);const r=s.A.ref("UserCoupons").orderByChild("email").equalTo(e),i=(await r.once("value")).val();if(i){const r=Object.keys(i)[0],o=i[r],a={active_coupons:n,last_allocation_date:Date.now(),email:e,redemption_history:o.redemption_history||[],allocation_history:{...o.allocation_history||{},[Date.now()]:{amount:n,admin_id:t}}};await s.A.ref("UserCoupons/".concat(r)).update(a),alert("Coupons allocated successfully!")}else{const r=s.A.ref("UserCoupons").push(),i={active_coupons:parseInt(n),email:e,last_allocation_date:Date.now(),redemption_history:[],allocation_history:{[Date.now()]:{amount:parseInt(n),admin_id:t}},created_at:(new Date).toISOString()};await r.set(i),alert("New user created and coupons allocated successfully!")}}catch(r){console.error("Error allocating coupons:",r),alert("Error allocating coupons. Please try again.")}finally{f(!1)}})(e.email,parseInt(e.refillAmount||0)),children:"Refill"})]})})]},n)))})]})]})]})]}):(0,l.jsx)("div",{className:"access-denied",children:"Access Denied"})};r()}catch(u){r(u)}}))},3031:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>h});var i=n(9950),s=n(4894),o=(n(8488),n(8429)),a=n(1480),l=n(6564),c=n(4414),u=e([s]);s=(u.then?(await u)():u)[0];const h=e=>{let{WHICH:t,wishlist:n,setWishlist:r,itemAdd:u,itemRemove:h}=e;const[d,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[g,v]=(0,i.useState)(""),y=(0,o.Zp)(),[_,b]=(0,i.useState)({}),[w,x]=(0,i.useState)(null),[T,S]=(0,i.useState)(!1),[E,C]=(0,i.useState)(null),[k,I]=(0,i.useState)(null);(0,i.useEffect)((()=>{(async()=>{try{const e=s.A.ref("Syrups"),n=await e.once("value");if(n.exists()){const e=n.val();console.log("Initial syrups data:",e),b(e)}e.on("value",(e=>{if(e.exists()){const t=e.val();console.log("Updated syrups data:",t),b(t)}}));const r=s.A.ref("Menus/".concat(t));r.on("value",(e=>{if(e.exists()){const t=e.val();f(t)}}));const i=l.A.auth().currentUser;if(i){const e=s.A.ref("users/".concat(i.uid)),t=(await e.once("value")).val();null!==t&&void 0!==t&&t.name&&v(t.name)}return()=>{r.off(),e.off()}}catch(e){console.error("Error fetching data:",e)}})()}),[t]);const A=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),console.log("Selected syrup:",e),x(e)};return(0,c.jsxs)("div",{className:"best-menu-container",children:[(0,c.jsx)(a.A,{userName:g}),T&&(0,c.jsx)("div",{className:"syrup-modal-overlay",onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!1),x(null)},children:(0,c.jsxs)("div",{className:"syrup-modal",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,c.jsxs)("h3",{children:["Add Syrup to ",null===p||void 0===p?void 0:p.Name,"?"]}),(0,c.jsxs)("div",{className:"syrup-options",children:[(0,c.jsxs)("div",{className:"syrup-option ".concat(null===w?"selected":""),onClick:e=>A(null,e),children:[(0,c.jsx)("input",{type:"radio",checked:null===w,onChange:e=>A(null,e)}),(0,c.jsx)("label",{children:"No Syrup"})]}),_&&Object.entries(_).map((e=>{let[t,n]=e;return console.log("Rendering syrup option:",t,n),n.Stock>0?(0,c.jsxs)("div",{className:"syrup-option ".concat(w===t?"selected":""),onClick:e=>A(t,e),children:[(0,c.jsx)("input",{type:"radio",checked:w===t,onChange:e=>A(t,e)}),(0,c.jsxs)("label",{children:[n.Name," (+\u20b9",n.Price,")"]})]},t):null}))]}),(0,c.jsxs)("div",{className:"syrup-modal-actions",children:[(0,c.jsx)("button",{onClick:e=>(e=>{if(e&&(e.preventDefault(),e.stopPropagation()),console.log("Confirming syrup selection:",{selectedItem:p,selectedSize:E,selectedPrice:k,selectedSyrup:w}),p&&E&&null!==k){const e={...p,Category:t};if(w){const n=_[w],r={...e,syrup:{name:n.Name,price:n.Price},Price:k+n.Price};u(r,E,r.Price,t)}else u(e,E,k,t)}x(null),S(!1),m(null),C(null),I(null)})(e),children:"Add to Cart"}),(0,c.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!1),x(null)},children:"Cancel"})]})]})}),p?(0,c.jsxs)("div",{className:"openDetailedCardContainer",children:[0===p.Stock?(0,c.jsx)("div",{className:"Unavailable",children:"Unavailable"}):"",(0,c.jsx)("div",{className:"closeButton",onClick:()=>{m(null)},children:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,c.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})})}),(0,c.jsxs)("div",{className:"detailed-item-card",children:[p.Img&&(0,c.jsx)("div",{className:"detailed-item-card-img",children:(0,c.jsx)("img",{src:p.Img,alt:p.Name})}),(0,c.jsxs)("div",{className:"detailed-item-card-info",children:[(0,c.jsx)("div",{className:"detailed-item-card-name",children:p.Name}),(0,c.jsx)("div",{className:"detailed-item-card-desc",children:p.Desc}),(0,c.jsx)("div",{className:"detailed-item-card-price",children:Object.entries(p.Price).map((e=>{var r;let[i,s]=e;return(0,c.jsxs)("div",{className:"detailed-price-row",children:[(0,c.jsx)("span",{className:"detailed-size",children:i}),(0,c.jsxs)("div",{className:"wishlistToggler",children:[(0,c.jsx)("div",{className:"itemRemove",onClick:e=>{e.stopPropagation(),h(p,i)},children:"-"}),(0,c.jsx)("div",{className:"itemCount",children:(null===(r=n.find((e=>e.Name===p.Name&&e.Size===i)))||void 0===r?void 0:r.Count)||0}),(0,c.jsx)("div",{className:"itemAdd ".concat(0===p.Stock?"Disabled":""),onClick:e=>((e,n,r,i)=>{i&&(i.preventDefault(),i.stopPropagation()),console.log("Opening syrup modal for item:",e),console.log("Current syrups state:",_),m({...e,Category:t}),C(n),I(r),S(!0)})(p,i,parseFloat(s.replace("Rs. ","")),e),children:"+"})]})]},i)}))})]})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"best-menu-container-top",onClick:()=>(e=>{const t=new Date;window.gtag("event","Looks_".concat(e,"_Click"),{timestamp:t.toLocaleString("en-GB"),click:e}),y("/menu")})("Back_Button"),children:[(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,c.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})}),(0,c.jsx)("div",{className:"cookies",children:"we use Cookies*"})]}),d?d.map((e=>(0,c.jsxs)("div",{className:"item-card ".concat(0===e.Stock?"Disabled":""),onClick:()=>(e=>{const t=new Date;window.gtag("event","Looks_".concat(e.Name,"_Card_Opened"),{timestamp:t.toLocaleString("en-GB"),itemName:e.Name,itemDetails:e}),m(e)})(e),children:[0===e.Stock?(0,c.jsx)("div",{className:"Unavailable",children:"Unavailable"}):"",(0,c.jsxs)("div",{className:"item-card-info",children:[(0,c.jsx)("div",{className:"item-card-name",children:e.Name}),(0,c.jsxs)("div",{className:"item-card-desc",children:[e.Desc.length>50?"".concat(e.Desc.slice(0,50)," ..."):e.Desc,e.Desc.length>50&&(0,c.jsx)("span",{className:"read-more",children:"(Read more)"})]}),(0,c.jsx)("div",{className:"item-card-price",children:Object.entries(e.Price).map((e=>{let[t,n]=e;return(0,c.jsx)("div",{className:"price-row",children:(0,c.jsx)("span",{className:"size",children:t})},t)}))})]}),e.Img&&(0,c.jsx)("div",{className:"item-card-img",children:(0,c.jsx)("img",{src:e.Img,alt:e.Name})}),(0,c.jsx)("span",{className:"addIcon",children:"Add +"})]},"".concat(e.Name,"_").concat(e.Desc)))):(0,c.jsx)("div",{className:"loading",children:"Loading..."}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})]})};r()}catch(h){r(h)}}))},7353:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>d});var i=n(9950),s=n(8429),o=n(6187),a=n(3842),l=n(4894),c=n(6564),u=(n(1712),n(4414)),h=e([l]);l=(h.then?(await h)():h)[0],a.t1.register(a.PP,a.kc,a.FN,a.No,a.E8,a.Bs,a.hE,a.m_,a.s$);const d=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!0),a=(0,s.Zp)(),[h,d]=(0,i.useState)({redemptionTrends:[],popularItems:[],unusedCoupons:[],userActivity:[]});(0,i.useEffect)((()=>{(async()=>{try{const e=c.A.auth().currentUser;if(!e)return void a("/");const n=await l.A.ref("Coupon_Access/".concat(e.uid)).once("value");if(!n.val())return void a("/dashboard");t(!0),f()}catch(e){console.error("Error checking access:",e),a("/dashboard")}})()}),[a]);const f=async()=>{try{const e=l.A.ref("UserCoupons"),t=(await e.once("value")).val()||{},n=p(t);d(n)}catch(e){console.error("Error fetching analytics data:",e)}finally{r(!1)}},p=e=>{const t={},n={},r={},i=[],s=Date.now();return Object.values(e).forEach((e=>{if(e.redemption_history&&Array.isArray(e.redemption_history)&&e.redemption_history.forEach((e=>{let r;if(e.redeemed_at?r=new Date(e.redeemed_at):e.date&&(r=new Date(Number(e.date))),r&&!isNaN(r.getTime())){const i=r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});t[i]=(t[i]||0)+1,e.item_name&&(n[e.item_name]=(n[e.item_name]||0)+1)}})),e.active_coupons>0&&e.last_allocation_date){const t=new Date(Number(e.last_allocation_date));if(!isNaN(t.getTime())){const n=Math.floor((s-t.getTime())/864e5);n>30&&i.push({email:e.email||"Unknown User",coupons:Math.max(0,parseInt(e.active_coupons)||0),daysInactive:n})}}e.email&&(r[e.email]=Array.isArray(e.redemption_history)?e.redemption_history.filter((e=>e&&e.date&&!isNaN(new Date(Number(e.date)).getTime()))).length:0)})),{redemptionTrends:Object.entries(t).map((e=>{let[t,n]=e;return{date:t,count:n}})).sort(((e,t)=>new Date(e.date)-new Date(t.date))),popularItems:Object.entries(n).map((e=>{let[t,n]=e;return{item:t,count:n}})).sort(((e,t)=>t.count-e.count)).slice(0,10),unusedCoupons:i.sort(((e,t)=>t.daysInactive-e.daysInactive)),userActivity:Object.entries(r).map((e=>{let[t,n]=e;return{email:t,count:n}})).sort(((e,t)=>t.count-e.count)).slice(0,10)}};if(n)return(0,u.jsx)("div",{className:"loading",children:"Loading analytics..."});if(!e)return null;const m={labels:h.redemptionTrends.map((e=>new Date(e.date).toLocaleDateString())),datasets:[{label:"Daily Redemptions",data:h.redemptionTrends.map((e=>e.count)),borderColor:"#291A02",backgroundColor:"rgba(41, 26, 2, 0.1)",fill:!0}]},g={labels:h.popularItems.slice(0,10).map((e=>e.item)),datasets:[{label:"Redemptions by Item",data:h.popularItems.slice(0,10).map((e=>e.count)),backgroundColor:["#291A02","#3C2A21","#513B2F","#664C3E","#7B5D4C","#906E5A","#A57F69","#BA9077","#CFA186","#E4B294"]}]},v={labels:h.userActivity.slice(0,10).map((e=>e.email)),datasets:[{label:"Redemptions per User",data:h.userActivity.slice(0,10).map((e=>e.count)),backgroundColor:"#291A02"}]};return 0===h.redemptionTrends.length?(0,u.jsxs)("div",{className:"analytics-dashboard",children:[(0,u.jsx)("h1",{children:"Coupon Analytics Dashboard"}),(0,u.jsx)("div",{className:"no-data-message",children:"No valid redemption data available"})]}):(0,u.jsxs)("div",{className:"analytics-dashboard",children:[(0,u.jsx)("h1",{children:"Coupon Analytics Dashboard"}),(0,u.jsxs)("div",{className:"chart-grid",children:[(0,u.jsxs)("div",{className:"chart-container",children:[(0,u.jsx)("h2",{children:"Redemption Trends"}),(0,u.jsx)(o.N1,{data:m,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Daily Redemption Trends"}}}})]}),(0,u.jsxs)("div",{className:"chart-container",children:[(0,u.jsx)("h2",{children:"Most Popular Items"}),(0,u.jsx)(o.nu,{data:g,options:{responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:"Top 10 Redeemed Items"}}}})]}),(0,u.jsxs)("div",{className:"chart-container",children:[(0,u.jsx)("h2",{children:"User Activity"}),(0,u.jsx)(o.yP,{data:v,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Top 10 Active Users"}}}})]}),(0,u.jsxs)("div",{className:"chart-container",children:[(0,u.jsxs)("h2",{children:["Unused Coupons (",">","30 days)"]}),(0,u.jsx)("div",{className:"unused-coupons-list",children:h.unusedCoupons.map(((e,t)=>(0,u.jsxs)("div",{className:"unused-coupon-item ".concat(0===e.coupons?"exhausted":""),children:[(0,u.jsx)("span",{children:e.email}),(0,u.jsxs)("span",{children:[e.coupons," coupons"]}),(0,u.jsxs)("span",{children:[e.daysInactive," days"]})]},t)))})]})]})]})};r()}catch(d){r(d)}}))},9343:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{n(9950);var r=n(4894),i=(n(8744),n(4414),e([r]));r=(i.then?(await i)():i)[0];t()}catch(s){t(s)}}))},3690:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>d});var i=n(9950),s=n(8429),o=n(4894),a=n(6564),l=(n(6747),n(7558),n(5511),n(7604)),c=n(1223),u=n(4414),h=e([o,l]);[o,l]=h.then?(await h)():h;const d=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)(!1),[l,h]=(0,i.useState)(!1),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),g=(0,s.Zp)(),[v,y]=(0,i.useState)("orders");(0,i.useEffect)((()=>{(async()=>{try{const e=await o.A.ref("KDS_Access/".concat(t)).once("value");f(e.val());const n=await o.A.ref("Stocks_Access/".concat(t)).once("value");h(n.val());const i=await o.A.ref("Reports_Access/".concat(t)).once("value");r(i.val());const s=await o.A.ref("Coupon_Access/".concat(t)).once("value");m(s.val())}catch(e){console.error(e)}})()}),[t]);const _=e=>{g(e)};return(0,u.jsxs)("div",{className:"Dashboard",children:[(0,u.jsx)("div",{className:"logo-container",children:(0,u.jsx)("img",{src:c,alt:"Solution Logo",className:"dashboard-logo"})}),(0,u.jsxs)("nav",{className:"dashboard-navigation",children:[d&&(0,u.jsxs)("button",{className:"DashboardCardMenu",onClick:()=>_("KDS"),children:[(0,u.jsx)("h2",{children:"Open KDS"}),(0,u.jsx)("p",{children:"Kitchen Display System for order management"})]}),l&&(0,u.jsxs)("button",{className:"DashboardCardMenu",onClick:()=>_("Stocks"),children:[(0,u.jsx)("h2",{children:"Stocks"}),(0,u.jsx)("p",{children:"Manage inventory and stock levels"})]}),n&&(0,u.jsxs)("button",{className:"DashboardCardMenu",onClick:()=>_("Reports"),children:[(0,u.jsx)("h2",{children:"View Reports"}),(0,u.jsx)("p",{children:"Access and analyze business reports"})]}),p&&(0,u.jsxs)("button",{className:"DashboardCardMenu",onClick:()=>_("/dashboard/coupon-management"),children:[(0,u.jsx)("h2",{children:"Coupon Management"}),(0,u.jsx)("p",{children:"Manage user coupons and view analytics"})]}),p&&(0,u.jsxs)("button",{className:"DashboardCardMenu",onClick:()=>_("/dashboard/coupon-analytics"),children:[(0,u.jsx)("h2",{children:"Coupon Analytics"}),(0,u.jsx)("p",{children:"View detailed coupon usage analytics"})]}),(0,u.jsxs)("button",{className:"SignOutButton",onClick:()=>{window.gtag("event","sign_out",{event_category:"email/password",event_label:"signed out"}),a.A.auth().signOut(),g("/login")},children:[(0,u.jsx)("h2",{children:"Sign Out"}),(0,u.jsx)("p",{children:"Log out of your account"})]})]})]})};r()}catch(d){r(d)}}))},9481:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(9950);var r=n(2074);const i=n.p+"static/media/NHIE.38e5183efdd103b9d1a4.png",s=n.p+"static/media/WIMLT.2523bbb5282ef7bedf60.png",o=n.p+"static/media/TOT.38e09cd48294f4362d00.png";var a=n(4414);const l=()=>(0,a.jsxs)("div",{className:"Games",children:[(0,a.jsx)("div",{className:"best-menu-container-top",onClick:()=>(e=>{const t=new Date;window.gtag("event","Looks_".concat(e,"_Click"),{timestamp:t.toLocaleString("en-GB"),click:e}),window.location.href="/"})("Back_Button"),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,a.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})})}),(0,a.jsxs)("div",{className:"GamesContainer",children:[(0,a.jsx)("h1",{className:"GamesTitle",children:"Ice Breakers"}),(0,a.jsx)("h2",{className:"GamesCoverTitle",children:"Never Have I Ever"}),(0,a.jsx)(r.N_,{to:"/Game?Game=NHIE",children:(0,a.jsx)("img",{src:i,alt:"NHIE",className:"GamesCover"})}),(0,a.jsx)("h2",{className:"GamesCoverTitle",children:"Who Is Most Likely To"}),(0,a.jsx)(r.N_,{to:"/Game?Game=WIMLT",children:(0,a.jsx)("img",{src:s,alt:"WIMLT",className:"GamesCover"})}),(0,a.jsx)("h2",{className:"GamesCoverTitle",children:"This Or That"}),(0,a.jsx)(r.N_,{to:"/Game?Game=TOT",children:(0,a.jsx)("img",{src:o,alt:"TOT",className:"GamesCover"})})]})]})},5522:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>p});var i=n(9950),s=n(4894),o=n(6564),a=(n(6747),n(9847),n(4853)),l=n(4414),c=e([s]);s=(c.then?(await c)():c)[0];class u extends i.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!1}}componentDidCatch(e,t){console.log("Suppressed error:",e)}render(){return this.props.children}}const h=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)(!1),[c,h]=(0,i.useState)({}),[d,p]=(0,i.useState)(new Date),[m,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[_,b]=(0,i.useState)(!1),[w]=(0,i.useState)(new Audio(a)),[x,T]=(0,i.useState)({}),[S,E]=(0,i.useState)({});(0,i.useEffect)((()=>{(async()=>{try{if(!t)return;const e=C(t),n=await f((()=>s.A.ref("KDS_Access/".concat(e)).once("value")));r((null===n||void 0===n?void 0:n.val())||!1)}catch(e){console.error(e)}})()}),[t]);const C=e=>e?e.toString().replace(/\./g,"-dot-").replace(/@/g,"-at-").replace(/\$/g,"-dollar-").replace(/\[/g,"-lbracket-").replace(/\]/g,"-rbracket-").replace(/#/g,"-hash-"):"",k=()=>{if(v){const e=new Audio(a);e.volume=.5,e.play().catch((e=>console.log("Audio play failed:",e)))}else b(!0)},I=()=>{if(!v){const e=new Audio(a);e.volume=.5,e.play().then((()=>{e.pause(),e.currentTime=0,y(!0),_&&(k(),b(!1))})).catch((e=>{console.log("Could not initialize audio:",e)}))}},A=e=>{try{if(null!==e.val()){const t=e.val(),n=Object.keys(t).map((e=>({...t[e],id:e}))).sort(((e,t)=>{const n=O(e.created_on);return O(t.created_on)-n})).reduce(((e,t)=>{const n=t.order_id;return e[n]||(e[n]=[]),e[n].push(t),e}),{});Object.keys(n).forEach((e=>{const t=n[e],r=t.reduce(((e,t)=>{const n=O(t.created_on);return e?n<e?n:e:n}),null);x[e]||T((n=>{var i;return{...n,[e]:{startTime:r,status:(null===(i=t[0])||void 0===i?void 0:i.status)||"Pending"}}})),t.forEach((e=>{if(!S[e.order_item_id]&&"Preparing"===e.status){const t=e.prep_start_time?O(e.prep_start_time):new Date;E((n=>({...n,[e.order_item_id]:{startTime:t,status:e.status}})))}}))})),h(n)}else h({})}catch(t){console.error(t.message)}};(0,i.useEffect)((()=>{(async()=>{try{g(!0);const e=await f((()=>s.A.ref("new").once("value"))),t=(null===e||void 0===e?void 0:e.val())||{};g(!1),A(e);const n=new Set(Object.keys(t).map((e=>t[e].order_id))),r=s.A.ref("new").on("child_added",(e=>{const t=e.val();t&&t.order_id&&(n.has(t.order_id)||(k(),n.add(t.order_id)))})),i=s.A.ref("new").on("value",A);return()=>{f((()=>s.A.ref("new").off("value",i))),f((()=>s.A.ref("new").off("child_added",r)))}}catch(e){console.error(e.message)}finally{g(!1)}})()}),[v,x,S]),(0,i.useEffect)((()=>{const e=setInterval((()=>{p(new Date)}),1e3);return()=>clearInterval(e)}),[]);const N=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},R=e=>e?Math.floor((new Date-e)/1e3):0,P=e=>e<120?"time-normal":e<300?"time-warning":"time-danger",O=e=>{if(!e)return new Date;try{const[t,n]=e.split(", "),[r,i,s]=t.split("/"),[o,a,l]=n.split(":");return new Date(s,i-1,r,o,a,l)}catch(t){return console.error("Error parsing timestamp:",e,t),new Date}},D=e=>{switch(e){case"Pending":default:return"status-pending";case"Preparing":return"status-preparing";case"Served":return"status-served"}},M=e=>!(!e||0===e.length)&&e.every((e=>"Preparing"===e.status));return m?(0,l.jsxs)("div",{className:"loading-overlay",children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("div",{className:"spinner-message",children:"Loading..."})]}):(0,l.jsx)(u,{children:(0,l.jsx)("div",{className:"kds-container",onClick:I,children:n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"kds-header",children:[(0,l.jsx)("h1",{children:"Kitchen Display System"}),(0,l.jsx)("div",{className:"kds-date",children:(new Date).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),!v&&(0,l.jsx)("div",{className:"audio-init-message",children:(0,l.jsx)("button",{onClick:I,className:"audio-init-button",children:"Click here to enable order notifications"})}),c&&Object.keys(c).length>0?(0,l.jsx)("div",{className:"orders-grid",children:Object.keys(c).map((e=>{var t,n,r,i,a,u;const d=c[e],p=(e=>e&&0!==e.length?e.every((e=>"Served"===e.status))?"Served":e.some((e=>"Preparing"===e.status))?"Preparing":"Pending":"Pending")(d),m=(null===(t=x[e])||void 0===t?void 0:t.startTime)||d.reduce(((e,t)=>{const n=O(t.created_on);return e?n<e?n:e:n}),null),g=R(m);return(0,l.jsxs)("div",{className:"order-card ".concat(D(p)),"data-order-id":e,children:[(0,l.jsxs)("div",{className:"order-header",children:[(0,l.jsxs)("div",{className:"order-info",children:[(0,l.jsx)("h2",{children:(null===(n=d[0])||void 0===n||null===(r=n.customer_name)||void 0===r?void 0:r.substring(0,(null===(i=d[0])||void 0===i||null===(a=i.customer_name)||void 0===a?void 0:a.length)-15))||"Customer"}),(0,l.jsxs)("div",{className:"order-meta",children:[(0,l.jsxs)("span",{className:"order-id",children:["Order #",e.slice(-6)]}),(0,l.jsxs)("span",{className:"order-section",children:["Section: ",(null===(u=d[0])||void 0===u?void 0:u.Section)||"Main"]})]})]}),(0,l.jsxs)("div",{className:"order-timer ".concat(P(g)),children:[(0,l.jsx)("div",{className:"timer-label",children:"Order Time"}),(0,l.jsx)("div",{className:"timer-value",children:N(g)})]})]}),(0,l.jsx)("div",{className:"order-status-bar",children:(0,l.jsxs)("div",{className:"status-badge-container",children:[(0,l.jsx)("span",{className:"status-badge ".concat(D(p)),children:p}),(0,l.jsx)("div",{className:"order-actions",children:(0,l.jsxs)("label",{className:"checkbox-container",children:[(0,l.jsx)("input",{type:"checkbox",checked:"Served"===p,onChange:()=>(async e=>{try{const r=document.querySelector('[data-order-id="'.concat(e,'"]'));r&&r.classList.add("order-loading");const i=c[e];if(!i||0===i.length)return void(r&&r.classList.remove("order-loading"));const a="Served";E((e=>{const t={...e};return i.forEach((e=>{delete t[e.order_item_id]})),t})),T((t=>{const n={...t};return delete n[e],n}));const l=(new Date).toLocaleString("en-GB");for(const u of i){const r={status:a,served_time:l,served_by_id:o.A.auth().currentUser.uid,served_by_email:o.A.auth().currentUser.email},i=await f((()=>s.A.ref("new/".concat(u.order_item_id)).once("value"))),h=null===i||void 0===i?void 0:i.val();if(h){var t,n;await f((()=>s.A.ref("new/".concat(u.order_item_id)).update(r)));const i=null===(t=c[e])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.customer_name;if(i){const e=C(i);e&&await f((()=>s.A.ref("orders/".concat(e,"/").concat(u.order_item_id,"/status")).set(a)))}await f((()=>s.A.ref("completed/".concat(u.order_item_id)).set({...h,...r}))),await f((()=>s.A.ref("new/".concat(u.order_item_id)).remove()))}}h((t=>{const n={...t};return delete n[e],n})),r&&r.classList.remove("order-loading")}catch(r){console.error("Error changing order status:",r);const t=document.querySelector('[data-order-id="'.concat(e,'"]'));t&&t.classList.remove("order-loading")}})(e),disabled:!M(d),className:"order-checkbox"}),(0,l.jsx)("span",{className:"checkmark"}),(0,l.jsx)("span",{className:"checkbox-label",children:"Complete Order"})]})})]})}),(0,l.jsx)("div",{className:"order-items",children:d.map((t=>{const n="Preparing"===t.status&&S[t.order_item_id]?R(S[t.order_item_id].startTime):0;return(0,l.jsxs)("div",{className:"order-item ".concat(D(t.status)),"data-item-id":t.order_item_id,children:[(0,l.jsx)("div",{className:"item-details",children:(0,l.jsxs)("div",{className:"item-details-container",children:[(0,l.jsxs)("div",{className:"item-details-row",children:[(0,l.jsxs)("div",{className:"item-name-container",children:[(0,l.jsx)("span",{className:"item-name",children:t.Name}),(0,l.jsx)("span",{className:"item-size",children:t.Size})]}),(0,l.jsxs)("div",{className:"item-quantity",children:["x",t.Count]})]}),t.has_syrup&&t.syrup&&(0,l.jsx)("div",{className:"item-customizations",children:(0,l.jsxs)("div",{className:"syrup-tag",children:[(0,l.jsx)("span",{className:"syrup-tag-icon",children:"\ud83e\uddc9"}),(0,l.jsxs)("span",{children:[t.syrup.name," Syrup"]})]})})]})}),"Preparing"===t.status&&(0,l.jsx)("div",{className:"item-timer ".concat(P(n)),children:N(n)}),(0,l.jsx)("div",{className:"item-status-controls",children:(0,l.jsxs)("label",{className:"checkbox-container",children:[(0,l.jsx)("input",{type:"checkbox",checked:"Preparing"===t.status,onChange:()=>(async(e,t,n)=>{try{const u=document.querySelector('[data-item-id="'.concat(t,'"]'));u&&u.classList.add("item-loading");const d=new Date,p=d.toLocaleString("en-GB"),m="Pending"===n?"Preparing":"Pending",g={status:m};if("Preparing"===m){var r,i;g.prep_start_time=p,g.prepared_by_id=o.A.auth().currentUser.uid,g.prepared_by_email=o.A.auth().currentUser.email,E((e=>({...e,[t]:{startTime:d,status:m}}))),await f((()=>s.A.ref("new/".concat(t)).update(g)));const n=null===(r=c[e])||void 0===r||null===(i=r[0])||void 0===i?void 0:i.customer_name;if(n){const e=C(n);e&&await f((()=>s.A.ref("orders/".concat(e,"/").concat(t,"/status")).set(m)))}h((n=>{const r={...n};return r[e]&&(r[e]=r[e].map((e=>e.order_item_id===t?{...e,status:m}:e))),r}))}else if("Pending"===m){var a,l;await f((()=>s.A.ref("new/".concat(t)).update(g)));const n=null===(a=c[e])||void 0===a||null===(l=a[0])||void 0===l?void 0:l.customer_name;if(n){const e=C(n);e&&await f((()=>s.A.ref("orders/".concat(e,"/").concat(t,"/status")).set(m)))}S[t]&&E((e=>{const n={...e};return delete n[t],n})),h((n=>{const r={...n};return r[e]&&(r[e]=r[e].map((e=>e.order_item_id===t?{...e,status:m}:e))),r}))}u&&u.classList.remove("item-loading")}catch(u){console.error("Error changing item status:",u);const e=document.querySelector('[data-item-id="'.concat(t,'"]'));e&&e.classList.remove("item-loading")}})(e,t.order_item_id,t.status),disabled:"Served"===p,className:"item-checkbox"}),(0,l.jsx)("span",{className:"checkmark"}),(0,l.jsx)("span",{className:"checkbox-label"})]})})]},t.order_item_id)}))})]},e)}))}):(0,l.jsxs)("div",{className:"no-orders-message",children:[(0,l.jsx)("div",{className:"no-orders-icon",children:"\ud83c\udf7d\ufe0f"}),(0,l.jsx)("h2",{children:"No pending orders"}),(0,l.jsx)("p",{children:"New orders will appear here automatically"})]})]}):(0,l.jsxs)("div",{className:"access-denied",children:[(0,l.jsx)("h2",{children:"Access Denied"}),(0,l.jsx)("p",{children:"You don't have permission to access the Kitchen Display System."})]})})})},d=e=>(console.log("Firebase operation error:",e),null),f=async e=>{try{return await e()}catch(t){return d(t)}},p=h;r()}catch(u){r(u)}}))},7172:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>u});var i=n(9950),s=n(4894),o=n(2528),a=(n(8488),n(8429)),l=n(4414),c=e([s]);s=(c.then?(await c)():c)[0];const u=e=>{let{WHICH:t,wishlist:n,setWishlist:r,loggedInUser:c,itemAdd:u,itemRemove:h}=e;const[d,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),g=(0,a.Zp)();(0,i.useEffect)((()=>{(async()=>{const e=await s.A.ref("Menus/".concat(t)).once("value");if(e.exists()){const t=e.val();f(t)}})();const e=s.A.ref("Menus/".concat(t)),n=e.on("value",(e=>{if(e.exists()){const t=e.val();f(t)}}));return()=>{e.off("value",n)}}),[t]);const v=e=>{n.find((t=>t.Name===e.Name))?u(e):r((t=>[...t,{...e,Count:1}]))};return(0,l.jsxs)("div",{className:"best-menu-container",children:[(0,l.jsx)("button",{className:"profile-button",onClick:()=>{g("/profile")},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"#FFF9E3",children:(0,l.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),p?(0,l.jsxs)("div",{className:"openDetailedCardContainer",children:[0===p.Stock?(0,l.jsx)("div",{className:"Unavailable",children:"Unavailable"}):"",(0,l.jsx)("div",{className:"closeButton",onClick:()=>{m(null)},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,l.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})})}),(0,l.jsxs)("div",{className:"detailed-item-card",children:[p.Img&&(0,l.jsx)("div",{className:"detailed-item-card-img",children:(0,l.jsx)("img",{src:p.Img,alt:p.Name})}),(0,l.jsxs)("div",{className:"detailed-item-card-info",children:[(0,l.jsx)("div",{className:"detailed-item-card-name",children:p.Name}),(0,l.jsx)("div",{className:"detailed-item-card-desc",children:p.Desc}),(0,l.jsx)("div",{className:"detailed-item-card-price",children:Object.entries(p.Price).map((e=>{var r;let[i,s]=e;return(0,l.jsxs)("div",{className:"detailed-price-row",children:[(0,l.jsx)("span",{className:"detailed-size",children:i})," ",(0,l.jsxs)("div",{className:"wishlistToggler",children:[(0,l.jsx)("div",{className:"itemRemove",onClick:()=>h(p,i),children:"-"}),(0,l.jsx)("div",{className:"itemCount",children:(null===(r=n.find((e=>e.Name===p.Name&&e.Size===i)))||void 0===r?void 0:r.Count)||0}),(0,l.jsx)("div",{className:"itemAdd ".concat(0===p.Stock?"Disabled":""),onClick:()=>u(p,i,s,t),children:"+"})]})]},i)}))})]})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"best-menu-container-top",onClick:()=>(e=>{const t=new Date;window.gtag("event","Looks_".concat(e,"_Click"),{timestamp:t.toLocaleString("en-GB"),click:e}),window.location.href="/"})("Back_Button"),children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#291A02",children:(0,l.jsx)("path",{d:"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"})}),(0,l.jsx)("div",{className:"cookies",children:"we use Cookies*"})]}),d?d.map((e=>(0,l.jsx)(o.A,{item:e,loggedInUser:c,onOrder:v},"".concat(e.Name,"_").concat(e.Desc)))):(0,l.jsx)("div",{className:"loading",children:"Loading..."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})]})};r()}catch(u){r(u)}}))},3881:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>f});var i=n(9950),s=n(8429),o=(n(6880),n(1480)),a=n(6564),l=n(4894),c=(n(8674),n(7558),n(4427)),u=n(7340),h=n(4414),d=e([l]);l=(d.then?(await d)():d)[0];const f=()=>{const[e,t]=(0,i.useState)(0),r=(0,s.zy)(),[d,f]=(0,i.useState)(""),p=(0,s.Zp)(),m=new URLSearchParams(r.search),g=m.get("Section"),v=m.get("Table");null!==g&&localStorage.setItem("looksEttarraSection",g),null!==v&&localStorage.setItem("looksEttarraTable",v),(0,i.useEffect)((()=>{const e=setInterval((()=>{t((e=>(e+1)%7))}),6e4);return(async()=>{const e=a.A.auth().currentUser;if(e)try{const t=l.A.ref("users/".concat(e.uid)),n=(await t.once("value")).val();n&&n.name&&f(n.name)}catch(t){console.error("Error fetching user name:",t)}})(),()=>{clearInterval(e)}}));const y=e=>{try{const t=new Date;"function"===typeof window.gtag&&window.gtag("event","Looks_Menu_".concat(e.split("/").pop()),{timestamp:t.toLocaleString("en-GB")});const n=e.startsWith("/")?e:"/menu/".concat(e.toLowerCase());p(n)}catch(t){console.warn("Analytics error:",t),p("/menu/".concat(e.toLowerCase()))}};return(0,h.jsxs)("div",{className:"LandingContainer",children:[(0,h.jsx)(o.A,{onClick:()=>{const e=a.A.auth().currentUser;p(e?"/profile":"/")}}),(0,h.jsxs)("div",{className:"Landing",children:[(0,h.jsxs)("div",{className:"logoContainer",style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white"},children:[(0,h.jsx)("img",{src:n(1223),alt:"Ettarra Logo",style:{width:"70px",height:"auto",margin:"0 20px"}}),(0,h.jsx)("img",{src:n(4437),alt:"Sloution Logo",style:{width:"150px",height:"auto",margin:"0 20px",filter:"invert(1)"}})]}),(0,h.jsxs)("div",{className:"gameCardContainer",onClick:()=>y("Games"),children:[(0,h.jsxs)("div",{className:"gamesBanner",children:[(0,h.jsxs)("div",{className:"gamesBannerText",children:["Play with your friends!",(0,h.jsx)("br",{}),"And, if you're lucky play with your Date!"]}),(0,h.jsx)("button",{className:"gameCard",children:"Play Now"})]}),(0,h.jsxs)("video",{className:"gamesVideo",alt:"banner",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[(0,h.jsx)("source",{src:c,type:"video/mov"}),(0,h.jsx)("source",{src:u,type:"video/mp4"})]})]}),(0,h.jsxs)("div",{className:"menuCardContainer",children:[(0,h.jsx)("button",{className:"menuCard ColdMenu",onClick:()=>y("tea"),children:"Tea"}),(0,h.jsx)("button",{className:"menuCard HotMenu",onClick:()=>y("coffee"),children:"Coffee"})]}),(0,h.jsxs)("div",{className:"schoolOfThought",children:[(0,h.jsx)("div",{className:"schoolOfThoughtTitle",children:"Quote For The Day"}),(0,h.jsx)("div",{className:"schoolOfThoughtThought",children:["Life is what happens between coffee and wine.","Todays good mood is sponsored by coffee.","Coffee like coca*ne but better","I'd rather take coffee than compliments","E = mc\xb2 (Energy = my coffee\xb2)","Yawn: A silent scream of coffee","Stay Grounded"][e]})]}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{})]}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{})]})};r()}catch(f){r(f)}}))},6881:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9950),i=n(8429),s=n(6564),o=(n(6747),n(4414));const a=e=>{let{setLoggedInUser:t}=e;const[n,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(!1),p=(0,i.Zp)();(0,r.useEffect)((()=>{try{var e;null!==(e=s.A.auth().currentUser)&&void 0!==e&&e.uid&&(t(s.A.auth().currentUser.uid),window.gtag("event","session_continued",{event_category:"loggned_in_with_persistence",event_label:"logged_in",user:s.A.auth().currentUser.email}),p("/dashboard"))}catch(n){"typeerror"!==n.name.toLowerCase()&&console.error(n.name)}}),[t,p]);return(0,o.jsx)("div",{className:"login-container",children:(0,o.jsxs)("div",{className:"login-box",children:[(0,o.jsx)("div",{className:"logo-container",children:(0,o.jsx)("div",{className:"logo",children:"\u0c8e"})}),(0,o.jsxs)("div",{className:"form-container",children:[(0,o.jsx)("h1",{children:"Login"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.A.auth().signInWithEmailAndPassword(n,l).then((e=>{const n=e.user.uid;t(n),window.gtag("event","login",{event_category:"email/password",event_label:"logged_in"}),p("/dashboard")})).catch((e=>{window.gtag("event","login_failed",{event_category:"email/password",event_label:e.message}),h(e.message),console.error("Login Error:",e)}))},children:[(0,o.jsx)("div",{className:"input-group",children:(0,o.jsx)("input",{type:"email",placeholder:"Email",value:n,onChange:e=>a(e.target.value)})}),(0,o.jsxs)("div",{className:"input-group",children:[(0,o.jsx)("input",{type:d?"text":"password",placeholder:"Password",value:l,onChange:e=>c(e.target.value)}),(0,o.jsx)("span",{className:"show-password",onClick:()=>{f((e=>!e))},children:d?"Hide":"Show"})]}),u&&(0,o.jsx)("div",{className:"error-message",children:u.split(":")[1]}),(0,o.jsx)("button",{type:"submit",children:"Login \u2192"})]})]})]})})}},7131:(e,t,n)=>{"use strict";n(9950),n(6564),n(4414)},9703:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>u});var i=n(9950),s=n(4894),o=n(5271),a=(n(4790),n(4414)),l=e([s]);s=(l.then?(await l)():l)[0];const c=e=>e?e.toString().replace(/\./g,"-dot-").replace(/@/g,"-at-").replace(/\$/g,"-dollar-").replace(/\[/g,"-lbracket-").replace(/\]/g,"-rbracket-").replace(/#/g,"-hash-"):"",u=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)(!1),[l,u]=(0,i.useState)([]),[h,d]=(0,i.useState)([]),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),[v,y]=(0,i.useState)(0),[_,b]=(0,i.useState)(0),[w,x]=(0,i.useState)(""),[T,S]=(0,i.useState)("");(0,i.useEffect)((()=>{(async()=>{try{const e=await s.A.ref("Reports_Access/".concat(t)).once("value");r(e.val())}catch(e){console.error(e)}})()}),[t]),(0,i.useEffect)((()=>{if(n){const e=async()=>{const e=(await s.A.ref("completed").once("value")).val(),t=e?Object.entries(e).map((e=>{let[t,n]=e;const r=(e=>{if("number"===typeof e)return e;if(!e)return 0;const t=e.toString().replace(/[^0-9.]/g,"");return parseFloat(t)||0})(n.Price),i=parseInt(n.Count)||0,s=n.customer_name?n.customer_name.split(" ").slice(0,-1).join(" "):"Unknown",o=c(s);return{id:t,order_id:n.order_id,order_item_id:n.order_item_id,created_on:n.created_on,created_on_date:n.created_on_date,created_on_time:n.created_on_time,prep_start_time:n.prep_start_time,served_time:n.served_time,item_name:n.Name,category:n.Category,size:n.Size,quantity:i,price:r,total:r*i,customer:s,customer_encoded:o,status:n.status,section:n.Section,prepared_by:n.prepared_by_email?c(n.prepared_by_email):"-",served_by:n.served_by_email?c(n.served_by_email):"-",description:n.Desc}})):[];console.log("Fetched completed orders:",t),u(t),d(t),C(t)};e()}}),[n]);const E=(e,t,n,r)=>{let i=[...l];if(e&&(i=i.filter((t=>t.item_name&&t.item_name.toLowerCase().includes(e)||t.customer&&t.customer.toLowerCase().includes(e)||t.order_id&&t.order_id.toLowerCase().includes(e)||t.category&&t.category.toLowerCase().includes(e)))),t&&(i=i.filter((e=>e.category===t))),n){const e=new Date(n);i=i.filter((t=>new Date(t.created_on_date.split("/").reverse().join("-"))>=e))}if(r){const e=new Date(r);e.setHours(23,59,59),i=i.filter((t=>new Date(t.created_on_date.split("/").reverse().join("-"))<=e))}d(i),C(i)},C=e=>{const t=e.reduce(((e,t)=>e+(Number(t.quantity)||0)),0),n=e.reduce(((e,t)=>e+(Number(t.total)||0)),0);y(t),b(n)};return n?(0,a.jsxs)("div",{className:"reports-container",children:[(0,a.jsx)("h1",{children:"Sales Reports"}),(0,a.jsxs)("div",{className:"reports-controls",children:[(0,a.jsxs)("div",{className:"search-filter",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by name, customer, or order ID",value:f,onChange:e=>{const t=e.target.value.toLowerCase();p(t),E(t,m,w,T)}}),(0,a.jsxs)("select",{value:m,onChange:e=>{const t=e.target.value;g(t),E(f,t,w,T)},children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),(0,a.jsx)("option",{value:"HotCoffeeMenu",children:"Hot Coffee"}),(0,a.jsx)("option",{value:"ColdCoffeeMenu",children:"Cold Coffee"}),(0,a.jsx)("option",{value:"SavouryMenu",children:"Savoury"})]})]}),(0,a.jsxs)("div",{className:"date-filter",children:[(0,a.jsxs)("div",{className:"date-input",children:[(0,a.jsx)("label",{children:"From:"}),(0,a.jsx)("input",{type:"date",value:w,onChange:e=>{x(e.target.value),E(f,m,e.target.value,T)}})]}),(0,a.jsxs)("div",{className:"date-input",children:[(0,a.jsx)("label",{children:"To:"}),(0,a.jsx)("input",{type:"date",value:T,onChange:e=>{S(e.target.value),E(f,m,w,e.target.value)}})]})]}),(0,a.jsx)("button",{className:"export-btn",onClick:()=>{const e=h.map((e=>({"Order ID":e.order_id,"Order Date":e.created_on_date,"Order Time":e.created_on_time,"Preparation Start":e.prep_start_time,"Served Time":e.served_time,"Item Name":e.item_name,Category:e.category,Size:e.size,Quantity:e.quantity,Price:"Rs. ".concat(e.price.toFixed(2)),Total:"Rs. ".concat(e.total.toFixed(2)),Customer:e.customer,Status:e.status,Section:e.section,"Prepared By":e.prepared_by,"Served By":e.served_by}))),t=o.Wp.json_to_sheet(e),n=o.Wp.book_new();o.Wp.book_append_sheet(n,t,"Report"),o._h(n,"Sales_Report.xlsx")},children:"Export to Excel"})]}),(0,a.jsxs)("div",{className:"reports-summary",children:[(0,a.jsxs)("div",{className:"summary-item",children:[(0,a.jsx)("span",{className:"summary-label",children:"Total Items:"}),(0,a.jsx)("span",{className:"summary-value",children:v})]}),(0,a.jsxs)("div",{className:"summary-item",children:[(0,a.jsx)("span",{className:"summary-label",children:"Total Amount:"}),(0,a.jsxs)("span",{className:"summary-value",children:["Rs. ",_.toFixed(2)]})]})]}),0===h.length?(0,a.jsx)("div",{className:"no-data-message",children:"No data found for the selected filters."}):(0,a.jsx)("div",{className:"reports-table-container",children:(0,a.jsxs)("table",{className:"reports-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Order ID"}),(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Time"}),(0,a.jsx)("th",{children:"Prep Start"}),(0,a.jsx)("th",{children:"Served"}),(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Category"}),(0,a.jsx)("th",{children:"Size"}),(0,a.jsx)("th",{children:"Count"}),(0,a.jsx)("th",{children:"Price"}),(0,a.jsx)("th",{children:"Total"}),(0,a.jsx)("th",{children:"Customer"}),(0,a.jsx)("th",{children:"Prepared By"}),(0,a.jsx)("th",{children:"Served By"})]})}),(0,a.jsx)("tbody",{children:h.map(((e,t)=>{var n,r;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.order_id}),(0,a.jsx)("td",{children:e.created_on_date}),(0,a.jsx)("td",{children:e.created_on_time}),(0,a.jsx)("td",{children:(null===(n=e.prep_start_time)||void 0===n?void 0:n.split(", ")[1])||"-"}),(0,a.jsx)("td",{children:(null===(r=e.served_time)||void 0===r?void 0:r.split(", ")[1])||"-"}),(0,a.jsx)("td",{children:e.item_name}),(0,a.jsx)("td",{children:e.category}),(0,a.jsx)("td",{children:e.size}),(0,a.jsx)("td",{children:e.quantity}),(0,a.jsxs)("td",{className:"price-cell",children:["Rs. ",e.price.toFixed(2)]}),(0,a.jsxs)("td",{className:"price-cell",children:["Rs. ",e.total.toFixed(2)]}),(0,a.jsx)("td",{className:"customer-cell",children:e.customer}),(0,a.jsx)("td",{children:e.prepared_by}),(0,a.jsx)("td",{children:e.served_by})]},t)}))})]})})]}):(0,a.jsx)("div",{className:"reports-container",children:"You don't have access to the reports."})};r()}catch(c){r(c)}}))},7345:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>l});var i=n(9950),s=n(4894),o=(n(5474),n(4414)),a=e([s]);s=(a.then?(await a)():a)[0];const l=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)([]),[h,d]=(0,i.useState)([]),[f,p]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),[v,y]=(0,i.useState)("TeaMenu");(0,i.useEffect)((()=>{(async()=>{try{if(!t)return;const e=await s.A.ref("Stocks_Access/".concat(t)).once("value");r(e.val()||!1)}catch(e){console.error(e)}})()}),[t]),(0,i.useEffect)((()=>{(async()=>{try{l(!0);const e=await s.A.ref("Menus/TeaMenu").once("value"),t=await s.A.ref("Menus/CoffeeMenu").once("value"),n=await s.A.ref("Menus/SavouryMenu").once("value"),r=await s.A.ref("Syrups").once("value");u(e.val()||[]),d(t.val()||[]),p(n.val()||[]);const i=r.val()||{},o=Object.entries(i).map((e=>{let[t,n]=e;return{...n,id:t,Category:"Syrups"}}));g(o),l(!1)}catch(e){console.error("Error fetching menus:",e),l(!1)}})()}),[]);const _=e=>e?e.toString().replace(/\./g,"-dot-").replace(/@/g,"-at-").replace(/\$/g,"-dollar-").replace(/\[/g,"-lbracket-").replace(/\]/g,"-rbracket-").replace(/#/g,"-hash-"):"";return a?(0,o.jsx)("div",{className:"loading",children:"Loading..."}):n?(0,o.jsxs)("div",{className:"stocks-container",children:[(0,o.jsx)("h1",{children:"Stock Management"}),(0,o.jsxs)("div",{className:"category-selector",children:[(0,o.jsx)("button",{className:"TeaMenu"===v?"active":"",onClick:()=>y("TeaMenu"),children:"Tea Menu"}),(0,o.jsx)("button",{className:"CoffeeMenu"===v?"active":"",onClick:()=>y("CoffeeMenu"),children:"Coffee Menu"}),(0,o.jsx)("button",{className:"SavouryMenu"===v?"active":"",onClick:()=>y("SavouryMenu"),children:"Savoury Menu"}),(0,o.jsx)("button",{className:"Syrups"===v?"active":"",onClick:()=>y("Syrups"),children:"Syrups"})]}),(0,o.jsx)("div",{className:"stocks-grid",children:(()=>{switch(v){case"TeaMenu":return c;case"CoffeeMenu":return h;case"SavouryMenu":return f;case"Syrups":return m;default:return[]}})().map(((e,n)=>(0,o.jsxs)("div",{className:"stock-item",children:[(0,o.jsxs)("div",{className:"item-info",children:[(0,o.jsx)("h3",{children:e.Name}),"Syrups"!==v&&(0,o.jsx)("div",{className:"item-sizes",children:Object.entries(e.Price||{}).map((e=>{let[t,n]=e;return(0,o.jsxs)("span",{className:"size-tag",children:[t," - \u20b9",n.replace("Rs. ","")]},t)}))}),"Syrups"===v&&(0,o.jsx)("div",{className:"item-price",children:(0,o.jsxs)("span",{className:"price-tag",children:["\u20b9",e.Price]})})]}),(0,o.jsxs)("div",{className:"stock-control",children:[(0,o.jsx)("label",{children:"Stock:"}),(0,o.jsx)("input",{type:"number",value:e.Stock||0,onChange:n=>{const r=Math.max(0,parseInt(n.target.value)||0);(async(e,n,r)=>{try{const i=_(t);if(!(await s.A.ref("Stocks_Access/".concat(i)).once("value")).val())return void alert("You don't have permission to update stocks.");if("Syrups"===r)await s.A.ref("Syrups/".concat(e.id,"/Stock")).set(parseInt(n)),g((t=>t.map((t=>t.id===e.id?{...t,Stock:parseInt(n)}:t))));else{const t=s.A.ref("Menus/".concat(r)),i=(await t.once("value")).val();if(!i)return void console.error("Menu not found:",r);const o=i.map((t=>t.Name===e.Name?{...t,Stock:parseInt(n)}:t));switch(await t.set(o),r){case"TeaMenu":u(o);break;case"CoffeeMenu":d(o);break;case"SavouryMenu":p(o)}}}catch(i){console.error("Error updating stock:",i),alert("Failed to update stock. Please check your permissions and try again.")}})(e,r,v)},min:"0"})]})]},e.id||n)))})]}):(0,o.jsx)("div",{className:"access-denied",children:"Access Denied"})};r()}catch(l){r(l)}}))},7697:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>l});var i=n(9950),s=n(4894),o=(n(8852),n(4414)),a=e([s]);s=(a.then?(await a)():a)[0];const l=e=>{let{loggedInUser:t}=e;const[n,r]=(0,i.useState)({activeCoupons:0,lastAllocationDate:null,redemptionHistory:[]});return(0,i.useEffect)((()=>{if(t){const e=s.A.ref("UserCoupons/".concat(t));return e.on("value",(e=>{const t=e.val()||{};r({activeCoupons:t.active_coupons||0,lastAllocationDate:t.last_allocation_date,redemptionHistory:t.redemption_history||[]})})),()=>e.off()}}),[t]),(0,o.jsxs)("div",{className:"user-dashboard",children:[(0,o.jsxs)("div",{className:"coupon-status-card",children:[(0,o.jsx)("h2",{children:"My Coupons"}),(0,o.jsx)("div",{className:"coupon-count",children:n.activeCoupons}),n.lastAllocationDate&&(0,o.jsxs)("div",{className:"allocation-info",children:[(0,o.jsxs)("p",{children:["Last Allocated: ",new Date(n.lastAllocationDate).toLocaleDateString()]}),(0,o.jsxs)("p",{children:["Valid Until: ",new Date(n.lastAllocationDate+2592e6).toLocaleDateString()]})]})]}),(0,o.jsxs)("div",{className:"redemption-history-card",children:[(0,o.jsx)("h2",{children:"Recent Redemptions"}),(0,o.jsx)("div",{className:"history-list",children:n.redemptionHistory.length>0?n.redemptionHistory.map(((e,t)=>(0,o.jsxs)("div",{className:"history-item",children:[(0,o.jsx)("span",{className:"item-name",children:e.item_name}),(0,o.jsx)("span",{className:"redemption-date",children:new Date(e.date).toLocaleDateString()})]},t))):(0,o.jsx)("p",{className:"no-history",children:"No redemptions yet"})})]})]})};r()}catch(l){r(l)}}))},2981:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9950),i=n(8429),s=n(6564),o=(n(6747),n(4414));const a=e=>{let{setLoggedInUser:t}=e;const n=(0,i.Zp)(),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=s.A.auth().onAuthStateChanged((e=>{e&&(t(e.uid),window.gtag("event","user_login_success",{event_category:"google_auth",event_label:"logged_in",user:e.email}),n("/menu")),l(!1),u(!0)}));return()=>e()}),[t,n]);return!c||a?(0,o.jsx)("div",{className:"login-container",children:(0,o.jsx)("div",{className:"loading-spinner",children:"Loading..."})}):(0,o.jsx)("div",{className:"login-container",children:(0,o.jsxs)("div",{className:"login-box",children:[(0,o.jsx)("div",{className:"logo-container",children:(0,o.jsx)("div",{className:"logo",children:"\u0c8e"})}),(0,o.jsxs)("div",{className:"form-container",children:[(0,o.jsx)("h1",{children:"Welcome"}),h&&(0,o.jsx)("div",{className:"error-message",children:h.split(":")[1]||h}),(0,o.jsxs)("button",{className:"google-signin-button",onClick:async()=>{const e=new s.A.auth.GoogleAuthProvider;try{const r=(await s.A.auth().signInWithPopup(e)).user,i={name:r.displayName,email:r.email,photoURL:r.photoURL};await s.A.database().ref("users/".concat(r.uid)).set(i),t(r.uid),window.gtag("event","user_login_success",{event_category:"google_auth",event_label:"logged_in",user:r.email}),n("/menu")}catch(r){console.error("Login Error:",r),d(r.message)}},children:[(0,o.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo"}),"Continue with Google"]})]})]})})}},8682:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>u});var i=n(9950),s=n(8429),o=n(6564),a=(n(6747),n(4894)),l=(n(3791),n(4414)),c=e([a]);a=(c.then?(await c)():c)[0];const u=e=>{var t;let{loggedInUser:n}=e;const[r,c]=(0,i.useState)(null),[u,h]=(0,i.useState)(!0),[d,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[g,v]=(0,i.useState)([]),y=(0,s.Zp)();(0,i.useEffect)((()=>{n&&(async()=>{try{h(!0);const e=o.A.auth().currentUser;if(!e)return void y("/");const t=a.A.ref("users/".concat(e.uid)),n=(await t.once("value")).val()||{},r=(await e.getIdToken(!0),{name:e.displayName||n.name,email:e.email,photoURL:e.photoURL||n.photoURL});await t.update(r),c(r);const i=a.A.ref("UserCoupons").orderByChild("email").equalTo(e.email);return i.on("value",(e=>{const t=e.val();if(t){const e=Object.values(t)[0];m(e);const n=e.redemption_history||[],r=(Array.isArray(n)?n:Object.values(n)).filter((e=>e&&e.date)).sort(((e,t)=>t.date-e.date));v(r)}h(!1)})),()=>i.off()}catch(d){console.error("Error fetching user data:",d),f(d.message),h(!1)}})()}),[n,y]);const _=e=>{if(!e)return"Invalid Date";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(d){return"Invalid Date"}};return u?(0,l.jsx)("div",{className:"loading-spinner",children:"Loading..."}):d?(0,l.jsx)("div",{className:"error-message",children:d}):(0,l.jsxs)("div",{className:"profile-container",children:[(0,l.jsxs)("div",{className:"profile-header",children:[(0,l.jsx)("button",{className:"profile-back-button",onClick:()=>y(-1),children:"\u2190"}),(0,l.jsx)("button",{className:"logout-btn",onClick:async()=>{try{await o.A.auth().signOut(),y("/")}catch(d){console.error("Logout error:",d)}},children:"Logout"})]}),(0,l.jsxs)("div",{className:"profile-content",children:[(0,l.jsxs)("div",{className:"profile-section user-info",children:[(0,l.jsx)("div",{className:"profile-picture",children:null!==r&&void 0!==r&&r.photoURL?(0,l.jsx)("img",{src:r.photoURL,alt:"Profile"}):(0,l.jsx)("div",{className:"profile-initial",children:(null===r||void 0===r||null===(t=r.name)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"})}),(0,l.jsx)("h2",{children:null===r||void 0===r?void 0:r.name}),(0,l.jsx)("p",{className:"email",children:null===r||void 0===r?void 0:r.email})]}),(0,l.jsxs)("div",{className:"profile-section",children:[(0,l.jsx)("h3",{children:"My Coupons"}),(0,l.jsxs)("div",{className:"coupon-stats",children:[(0,l.jsxs)("div",{className:"coupon-card",children:[(0,l.jsx)("div",{className:"coupon-icon",children:"\ud83c\udf9f\ufe0f"}),(0,l.jsxs)("div",{className:"coupon-info",children:[(0,l.jsx)("span",{className:"coupon-count",children:(null===p||void 0===p?void 0:p.active_coupons)||0}),(0,l.jsx)("span",{className:"coupon-label",children:"Active Coupons"})]})]}),(0,l.jsxs)("div",{className:"coupon-card",children:[(0,l.jsx)("div",{className:"coupon-icon",children:"\u2728"}),(0,l.jsxs)("div",{className:"coupon-info",children:[(0,l.jsx)("span",{className:"coupon-count",children:(null===p||void 0===p?void 0:p.total_redeemed)||0}),(0,l.jsx)("span",{className:"coupon-label",children:"Total Redeemed"})]})]})]})]}),(0,l.jsxs)("div",{className:"profile-section",children:[(0,l.jsx)("h3",{children:"Recent Activity"}),(0,l.jsx)("div",{className:"activity-list",children:g.length>0?g.map(((e,t)=>(0,l.jsxs)("div",{className:"activity-item",children:[(0,l.jsx)("div",{className:"activity-date",children:_(e.date)}),(0,l.jsxs)("div",{className:"activity-details",children:[(0,l.jsx)("div",{className:"activity-type",children:"Redeemed coupon"}),(0,l.jsx)("div",{className:"activity-items",children:(0,l.jsxs)("div",{className:"redeemed-item",children:[(0,l.jsxs)("div",{className:"redeemed-item-name",children:[e.item_name,(0,l.jsx)("span",{className:"item-price",children:e.item_price})]}),(0,l.jsx)("div",{className:"item-category",children:e.category})]})})]})]},t))):(0,l.jsxs)("div",{className:"no-activity",children:[(0,l.jsx)("div",{className:"no-activity-icon",children:"\ud83d\udccb"}),(0,l.jsx)("p",{children:"No recent activity"})]})})]})]})]})};r()}catch(u){r(u)}}))},4954:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,8206)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))}},9061:(e,t,n)=>{"use strict";n.d(t,{$L:()=>M,$g:()=>I,A4:()=>d,Am:()=>K,As:()=>L,Bd:()=>T,Cv:()=>j,FA:()=>O,Fy:()=>_,HN:()=>ne,Hk:()=>s,I9:()=>G,Im:()=>z,K3:()=>a,KA:()=>c,Ku:()=>se,Ll:()=>x,OE:()=>ie,T9:()=>g,Uj:()=>u,XA:()=>v,ZQ:()=>b,bD:()=>q,cY:()=>y,dI:()=>ee,eX:()=>R,g:()=>P,gR:()=>B,gz:()=>Q,hp:()=>Y,jZ:()=>w,kH:()=>W,kj:()=>re,lT:()=>k,lV:()=>C,nr:()=>A,oD:()=>te,od:()=>Z,p7:()=>S,qc:()=>U,sr:()=>E,tD:()=>$,u:()=>h,vA:()=>i,yw:()=>V,zW:()=>N,zw:()=>f});const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new l;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=o(e);return a.encodeByteArray(t,!0)},u=function(e){return c(e).replace(/\./g,"")},h=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e){return f(void 0,e)}function f(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=f(e[n],t[n]));return e}const p=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,m=()=>{try{return p()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCC_IdWcuvEAVKifvcVqI2bPOsR-uW9OYc",REACT_APP_FIREBASE_APP_ID:"1:677211500256:web:1f0197a4521b877da42a85",REACT_APP_FIREBASE_AUTH_DOMAIN:"wondrlab-e27fc.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://wondrlab-e27fc-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-SXD2EN7X6W",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"677211500256",REACT_APP_FIREBASE_PROJECT_ID:"wondrlab-e27fc",REACT_APP_FIREBASE_STORAGE_BUCKET:"wondrlab-e27fc.firebasestorage.app",REACT_APP_GOOGLE_ANALYTICS:"",REACT_APP_GOOGLE_TAG_MANAGER:""}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&h(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},g=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config},v=e=>{var t;return null===(t=m())||void 0===t?void 0:t["_".concat(e)]};class y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function b(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())}function x(){var e;const t=null===(e=m())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function T(){return"undefined"!==typeof window||S()}function S(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function E(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function k(){const e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN}function A(){return!x()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}function R(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(D,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,s,t)}}const D=/\{\$([^}]+)}/g;function M(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}const F=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=M(h(s[0])||""),n=M(h(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},j=function(e){const t=F(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},U=function(e){const t=F(e).claims;return"object"===typeof t&&!0===t.admin};function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function z(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function q(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(H(n)&&H(s)){if(!q(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function H(e){return null!==e&&"object"===typeof e}function K(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function G(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Y(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Q{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function $(e,t){const n=new X(e,t);return n.subscribe.bind(n)}class X{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function J(){}const Z=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function ee(e,t){return"".concat(e," failed: ").concat(t," argument ")}function te(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ee(e,t)+"must be a valid function.")}function ne(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ee(e,t)+"must be a valid context object.")}const re=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(s>=55296&&s<=56319){const t=s-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(r)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ie=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function se(e){return e&&e._delegate?e._delegate:e}},1018:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i;n.d(t,{AO:()=>h,Gh:()=>D,HS:()=>M,Oi:()=>a,Rr:()=>d,pX:()=>B,pb:()=>N,rc:()=>i,tH:()=>U,ue:()=>m,yD:()=>O,zR:()=>o}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const s="popstate";function o(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,e)}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,t,n,o){void 0===o&&(o={});let{window:l=document.defaultView,v5Compat:d=!1}=o,f=l.history,p=i.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=i.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:t})}function _(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(r({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(l,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(s,y),m=e,()=>{l.removeEventListener(s,y),m=null}},createHref:e=>t(l,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=i.Push;let r=u(b.location,e,t);n&&n(r,e),g=v()+1;let s=c(r,g),o=b.createHref(r);try{f.pushState(s,"",o)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;l.location.assign(o)}d&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,t){p=i.Replace;let r=u(b.location,e,t);n&&n(r,e),g=v();let s=c(r,g),o=b.createHref(r);f.replaceState(s,"",o),d&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=N(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let s=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=A(i);o=k(s[a],e,r)}return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let l=M([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=y(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,b=3,w=2,x=1,T=10,S=-2,E=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=S),t&&(r+=w),n.filter((e=>!E(e))).reduce(((e,t)=>e+(_.test(t)?b:""===t?x:T)),r)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:M([s,u.pathname]),pathnameBase:L(M([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=M([s,u.pathnameBase]))}return o}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=P(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function D(e,t,n,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=d(e):(s=r({},e),a(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),a(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),a(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let o,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)o=n;else{let e=t.length-1;if(!i&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:j(i)}}(s,o),h=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class U extends Error{}function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],z=(new Set(V),["get",...V]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},847:function(e,t){var n,r,i;r=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=t.IS_PAPA_WORKER||!1,i={},s=0,o={parse:function(n,r){var a=(r=r||{}).dynamicTyping||!1;if(w(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!w(r.transform)&&r.transform,r.worker&&o.WORKERS_SUPPORTED){var l=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,r,a=(n=t.URL||t.webkitURL||null,r=e.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))),l=new t.Worker(a);return l.onmessage=g,l.id=s++,i[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var f=null;return o.NODE_STREAM_INPUT,"string"==typeof n?(n=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(n),f=r.download?new c(r):new h(r)):!0===n.readable&&w(n.read)&&w(n.on)?f=new d(r):(t.File&&n instanceof File||n instanceof Object)&&(f=new u(r)),f.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",s="\r\n",a='"',l=a+a,c=!1,u=null,h=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(s=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(h=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(p(a),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return f(null,e,c);if("object"==typeof e[0])return f(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),f(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(e,t,n){var o="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var a=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(a&&r){for(var c=0;c<e.length;c++)0<c&&(o+=i),o+=m(e[c],c);0<t.length&&(o+=s)}for(var u=0;u<t.length;u++){var h=a?e.length:t[u].length,d=!1,f=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(d="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var p=[],g=0;g<h;g++){var v=l?e[g]:g;p.push(t[u][v])}d=""===p.join("").trim()}if(!d){for(var y=0;y<h;y++){0<y&&!f&&(o+=i);var _=a&&l?e[y]:y;o+=m(t[u][_],y)}u<t.length-1&&(!n||0<h&&!f)&&(o+=s)}}return o}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=!1;h&&"string"==typeof e&&h.test(e)&&(e="'"+e,r=!0);var s=e.toString().replace(d,l);return(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(s,o.BAD_DELIMITERS)||-1<s.indexOf(i)||" "===s.charAt(0)||" "===s.charAt(s.length-1))?a+s+a:s}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=f,o.NetworkStreamer=c,o.FileStreamer=u,o.StringStreamer=h,o.ReadableStreamStreamer=d,t.jQuery){var a=t.jQuery;a.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},n)})})),i(),this;function i(){if(0!==r.length){var t,n,i,l,c=r[0];if(w(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=c.file,i=c.inputElem,l=u.reason,void(w(e.error)&&e.error({name:t},n,i,l));if("skip"===u.action)return void s();"object"==typeof u.config&&(c.instanceConfig=a.extend(c.instanceConfig,u.config))}else if("skip"===u)return void s()}var h=c.instanceConfig.complete;c.instanceConfig.complete=function(e){w(h)&&h(e,c.file,c.inputElem),s()},o.parse(c.file,c.instanceConfig)}else w(e.complete)&&e.complete()}function s(){r.splice(0,1),i()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=s.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:a,workerId:o.WORKER_ID,finished:c});else if(w(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var s=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=b((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(e){var t,n,r,i=Math.pow(2,53),s=-i,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,c=this,u=0,h=0,d=!1,f=!1,g=[],v={data:[],errors:[],meta:{}};if(w(e.step)){var y=e.step;e.step=function(t){if(v=t,T())x();else{if(x(),0===v.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(v.data=v.data[0],y(v,c))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function x(){return v&&r&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!b(e)}))),T()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;T()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),g.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var s=r,o=t[r];e.header&&(s=r>=g.length?"__parsed_extra":g[r]),e.transform&&(o=e.transform(o,s)),o=S(s,o),"__parsed_extra"===s?(i[s]=i[s]||[],i[s].push(o)):i[s]=o}return e.header&&(r>g.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,h+n):r<g.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,h+n)),i}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),n=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=g),h+=n,v}()}function T(){return e.header&&0===g.length}function S(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(a.test(e)){var t=parseFloat(e);if(s<t&&t<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function E(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),v.errors.push(i)}this.parse=function(i,s,a){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),s=1<i.length&&i[0].length<r[0].length;if(1===r.length||s)return"\n";for(var o=0,a=0;a<r.length;a++)"\n"===r[a][0]&&o++;return o>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,e.delimiter)w(e.delimiter)&&(e.delimiter=e.delimiter(i),v.meta.delimiter=e.delimiter);else{var c=function(t,n,r,i,s){var a,l,c,u;s=s||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var h=0;h<s.length;h++){var d=s[h],f=0,p=0,g=0;c=void 0;for(var v=new m({comments:i,delimiter:d,newline:n,preview:10}).parse(t),y=0;y<v.data.length;y++)if(r&&b(v.data[y]))g++;else{var _=v.data[y].length;p+=_,void 0!==c?0<_&&(f+=Math.abs(_-c),c=_):c=_}0<v.data.length&&(p/=v.data.length-g),(void 0===l||f<=l)&&(void 0===u||u<p)&&1.99<p&&(l=f,a=d,u=p)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),v.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=i,n=new m(u),v=n.parse(t,s,a),x(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),v.meta.aborted=!0,w(e.complete)&&e.complete(v),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,s=e.step,a=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,h=!1;this.parse=function(o,d,f){if("string"!=typeof o)throw new Error("Input must be a string");var m=o.length,g=n.length,v=r.length,y=i.length,_=w(s),b=[],x=[],T=[],S=u=0;if(!o)return K();if(e.header&&!d){var E=o.split(r)[0].split(n),C=[],k={},I=!1;for(var A in E){var N=E[A];w(e.transformHeader)&&(N=e.transformHeader(N,A));var R=N,P=k[N]||0;for(0<P&&(I=!0,R=N+"_"+P),k[N]=P+1;C.includes(R);)R=R+"_"+P;C.push(R)}if(I){var O=o.split(r);O[0]=C.join(n),o=O.join(r)}}if(l||!1!==l&&-1===o.indexOf(t)){for(var D=o.split(r),M=0;M<D.length;M++){if(T=D[M],u+=T.length,M!==D.length-1)u+=r.length;else if(f)return K();if(!i||T.substring(0,y)!==i){if(_){if(b=[],z(T.split(n)),G(),h)return K()}else z(T.split(n));if(a&&a<=M)return b=b.slice(0,a),K(!0)}}return K()}for(var L=o.indexOf(n,u),F=o.indexOf(r,u),j=new RegExp(p(c)+p(t),"g"),U=o.indexOf(t,u);;)if(o[u]!==t)if(i&&0===T.length&&o.substring(u,u+y)===i){if(-1===F)return K();u=F+v,F=o.indexOf(r,u),L=o.indexOf(n,u)}else if(-1!==L&&(L<F||-1===F))T.push(o.substring(u,L)),u=L+g,L=o.indexOf(n,u);else{if(-1===F)break;if(T.push(o.substring(u,F)),H(F+v),_&&(G(),h))return K();if(a&&b.length>=a)return K(!0)}else for(U=u,u++;;){if(-1===(U=o.indexOf(t,U+1)))return f||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),q();if(U===m-1)return q(o.substring(u,U).replace(j,t));if(t!==c||o[U+1]!==c){if(t===c||0===U||o[U-1]!==c){-1!==L&&L<U+1&&(L=o.indexOf(n,U+1)),-1!==F&&F<U+1&&(F=o.indexOf(r,U+1));var B=W(-1===F?L:Math.min(L,F));if(o.substr(U+1+B,g)===n){T.push(o.substring(u,U).replace(j,t)),o[u=U+1+B+g]!==t&&(U=o.indexOf(t,u)),L=o.indexOf(n,u),F=o.indexOf(r,u);break}var V=W(F);if(o.substring(U+1+V,U+1+V+v)===r){if(T.push(o.substring(u,U).replace(j,t)),H(U+1+V+v),L=o.indexOf(n,u),U=o.indexOf(t,u),_&&(G(),h))return K();if(a&&b.length>=a)return K(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),U++}}else U++}return q();function z(e){b.push(e),S=u}function W(e){var t=0;if(-1!==e){var n=o.substring(U+1,e);n&&""===n.trim()&&(t=n.length)}return t}function q(e){return f||(void 0===e&&(e=o.substring(u)),T.push(e),u=m,z(T),_&&G()),K()}function H(e){u=e,z(T),T=[],F=o.indexOf(r,u)}function K(e){return{data:b,errors:x,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!e,cursor:S+(d||0)}}}function G(){s(K()),b=[],x=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function g(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(w(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},s),!r);o++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=i[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function y(){throw new Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=_(e[n]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=o.parse(n.input,n.config);r&&t.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,o},void 0===(i="function"===typeof n?n.apply(t,r):n)||(e.exports=i)},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,F=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Te=null,Se=null;function Ee(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ce(e){Te?Se?Se.push(e):Se=[e]:Te=e}function ke(){if(Te){var e=Te,t=Se;if(Se=Te=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Te||null!==Se)&&(Ae(),ke())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Me(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,je=!1,Ue=null,Be={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Tt,St,Et,Ct=!1,kt=[],It=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Bt(){Ct=!1,null!==It&&jt(It)&&(It=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<kt.length){Vt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Wt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Kt(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Gt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),bn=sn(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function En(){return Sn}var Cn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Cn),In=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),jn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){jr(e,0)}function Qn(e){if(G(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Re(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Tr={},Sr={};function Er(e){if(Tr[e])return Tr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Tr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),kr=Er("animationiteration"),Ir=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=we(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case kr:case Ir:l=vn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Yr(o,a,l,u,!1),null!==c&&null!==h&&Yr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(qn(a))if(Xn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(v=Kr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var xi=[],Ti=-1;function Si(e){return{current:e}}function Ei(e){0>Ti||(e.current=xi[Ti],xi[Ti]=null,Ti--)}function Ci(e,t){Ti++,xi[Ti]=e.current,e.current=t}var ki={},Ii=Si(ki),Ai=Si(!1),Ni=ki;function Ri(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(Ii)}function Di(e,t,n){if(Ii.current!==ki)throw Error(s(168));Ci(Ii,t),Ci(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ni=Ii.current,Ci(Ii,e),Ci(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ii),Ci(Ii,e)):Ei(Ai),Ci(Ai,n)}var ji=null,Ui=!1,Bi=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Bi&&null!==ji){Bi=!0;var e=0,t=_t;try{var n=ji;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,zi),i}finally{_t=t,Bi=!1}}return null}var Wi=[],qi=0,Hi=null,Ki=0,Gi=[],Yi=0,Qi=null,$i=1,Xi="";function Ji(e,t){Wi[qi++]=Ki,Wi[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Yi++]=$i,Gi[Yi++]=Xi,Gi[Yi++]=Qi,Qi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else $i=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null;for(;e===Qi;)Qi=Gi[--Yi],Gi[Yi]=null,Xi=Gi[--Yi],Gi[Yi]=null,$i=Gi[--Yi],Gi[Yi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===T?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===T&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===T){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===T?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=_s(!0),ws=_s(!1),xs=Si(null),Ts=null,Ss=null,Es=null;function Cs(){Es=Ss=Ts=null}function ks(e){var t=xs.current;Ei(xs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ts=e,Es=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Ts)throw Error(s(308));Ss=e,Ts.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=Si(qs),Ks=Si(qs),Gs=Si(qs);function Ys(e){if(e===qs)throw Error(s(174));return e}function Qs(e,t){switch(Ci(Gs,t),Ci(Ks,e),Ci(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Hs),Ci(Hs,t)}function $s(){Ei(Hs),Ei(Ks),Ei(Gs)}function Xs(e){Ys(Gs.current);var t=Ys(Hs.current),n=le(t,e.type);t!==n&&(Ci(Ks,e),Ci(Hs,n))}function Js(e){Ks.current===e&&(Ei(Hs),Ei(Ks))}var Zs=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function So(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Lo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,Co.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Ao(e)}function ko(e,t,n){return n((function(){Io(t)&&Ao(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return _o().memoizedState}function Oo(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Mo(e,t){return Oo(8390656,8,e,t)}function Lo(e,t){return Do(2048,8,e,t)}function Fo(e,t){return Do(4,2,e,t)}function jo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ho(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function Ko(){return _o().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))$o(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Xo(n,t,r)}}function Yo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Xo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Ns,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ns,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:No,useDebugValue:Vo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Ho.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Mo(ko.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Al.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:Wo,useReducer:wo,useRef:Po,useState:function(){return wo(bo)},useDebugValue:Vo,useDeferredValue:function(e){return qo(_o(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:Wo,useReducer:xo,useRef:Po,useState:function(){return xo(bo)},useDebugValue:Vo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Bs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Pi(t)?Ni:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Pi(t)?Ni:Ii.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,_a=!1;function ba(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||_a?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function xa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ca(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Pl),Pl|=r;return ba(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Pi(n)?Ni:Ii.current;return s=Ri(t,s),As(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||_a?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function ka(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(As(t,i),null===t.stateNode)Wa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Ri(t,c=Pi(n)?Ni:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ms=!1;var d=t.memoizedState;o.state=d,zs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ms?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ms||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Ri(t,l=Pi(n)?Ni:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ms=!1,d=t.memoizedState,o.state=d,zs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ms?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ms||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){Ea(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),qa(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Qs(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Pa,Oa,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Yi++]=$i,Gi[Yi++]=Xi,Gi[Yi++]=Qi,$i=e.id,Xi=e.overflow,Qi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ka(t),null;case 3:return r=t.stateNode,$s(),Ei(Ai),Ei(Ii),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:Js(t);var i=Ys(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Ys(Hs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Gs.current),Ys(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return $s(),Pa(e,t),null===e&&zr(t.stateNode.containerInfo),Ka(t),null;case 10:return ks(t.type._context),Ka(t),null;case 19:if(Ei(Zs),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Xe()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Ei(Ai),Ei(Ii),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return $s(),null;case 10:return ks(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ys(Hs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,$a=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,dl(e,t,n),$a=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,ml(t,e),$a=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ja=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Qa;var c=$a;if(Qa=o,($a=l)&&!c)for(Ja=i;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,Ja=l):xl(i);for(;null!==s;)Ja=s,_l(s,t,n),s=s.sibling;Ja=i,Qa=a,$a=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ws(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Tl,Sl=Math.ceil,El=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Il=0,Al=null,Nl=null,Rl=0,Pl=0,Ol=Si(0),Dl=0,Ml=null,Ll=0,Fl=0,jl=0,Ul=null,Bl=null,Vl=0,zl=1/0,Wl=null,ql=!1,Hl=null,Kl=null,Gl=!1,Yl=null,Ql=0,$l=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(Fl|=n),4===Dl&&ac(e,Rl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(zl=Xe()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Rl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),oi((function(){0===(6&Il)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var o=pc();for(Al===e&&Rl===t||(Wl=null,zl=Xe()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}Cs(),El.current=o,Il=i,null!==Nl?t=0:(Al=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,dc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ml,dc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Bl,Wl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bl,Wl),t);break}wc(e,Bl,Wl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bl,Wl),r);break}wc(e,Bl,Wl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function ac(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,dc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Wl),rc(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Xe()+500,Ui&&zi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&xc();var t=Il;Il|=1;var n=kl.transition,r=_t;try{if(kl.transition=null,_t=1,e)return e()}finally{_t=r,kl.transition=n,0===(6&(Il=t))&&zi()}}function hc(){Pl=Ol.current,Ei(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:$s(),Ei(Ai),Ei(Ii),no();break;case 5:Js(r);break;case 4:$s();break;case 13:case 19:Ei(Zs);break;case 10:ks(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Nl=e=Oc(e.current,null),Rl=Pl=t,Dl=0,Ml=null,jl=Fl=Ll=0,Bl=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Cs(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Cl.current=null,null===n||null===n.return){Dl=1,Ml=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,c,t));break e;case 1:l=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Jo,null===e?Jo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Al||0===(268435455&Ll)&&0===(268435455&Fl)||ac(Al,Rl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Al===e&&Rl===t||(Wl=null,dc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Cs(),Il=n,El.current=r,null!==Nl)throw Error(s(261));return Al=null,Rl=0,Dl}function vc(){for(;null!==Nl;)_c(Nl)}function yc(){for(;null!==Nl&&!Qe();)_c(Nl)}function _c(e){var t=Tl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Pl)))return void(Nl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=_t,i=kl.transition;try{kl.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Yl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Nl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kl.transition,kl.transition=null;var a=_t;_t=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),$e(),Il=l,_t=a,kl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Yl=e,Ql=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xl?$l++:($l=0,Xl=e):$l=0,zi()}(e,t,n,r)}finally{kl.transition=i,_t=r}return null}function xc(){if(null!==Yl){var e=bt(Ql),t=kl.transition,n=_t;try{if(kl.transition=null,_t=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(sl(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var _=e.current;for(Ja=_;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Sc(l,l.return,x)}if(l===a){Ja=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break e}Ja=l.return}}if(Il=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{_t=n,kl.transition=t}}return!1}function Tc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Xe()-Vl?dc(e,0):jl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case T:return Mc(n.children,i,o,t);case S:a=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case k:a=9;break e;case I:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Vc(e){if(!e)return ki;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=js(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nc(e,i,o,s),Bs(e,i,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:Xs(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=qa(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return qa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);As(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=xa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ea(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(xs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ns(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),xa(e,t,r,i=na(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Wa(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,As(t,n),oa(t,r,i),la(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=qc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return qc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Il)&&(zl=Xe()+500,zi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Ce,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},2074:(e,t,n)=>{"use strict";var r,i;n.d(t,{Kd:()=>f,N_:()=>g});var s=n(9950),o=n(7119),a=n(8429),l=n(1018);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const h=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(_){}new Map;const d=(r||(r=n.t(s,2))).startTransition;(i||(i=n.t(o,2))).flushSync,(r||(r=n.t(s,2))).useId;function f(e){let{basename:t,children:n,future:r,window:i}=e,o=s.useRef();null==o.current&&(o.current=(0,l.zR)({window:i,v5Compat:!0}));let c=o.current,[u,h]=s.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},p=s.useCallback((e=>{f&&d?d((()=>h(e))):h(e)}),[h,f]);return s.useLayoutEffect((()=>c.listen(p)),[c,p]),s.createElement(a.Ix,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const p="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g=s.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:d,state:f,target:g,to:v,preventScrollReset:y,unstable_viewTransition:b}=e,w=u(e,h),{basename:x}=s.useContext(a.jb),T=!1;if("string"===typeof v&&m.test(v)&&(n=v,p))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=(0,l.pb)(t.pathname,x);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:T=!0}catch(_){}let S=(0,a.$P)(v,{relative:i}),E=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,unstable_viewTransition:u}=void 0===t?{}:t,h=(0,a.Zp)(),d=(0,a.zy)(),f=(0,a.x$)(e,{relative:c});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:(0,l.AO)(d)===(0,l.AO)(f);h(e,{replace:n,state:i,preventScrollReset:o,relative:c,unstable_viewTransition:u})}}),[d,h,f,r,i,n,e,o,c,u])}(v,{replace:d,state:f,target:g,preventScrollReset:y,relative:i,unstable_viewTransition:b});return s.createElement("a",c({},w,{href:n||S,onClick:T||o?r:function(e){r&&r(e),e.defaultPrevented||E(e)},ref:t,target:g}))}));var v,y;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(v||(v={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(y||(y={}))},8429:(e,t,n)=>{"use strict";var r;n.d(t,{$P:()=>f,BV:()=>D,C5:()=>R,Ix:()=>O,Zp:()=>v,jb:()=>c,qh:()=>P,x$:()=>y,zy:()=>m});var i=n(9950),s=n(1018);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const a=i.createContext(null);const l=i.createContext(null);const c=i.createContext(null);const u=i.createContext(null);const h=i.createContext({outlet:null,matches:[],isDataRoute:!1});const d=i.createContext(null);function f(e,t){let{relative:n}=void 0===t?{}:t;p()||(0,s.Oi)(!1);let{basename:r,navigator:o}=i.useContext(c),{hash:a,pathname:l,search:u}=y(e,{relative:n}),h=l;return"/"!==r&&(h="/"===l?r:(0,s.HS)([r,l])),o.createHref({pathname:h,search:u,hash:a})}function p(){return null!=i.useContext(u)}function m(){return p()||(0,s.Oi)(!1),i.useContext(u).location}function g(e){i.useContext(c).static||i.useLayoutEffect(e)}function v(){let{isDataRoute:e}=i.useContext(h);return e?function(){let{router:e}=k(E.UseNavigateStable),t=A(C.UseNavigateStable),n=i.useRef(!1);return g((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,o({fromRouteId:t},i)))}),[e,t])}():function(){p()||(0,s.Oi)(!1);let e=i.useContext(a),{basename:t,future:n,navigator:r}=i.useContext(c),{matches:o}=i.useContext(h),{pathname:l}=m(),u=JSON.stringify((0,s.yD)(o,n.v7_relativeSplatPath)),d=i.useRef(!1);return g((()=>{d.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!d.current)return;if("number"===typeof n)return void r.go(n);let o=(0,s.Gh)(n,JSON.parse(u),l,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:(0,s.HS)([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)}),[t,r,u,l,e])}()}function y(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(c),{matches:o}=i.useContext(h),{pathname:a}=m(),l=JSON.stringify((0,s.yD)(o,r.v7_relativeSplatPath));return i.useMemo((()=>(0,s.Gh)(e,JSON.parse(l),a,"path"===n)),[e,l,a,n])}function _(e,t,n,r){p()||(0,s.Oi)(!1);let{navigator:a}=i.useContext(c),{matches:l}=i.useContext(h),d=l[l.length-1],f=d?d.params:{},g=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let v,y=m();if(t){var _;let e="string"===typeof t?(0,s.Rr)(t):t;"/"===g||(null==(_=e.pathname)?void 0:_.startsWith(g))||(0,s.Oi)(!1),v=e}else v=y;let b=v.pathname||"/",w=b;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=(0,s.ue)(e,{pathname:w});let T=S(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},f,e.params),pathname:(0,s.HS)([g,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,s.HS)([g,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,r);return t&&T?i.createElement(u.Provider,{value:{location:o({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:s.rc.Pop}},T):T}function b(){let e=function(){var e;let t=i.useContext(d),n=I(C.UseRouteError),r=A(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,s.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const w=i.createElement(b,null);class x extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(h.Provider,{value:this.props.routeContext},i.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(a);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(h.Provider,{value:t},r)}function S(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}let l=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||(0,s.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<l.length;i++){let e=l[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight(((e,r,s)=>{let o,a=!1,d=null,f=null;var p;n&&(o=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||w,u&&(h<0&&0===s?(p="route-fallback",!1||N[p]||(N[p]=!0),a=!0,f=null):h===s&&(a=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,s+1)),g=()=>{let t;return t=o?d:a?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(T,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(x,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var E=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(E||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function k(e){let t=i.useContext(a);return t||(0,s.Oi)(!1),t}function I(e){let t=i.useContext(l);return t||(0,s.Oi)(!1),t}function A(e){let t=function(){let e=i.useContext(h);return e||(0,s.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,s.Oi)(!1),n.route.id}const N={};(r||(r=n.t(i,2))).startTransition;function R(e){let{to:t,replace:n,state:r,relative:o}=e;p()||(0,s.Oi)(!1);let{future:a,static:l}=i.useContext(c),{matches:u}=i.useContext(h),{pathname:d}=m(),f=v(),g=(0,s.Gh)(t,(0,s.yD)(u,a.v7_relativeSplatPath),d,"path"===o),y=JSON.stringify(g);return i.useEffect((()=>f(JSON.parse(y),{replace:n,state:r,relative:o})),[f,y,o,n,r]),null}function P(e){(0,s.Oi)(!1)}function O(e){let{basename:t="/",children:n=null,location:r,navigationType:a=s.rc.Pop,navigator:l,static:h=!1,future:d}=e;p()&&(0,s.Oi)(!1);let f=t.replace(/^\/*/,"/"),m=i.useMemo((()=>({basename:f,navigator:l,static:h,future:o({v7_relativeSplatPath:!1},d)})),[f,d,l,h]);"string"===typeof r&&(r=(0,s.Rr)(r));let{pathname:g="/",search:v="",hash:y="",state:_=null,key:b="default"}=r,w=i.useMemo((()=>{let e=(0,s.pb)(g,f);return null==e?null:{location:{pathname:e,search:v,hash:y,state:_,key:b},navigationType:a}}),[f,g,v,y,_,b,a]);return null==w?null:i.createElement(c.Provider,{value:m},i.createElement(u.Provider,{children:n,value:w}))}function D(e){let{children:t,location:n}=e;return _(M(t),n)}new Promise((()=>{}));i.Component;function M(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,M(e.props.children,o));e.type!==P&&(0,s.Oi)(!1),e.props.index&&e.props.children&&(0,s.Oi)(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=M(e.props.children,o)),n.push(a)})),n}},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:T};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=T.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},9950:(e,t,n)=>{"use strict";e.exports=n(2049)},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(x);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,S=!1,E=null,C=-1,k=5,I=-1;function A(){return!(t.unstable_now()-I<k)}function N(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?T():(S=!1,E=null)}}else S=!1}if("function"===typeof _)T=function(){_(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,T=function(){P.postMessage(null)}}else T=function(){v(N,0)};function O(e){E=e,S||(S=!0,T())}function D(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},7238:()=>{},1677:()=>{},2758:()=>{},8488:()=>{},5321:()=>{},1712:()=>{},8744:()=>{},5511:()=>{},9847:()=>{},8674:()=>{},4790:()=>{},5474:()=>{},8852:()=>{},3791:()=>{},4427:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/games.3fcfa0240251724d20d3.mov"},7340:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/games.236b33b9e2d7aa7c71c0.mp4"},4853:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/notify.35b2f9f42107e2fee0a9.mp3"},7558:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/Lookxettarra.4e69bba1935141257fb6.png"},4437:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/ettarra_w_logo.a4213a78a27b7a81118a.png"},6880:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/landing.07a31927a07ee98e1e0b.png"},1223:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAACoCAYAAAA7M/FNAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAooSURBVHgB7d2xlty2Fcbxb6PKnfMG8BtInUu6c7kp09FvYL8BXbqKU7qaSZcueQNumU56A7JMF7mTK4fQLC2KO8PhcEACF/z/zrk69u5Kh4IIDHBBXD5IqrsoBABhHR+6X1wXb7v4UgAQzlevul/ed/GFmMUACOfHLv798Pw/fvbiZzFOAHCftos3Xbx/9fyFD1382sWjAOA+P3TxH/8fD6NvkPAFcI93Os1ePhoPMIVOgwwALPGVTkukj16Nvum/8ecuvhYA3ObYxT+GX3g480M+4duIbWsA87VdfKPB7MV7deYHfcL3ty6+FQDM4xO7T+MvPkz8BhK+AOZodcq9vPCnid/0owDguu8ufWNqgHnSKGEDACNHnVka9aaWSB4JXwBTPtuWHpuawXj+nNLfBQAv+TRKO/UD12YwPT+LcQKAk1YXErtD12Ywve8EAJ/M2gSaO8A8aSKRA2BXjs9x1dwlkudEYSoAVxK7Q3NnMHr+A0n4Avvmx4B27g/fMoPxKEwF7FerM+eNptwyg/H8tvUPArBHV7elx26dwfQ4pwTsS6sZ29Jjt85gepxTAvblGy3wSsu0ojAVsBdHLTyXuHSJ5HFOCchfqxsTu0NLl0ieT/iyVALydtO29Ng9M5geCV8gT60WJHaH7pnB9JjFAHm6+5GUpUneoVanUe61AOTi2MVPulOIJZLnxDklICezzxtNCTGD8XzC9wuRiwFy8PHF9Qog1AzG45wSYF+rOxO7QyGSvD0/i6EwFWBb0E2bkDOYHtvWgE1+WfQXBbTGAONEwhewKEhidyjkEqnXisJUgDV3PbF7yRozGI+EL2BHqzvOG00JtU099qGLX7t4FIDUnX1xfQhrzWB6JHyBtLUKuC09tkYOZohzSkDaFhWSmmutJVKvFYWpgFQdtbCQ1FxrL5E8ClMB6Wm1UmJ3aO0lkkdhKiA9q2xLj20xg+n5bWtKOgDxtVoxsTu0xQymx/uUgDRs1he3HGCeFOgIOIDFjtqwH265RPKcOKcExBT8vNGUtbepxyhMBcQTrJDUXFvPYDzOKQHba7VRYndoyxxMj8JUwPaiPCoSYwbT45wSsI0nrXwk4JKYA4zT6QlfAOvaNLE7tHWSd8gvlfwAVwjAWo5a+bzRlJgzGI9zSsB6Wm1w3mhKjCTvkJ/F8IQvsA6f2G0VUewZTI+ELxBWqwjb0mOxZzA9TlsDYQV9/chSMZO8Q60oTAWEcuziFyUglSWSR8IXuJ/Pa75R5NxLL5UlkkdhKuB+mxSSmiulGUyPwlTAMq0SSOwOpTSD6bFtDSyT3AogxQHmSRSmAm51fI6kpLhE8pwoTAXcItp5oympbFOPUZgKmG/zQlJzpTqD8ShMBVzX6rQt/V4JSjEH06MwFXCdn70kObh4Kc9gepxTAs57p9PsJVkWBhgnClMB5ySZ2B1KNck7RGEq4KWjIhaSmsvCDMbjnBLwSavIhaTmsjCD8T508VsX3wqAf9r9SQZYmcH0SPhi71oldt5oSsrb1Odw2jqMd4JVSRSSmsvaAPOk03F0LPOk09r9jYxMsfGZo/hwWJ1P9P6vi9+J2eHb63HUjk60o7V/QydjrCR5h0j43u6venlWhfNetvwkg1UGrCV5hxpxTmkuX+/43OPknPeyoZWhxO6QtRzMEOeU5rtUIZD3UtnA5kYktWyto2NFLdrRahyEaJxIVM6NQpe9Tug6ic/DyTDLSySvFdvWcx0mvue3PmnH9ER/9Ss+nVOy8GkUO77XdDsyG0wnGpF8T4Z/xsPKjRMz/AAydWC0TOQ6idO/BRJSy9YNFCsOoh1Tj0ZIDonK+VHosiKh69xrOGXC4pO8l/xXpwfKvhaucbpcrKgV7RjTUQYKSe0Vicr5QcI3vWhEYjd5vuNYuaFixrWEL+24fUwN+khILVs3Vqz4m2jHVKIRzChk6+aKGYVoxxTiUTDlKFs3WKyoNe3nRK4z5zgI5pConB+laMeY4ZSpnLapx3xhKgoqzVN08YtObTZGga91JfvieszTyNanWayoNO1tIteZUzSCeYVs3XSx4lrN1yKBa8wtSiELtWzdeLGi1rRjAteYS/xLyIYTicq5UYh23CKcdiDnJO8QFfTnc7p8FoZ2DMMX9/qnkBUKU82PUtOaBK7RajTivFG2Stm6GWN2gqlzSkUi12kxSiFrtWzdkLHi2sG7OpHrtBSNkL1Ctm7KWFFrmhMJ31vDaWesv1VgiSdRQX+O11e+34p2vMVRvCFgNzhfMy/mtGMT+RotRKOdJnb3OIPx/HYrr+O8n29HXuF7nZ/ptcLucL7mctSar450jRaiEXarkK2bdctwms//LEvO81EKu+bPhFi6YbeIg25XbXRtubcjMuPEp+8wGi1LSJLwfRlOgPj0HUap5YoVr8taVAKe8el7ikb3q7XuNe6lHZGZQrZu4jUiRGV7p3Wv0UKUAs6oZetGDhkHhVNJm1xzivFWwAVOtm7mkOEUzp6XnE7AhEq2bugQUSm8R2mz608lDgKu2Ns5pUbrqaVN/g6ptKMTMEMpWzf3PVFqPa8l/b6TKAXcoJatG3xJbFHZfg+vnm0E3KiQrZt8STitbw9Lzmu1c4Czcv70rbSdUrbbaioOAhbK9dO30fYJyVq22+xcXHsbJnCVL35t6aafE6W2V8hmW01FJSCARrZu/KmI+aRpTkvORkAghWzd/FPhFE9OS85SQEC1bHWAc3FQfDksOQ8CAnOy/enbKJ2EZC1bbTcOJ2AFlWx1hGGUSkchW203jErASqyeEm6UHosJ30bT7+wG7mbxlLBTeiwmfEsBG6hlp1MclC5LCV8KSWEzVk4JN0o/IVnLRls6ARuykEMolb5C6bfjQcDGUs8hNLLjqLTb0QmIIOUcgqUSAikP1qWAiGql1ykOsifFwboREFmh9DqFk01+pyaltiwEJOCodDrF97KrUDrteBCQiFRyCI3sOyqNAcYJSEil+J0ih9qwKQzWlYAENYrXKQ7KR6V47dgISFSheJ3CKS/+7xSjLUsBCau1faewnNi9pND27bjFe6KAuzhtm0NolC/f4bccYJwAAypt1ylyfumX03aD9c8CjNiqMNVB+au0fjs2YvYCY0qt2yn28tKvLQbrUoBBtdbrFJX2o9B67dgIMKoQnSKUWuu0pRNg2BqFqR61P07hE74HAcaFfvR9z52iUrh2bMTsBZkIVetkL4ndS0ImfHN8OBE7FqLWSSUUCjN7AbJSiE4RSq372nKPOSzswD2Pvuf8xO6tnJbntQ4CMuW0rGPQKV6qtGyAcQIyVun2pZETxpYkfCsBmbu1Y7DbcVmh2wZqYBcK0SlCqTWvLUsBOzKnY5DYvc7pejtSSAq740RiN5RKJHaBFyqR2A1hKq9FISns1qVzSiR2b+cfnmOgBkZKkdgNpRaJXeCFYccgsbucbzsGamCk0GmpVAj36uvvOAH4w5dCCL4dSewm4v/aqg+Gy9TV9wAAAABJRU5ErkJggg=="},8984:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(9061),i=n(7253),s=n(913),o=n(4624);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.uA("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s._DEFAULT_ENTRY_NAME;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},c=new r.FA("app-compat","Firebase",l);const u=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=s.initializeApp(i,o);if((0,r.gR)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw c.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.zw)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(){const e=this._getService.bind(this,o);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!(0,r.gR)(t,e))throw c.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.zw)(t,e)},createSubscribe:r.tD,ErrorFactory:r.FA,deepExtend:r.zw}),t}(),h=new o.Vy("@firebase/app-compat");if((0,r.Bd)()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const d=u;var f;(0,s.registerVersion)("@firebase/app-compat","0.2.37",f)},913:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>s.g,SDK_VERSION:()=>me,_DEFAULT_ENTRY_NAME:()=>J,_addComponent:()=>re,_addOrOverwriteComponent:()=>ie,_apps:()=>ee,_clearComponents:()=>ue,_components:()=>ne,_getProvider:()=>oe,_isFirebaseApp:()=>le,_isFirebaseServerApp:()=>ce,_registerComponent:()=>se,_removeServiceInstance:()=>ae,_serverApps:()=>te,deleteApp:()=>be,getApp:()=>ye,getApps:()=>_e,initializeApp:()=>ge,initializeServerApp:()=>ve,onLog:()=>xe,registerVersion:()=>we,setLogLevel:()=>Te});var r=n(7253),i=n(4624),s=n(9061);const o=(e,t)=>t.some((t=>e instanceof t));let a,l;const c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(y(this),t,...r);return h.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));u.set(e,t)}(e),o(e,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,p):e)}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(v(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&c.set(t,e)})).catch((()=>{})),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const _=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return w.set(t,s),s}p=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(p);class T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",E="0.10.7",C=new i.Vy("@firebase/app"),k="@firebase/app-compat",I="@firebase/analytics-compat",A="@firebase/analytics",N="@firebase/app-check-compat",R="@firebase/app-check",P="@firebase/auth",O="@firebase/auth-compat",D="@firebase/database",M="@firebase/database-compat",L="@firebase/functions",F="@firebase/functions-compat",j="@firebase/installations",U="@firebase/installations-compat",B="@firebase/messaging",V="@firebase/messaging-compat",z="@firebase/performance",W="@firebase/performance-compat",q="@firebase/remote-config",H="@firebase/remote-config-compat",K="@firebase/storage",G="@firebase/storage-compat",Y="@firebase/firestore",Q="@firebase/vertexai-preview",$="@firebase/firestore-compat",X="firebase",J="[DEFAULT]",Z={[S]:"fire-core",[k]:"fire-core-compat",[A]:"fire-analytics",[I]:"fire-analytics-compat",[R]:"fire-app-check",[N]:"fire-app-check-compat",[P]:"fire-auth",[O]:"fire-auth-compat",[D]:"fire-rtdb",[M]:"fire-rtdb-compat",[L]:"fire-fn",[F]:"fire-fn-compat",[j]:"fire-iid",[U]:"fire-iid-compat",[B]:"fire-fcm",[V]:"fire-fcm-compat",[z]:"fire-perf",[W]:"fire-perf-compat",[q]:"fire-rc",[H]:"fire-rc-compat",[K]:"fire-gcs",[G]:"fire-gcs-compat",[Y]:"fire-fst",[$]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},ee=new Map,te=new Map,ne=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){C.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e,t){e.container.addOrOverwriteComponent(t)}function se(e){const t=e.name;if(ne.has(t))return C.debug("There were multiple attempts to register component ".concat(t,".")),!1;ne.set(t,e);for(const n of ee.values())re(n,e);for(const n of te.values())re(n,e);return!0}function oe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ae(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J;oe(e,t).clearInstance(n)}function le(e){return void 0!==e.options}function ce(e){return void 0!==e.settings}function ue(){ne.clear()}const he={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},de=new s.FA("app","Firebase",he);class fe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw de.create("app-deleted",{appName:this._name})}}class pe extends fe{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,we(S,E,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){be(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw de.create("server-app-deleted")}}const me="10.12.4";function ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:J,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!==typeof o||!o)throw de.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw de.create("no-options");const a=ee.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw de.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of ne.values())l.addComponent(r);const c=new fe(n,i,l);return ee.set(o,c),c}function ve(e,t){if((0,s.Bd)()&&!(0,s.p7)())throw de.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=le(e)?e.options:e;const i=Object.assign(Object.assign({},t),n);void 0!==i.releaseOnDeref&&delete i.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw de.create("finalization-registry-not-supported",{});const o=""+(a=JSON.stringify(i),[...a].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var a;const l=te.get(o);if(l)return l.incRefCount(t.releaseOnDeref),l;const c=new r.h1(o);for(const r of ne.values())c.addComponent(r);const u=new pe(n,t,o,c);return te.set(o,u),u}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;const t=ee.get(e);if(!t&&e===J&&(0,s.T9)())return ge();if(!t)throw de.create("no-app",{appName:e});return t}function _e(){return Array.from(ee.values())}async function be(e){let t=!1;const n=e.name;if(ee.has(n))t=!0,ee.delete(n);else if(te.has(n)){e.decRefCount()<=0&&(te.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function we(e,t,n){var i;let s=null!==(i=Z[e])&&void 0!==i?i:e;n&&(s+="-".concat(n));const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void C.warn(e.join(" "))}se(new r.uA("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}function xe(e,t){if(null!==e&&"function"!==typeof e)throw de.create("invalid-log-argument");(0,i.Ey)(e,t)}function Te(e){(0,i.He)(e)}const Se="firebase-heartbeat-database",Ee=1,Ce="firebase-heartbeat-store";let ke=null;function Ie(){return ke||(ke=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=v(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(v(o.result),e.oldVersion,e.newVersion,v(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Se,Ee,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ce)}catch(n){console.warn(n)}}}).catch((e=>{throw de.create("idb-open",{originalErrorMessage:e.message})}))),ke}async function Ae(e,t){try{const n=(await Ie()).transaction(Ce,"readwrite"),r=n.objectStore(Ce);await r.put(t,Ne(e)),await n.done}catch(n){if(n instanceof s.g)C.warn(n.message);else{const e=de.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});C.warn(e.message)}}}function Ne(e){return"".concat(e.name,"!").concat(e.options.appId)}class Re{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Oe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pe();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Pe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),De(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),De(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Pe(){return(new Date).toISOString().substring(0,10)}class Oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ie()).transaction(Ce),n=await t.objectStore(Ce).get(Ne(e));return await t.done,n}catch(t){if(t instanceof s.g)C.warn(t.message);else{const e=de.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});C.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ae(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ae(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function De(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Me;Me="",se(new r.uA("platform-logger",(e=>new T(e)),"PRIVATE")),se(new r.uA("heartbeat",(e=>new Re(e)),"PRIVATE")),we(S,E,Me),we(S,E,"esm2017"),we("fire-js","")},7253:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>o,h1:()=>a,uA:()=>i});var r=n(9061);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},4624:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Ey:()=>h,He:()=>u,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}function u(e){r.forEach((t=>{t.setLogLevel(e)}))}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];const l=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:l,args:o,type:t.name})}}}},3842:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e+.5|0}n.d(t,{Bs:()=>Wi,A6:()=>nr,E8:()=>as,PP:()=>Rs,t1:()=>Fi,ju:()=>ir,s$:()=>hs,ZT:()=>sr,No:()=>Ji,kc:()=>Ms,FN:()=>es,hE:()=>fs,m_:()=>Is});const a=(e,t,n)=>Math.max(Math.min(e,n),t);function l(e){return a(o(2.55*e),0,255)}function c(e){return a(o(255*e),0,255)}function u(e){return a(o(e/2.55)/100,0,1)}function h(e){return a(o(100*e),0,100)}const d={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},f=[..."0123456789ABCDEF"],p=e=>f[15&e],m=e=>f[(240&e)>>4]+f[15&e],g=e=>(240&e)>>4===(15&e);function v(e){var t=(e=>g(e.r)&&g(e.g)&&g(e.b)&&g(e.a))(e)?p:m;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const y=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function b(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function w(e,t,n){const r=_(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function x(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function T(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(c)}function S(e,t,n){return T(_,e,t,n)}function E(e){return(e%360+360)%360}function C(e){const t=y.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?l(+t[5]):c(+t[5]));const i=E(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return T(w,e,t,n)}(i,s,o):"hsv"===t[1]?function(e,t,n){return T(b,e,t,n)}(i,s,o):S(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const k={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},I={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let A;function N(e){A||(A=function(){const e={},t=Object.keys(I),n=Object.keys(k);let r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,k[s]);s=parseInt(I[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),A.transparent=[0,0,0,0]);const t=A[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const R=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const P=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,O=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function D(e,t,n){if(e){let r=x(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=S(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function M(e,t){return e?Object.assign(t||{},e):e}function L(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=c(e[3]))):(t=M(e,{r:0,g:0,b:0,a:1})).a=c(t.a),t}function F(e){return"r"===e.charAt(0)?function(e){const t=R.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?l(e):a(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?l(n):a(n,0,255)),r=255&(t[4]?l(r):a(r,0,255)),i=255&(t[6]?l(i):a(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):C(e)}class j{constructor(e){if(e instanceof j)return e;const t=typeof e;let n;"object"===t?n=L(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*d[e[1]],g:255&17*d[e[2]],b:255&17*d[e[3]],a:5===n?17*d[e[4]]:255}:7!==n&&9!==n||(t={r:d[e[1]]<<4|d[e[2]],g:d[e[3]]<<4|d[e[4]],b:d[e[5]]<<4|d[e[6]],a:9===n?d[e[7]]<<4|d[e[8]]:255})),t}(e)||N(e)||F(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=M(this._rgb);return e&&(e.a=u(e.a)),e}set rgb(e){this._rgb=L(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(u(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?v(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=x(e),n=t[0],r=h(t[1]),i=h(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(u(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=O(u(e.r)),i=O(u(e.g)),s=O(u(e.b));return{r:c(P(r+n*(O(u(t.r))-r))),g:c(P(i+n*(O(u(t.g))-i))),b:c(P(s+n*(O(u(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new j(this.rgb)}alpha(e){return this._rgb.a=c(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=o(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return D(this._rgb,2,e),this}darken(e){return D(this._rgb,2,-e),this}saturate(e){return D(this._rgb,1,e),this}desaturate(e){return D(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=x(e);n[0]=E(n[0]+t),n=S(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function U(){}const B=(()=>{let e=0;return()=>e++})();function V(e){return null===e||void 0===e}function z(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function W(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function q(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function H(e,t){return q(e)?e:t}function K(e,t){return"undefined"===typeof e?t:e}const G=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Y(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Q(e,t,n,r){let i,s,o;if(z(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(W(e))for(o=Object.keys(e),s=o.length,i=0;i<s;i++)t.call(n,e[o[i]],o[i])}function $(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function X(e){if(z(e))return e.map(X);if(W(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=X(e[n[i]]);return t}return e}function J(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Z(e,t,n,r){if(!J(e))return;const i=t[e],s=n[e];W(i)&&W(s)?ee(i,s,r):t[e]=X(s)}function ee(e,t,n){const r=z(t)?t:[t],i=r.length;if(!W(e))return e;const s=(n=n||{}).merger||Z;let o;for(let a=0;a<i;++a){if(o=r[a],!W(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)s(t[r],e,o,n)}return e}function te(e,t){return ee(e,t,{merger:ne})}function ne(e,t,n){if(!J(e))return;const r=t[e],i=n[e];W(r)&&W(i)?te(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=X(i))}const re={"":e=>e,x:e=>e.x,y:e=>e.y};function ie(e,t){const n=re[t]||(re[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function se(e){return e.charAt(0).toUpperCase()+e.slice(1)}const oe=e=>"undefined"!==typeof e,ae=e=>"function"===typeof e,le=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const ce=Math.PI,ue=2*ce,he=ue+ce,de=Number.POSITIVE_INFINITY,fe=ce/180,pe=ce/2,me=ce/4,ge=2*ce/3,ve=Math.log10,ye=Math.sign;function _e(e,t,n){return Math.abs(e-t)<n}function be(e){const t=Math.round(e);e=_e(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(ve(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function we(e){return!isNaN(parseFloat(e))&&isFinite(e)}function xe(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Te(e){return e*(ce/180)}function Se(e){return e*(180/ce)}function Ee(e){if(!q(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Ce(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ce&&(s+=ue),{angle:s,distance:i}}function ke(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ie(e,t){return(e-t+he)%ue-ce}function Ae(e){return(e%ue+ue)%ue}function Ne(e,t,n,r){const i=Ae(e),s=Ae(t),o=Ae(n),a=Ae(s-i),l=Ae(o-i),c=Ae(i-s),u=Ae(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Re(e,t,n){return Math.max(t,Math.min(n,e))}function Pe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Oe(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const De=(e,t,n,r)=>Oe(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),Me=(e,t,n)=>Oe(e,n,(r=>e[r][t]>=n));const Le=["push","pop","shift","splice","unshift"];function Fe(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(Le.forEach((t=>{delete e[t]})),delete e._chartjs)}function je(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Ue="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Be(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n=s,r||(r=!0,Ue.call(window,(()=>{r=!1,e.apply(t,n)})))}}const Ve=e=>"start"===e?"left":"end"===e?"right":"center",ze=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function We(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=Re(Math.min(De(a,l,c).lo,n?r:De(t,l,o.getPixelForValue(c)).lo),0,r-1)),s=d?Re(Math.max(De(a,o.axis,u,!0).hi+1,n?0:De(t,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function qe(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const He=e=>0===e||1===e,Ke=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ue/n),Ge=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ue/n)+1,Ye={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*pe),easeOutSine:e=>Math.sin(e*pe),easeInOutSine:e=>-.5*(Math.cos(ce*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>He(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>He(e)?e:Ke(e,.075,.3),easeOutElastic:e=>He(e)?e:Ge(e,.075,.3),easeInOutElastic(e){const t=.1125;return He(e)?e:e<.5?.5*Ke(2*e,t,.45):.5+.5*Ge(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Ye.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Ye.easeInBounce(2*e):.5*Ye.easeOutBounce(2*e-1)+.5};function Qe(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function $e(e){return Qe(e)?e:new j(e)}function Xe(e){return Qe(e)?e:new j(e).saturate(.5).darken(.1).hexString()}const Je=["x","y","borderWidth","radius","tension"],Ze=["color","borderColor","backgroundColor"];const et=new Map;function tt(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=et.get(n);return r||(r=new Intl.NumberFormat(e,t),et.set(n,r)),r}(t,n).format(e)}const nt={values:e=>z(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=ve(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),tt(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(ve(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?nt.numeric.call(this,e,t,n):""}};var rt={formatters:nt};const it=Object.create(null),st=Object.create(null);function ot(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function at(e,t,n){return"string"===typeof t?ee(ot(e,t),n):ee(ot(e,""),t)}class lt{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Xe(t.backgroundColor),this.hoverBorderColor=(e,t)=>Xe(t.borderColor),this.hoverColor=(e,t)=>Xe(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return at(this,e,t)}get(e){return ot(this,e)}describe(e,t){return at(st,e,t)}override(e,t){return at(it,e,t)}route(e,t,n,r){const i=ot(this,e),s=ot(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[r];return W(e)?Object.assign({},t,e):K(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var ct=new lt({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ze},numbers:{type:"number",properties:Je}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ut(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function ht(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||z(h)){if(z(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||z(d)||(o=ut(e,i,s,o,d))}else o=ut(e,i,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function dt(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function ft(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function pt(e,t,n,r){mt(e,t,n,r,null)}function mt(e,t,n,r,i){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*fe;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,ue):e.arc(n,r,m,0,ue),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=ge,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=ge,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,o=Math.cos(g+me)*l,h=Math.cos(g+me)*(i?i/2-c:l),a=Math.sin(g+me)*l,d=Math.sin(g+me)*(i?i/2-c:l),e.arc(n-h,r-a,c,g-ce,g-pe),e.arc(n+d,r-o,c,g-pe,g),e.arc(n+h,r+a,c,g,g+pe),e.arc(n-d,r+o,c,g+pe,g+ce),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=me;case"rectRot":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-a),e.lineTo(n+d,r-o),e.lineTo(n+h,r+a),e.lineTo(n-d,r+o),e.closePath();break;case"crossRot":g+=me;case"cross":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"star":h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o),g+=me,h=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+d,r-o),e.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-o,r-a),e.lineTo(n+o,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function gt(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function vt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function yt(e){e.restore()}function _t(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function bt(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function wt(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function xt(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Tt(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=z(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),V(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&xt(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),V(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),wt(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function St(e,t){const{x:n,y:r,w:i,h:s,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ce,ce,!0),e.lineTo(n,r+s-o.bottomLeft),e.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ce,pe,!0),e.lineTo(n+i-o.bottomRight,r+s),e.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,pe,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-pe,!0),e.lineTo(n+o.topLeft,r)}const Et=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ct=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kt(e,t){const n=(""+e).match(Et);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const It=e=>+e||0;function At(e,t){const n={},r=W(t),i=r?Object.keys(t):t,s=W(e)?r?n=>K(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=It(s(o));return n}function Nt(e){return At(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Rt(e){return At(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Pt(e){const t=Nt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ot(e,t){e=e||{},t=t||ct.font;let n=K(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=K(e.style,t.style);r&&!(""+r).match(Ct)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:K(e.family,t.family),lineHeight:kt(K(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:K(e.weight,t.weight),string:""};return i.string=function(e){return!e||V(e.size)||V(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function Dt(e,t,n,r){let i,s,o,a=!0;for(i=0,s=e.length;i<s;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&z(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function Mt(e,t){return Object.assign(Object.create(e),t)}function Lt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Gt("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>Lt([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>Vt(n,r,(()=>function(e,t,n,r){let i;for(const s of t)if(i=Gt(Ut(s,e),n),"undefined"!==typeof i)return Bt(e,i)?Ht(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Yt(e).includes(t),ownKeys:e=>Yt(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function Ft(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:jt(e,r),setContext:t=>Ft(e,t,n,r),override:i=>Ft(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Vt(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=e;let a=r[t];ae(a)&&o.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);a.delete(e),Bt(e,l)&&(l=Ht(i._scopes,i,e,l));return l}(t,a,e,n));z(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(W(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Ht(r,i,e,l);t.push(Ft(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));Bt(t,a)&&(a=Ft(a,i,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function jt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ae(n)?n:()=>n,isIndexable:ae(r)?r:()=>r}}const Ut=(e,t)=>e?e+se(t):t,Bt=(e,t)=>W(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Vt(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function zt(e,t,n){return ae(e)?e(t,n):e}const Wt=(e,t)=>!0===e?t:"string"===typeof e?ie(t,e):void 0;function qt(e,t,n,r,i){for(const s of t){const t=Wt(n,s);if(t){e.add(t);const s=zt(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function Ht(e,t,n,r){const i=t._rootScopes,s=zt(t._fallback,n,r),o=[...e,...i],a=new Set;a.add(r);let l=Kt(a,o,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=Kt(a,o,s,l,r),null!==l))&&Lt(Array.from(a),[""],i,s,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(z(i)&&W(n))return n;return i||{}}(t,n,r))))}function Kt(e,t,n,r,i){for(;n;)n=qt(e,t,n,r,i);return n}function Gt(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Yt(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Qt(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={r:i.parse(ie(u,s),c)};return o}const $t=Number.EPSILON||1e-14,Xt=(e,t)=>t<e.length&&!e[t].skip&&e[t],Jt=e=>"x"===e?"y":"x";function Zt(e,t,n,r){const i=e.skip?t:e,s=t,o=n.skip?t:n,a=ke(s,i),l=ke(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function en(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Jt(t),r=e.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Xt(e,0);for(o=0;o<r;++o)if(a=l,l=c,c=Xt(e,o+1),l){if(c){const e=c[t]-l[t];i[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?ye(i[o-1])!==ye(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,s,o,a,l,c=Xt(e,0);for(let u=0;u<r-1;++u)l=c,c=Xt(e,u+1),l&&c&&(_e(t[u],0,$t)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=s*o*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Jt(n),i=e.length;let s,o,a,l=Xt(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Xt(e,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a["cp1".concat(n)]=i-s,a["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,a["cp2".concat(n)]=i+s,a["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function tn(e,t,n){return Math.max(Math.min(e,n),t)}function nn(e,t,n,r,i){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)en(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=Zt(n,a,e[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,s,o,a=gt(e[0],t);for(n=0,r=e.length;n<r;++n)o=s,s=a,a=n<r-1&&gt(e[n+1],t),s&&(i=e[n],o&&(i.cp1x=tn(i.cp1x,t.left,t.right),i.cp1y=tn(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=tn(i.cp2x,t.left,t.right),i.cp2y=tn(i.cp2y,t.top,t.bottom)))}(e,n)}function rn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function sn(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function on(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const an=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const ln=["top","right","bottom","left"];function cn(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=ln[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const un=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function hn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=an(n),s="border-box"===i.boxSizing,o=cn(i,"padding"),a=cn(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(un(i,s,e.target))o=i,a=s;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const dn=e=>Math.round(10*e)/10;function fn(e,t,n,r){const i=an(e),s=cn(i,"margin"),o=on(i.maxWidth,e,"clientWidth")||de,a=on(i.maxHeight,e,"clientHeight")||de,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&sn(e);if(s){const e=s.getBoundingClientRect(),o=an(s),a=cn(o,"border","width"),l=cn(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=on(o.maxWidth,s,"clientWidth"),i=on(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||de,maxHeight:i||de}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=cn(i,"border","width"),t=cn(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=dn(Math.min(c,o,l.maxWidth)),u=dn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=dn(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=dn(Math.floor(u*r))),{width:c,height:u}}function pn(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const mn=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};rn()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function gn(e,t){const n=function(e,t){return an(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function vn(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function yn(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function _n(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=vn(e,i,n),a=vn(i,s,n),l=vn(s,t,n),c=vn(o,a,n),u=vn(a,l,n);return vn(c,u,n)}function bn(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function wn(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function xn(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Tn(e){return"angle"===e?{between:Ne,compare:Ie,normalize:Ae}:{between:Pe,compare:(e,t)=>e-t,normalize:e=>e}}function Sn(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function En(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=Tn(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=Tn(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,y=!1,_=null;const b=()=>y||l(i,v,m)&&0!==a(i,v),w=()=>!y||0===a(s,m)||l(s,v,m);for(let x=u,T=u;x<=h;++x)g=t[x%o],g.skip||(m=c(g[r]),m!==v&&(y=l(m,i,s),null===_&&b()&&(_=0===a(m,i)?x:T),null!==_&&w()&&(p.push(Sn({start:_,end:x,loop:d,count:o,style:f})),_=null),T=x,v=m));return null!==_&&p.push(Sn({start:_,end:h,loop:d,count:o,style:f})),p}function Cn(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=En(r[i],e.points,t);s.length&&n.push(...s)}return n}function kn(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=In(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=In(r.setContext(Mt(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),An(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function In(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function An(e,t){if(!t)return!1;const n=[],r=function(e,t){return Qe(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class Nn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Ue.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Rn=new Nn;const Pn="transparent",On={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=$e(e||Pn),i=r.valid&&$e(t||Pn);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Dn{constructor(e,t,n,r){const i=t[n];r=Dt([e.to,r,i,e.from]);const s=Dt([e.from,i,r]);this._active=!0,this._fn=e.fn||On[e.type||typeof s],this._easing=Ye[e.easing]||Ye.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Dt([e.to,t,r,e.from]),this._from=Dt([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Mn{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!W(e))return;const t=Object.keys(ct.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!W(i))return;const s={};for(const e of t)s[e]=i[e];(z(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(i[l]=u=new Dn(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Rn.add(this._chart,n),!0):void 0}}function Ln(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function Fn(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function jn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=e.values[l],q(c)&&(s||0===t||ye(t)===ye(c))&&(t+=c)}return u||r.all?t:0}function Un(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Bn(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Vn(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function zn(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=Bn(i,u,n),d[a]=s,d._top=Vn(d,o,!0,r.type),d._bottom=Vn(d,o,!1,r.type);(d._visualValues||(d._visualValues={}))[a]=s}}function Wn(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function qn(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const Hn=e=>"reset"===e||"none"===e,Kn=(e,t)=>t?e:Object.assign({},e);class Gn{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Un(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&qn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=K(n.xAxisID,Wn(e,"x")),s=t.yAxisID=K(n.yAxisID,Wn(e,"y")),o=t.rAxisID=K(n.rAxisID,Wn(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,s,o),c=t.vAxisID=r(a,s,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Fe(this._data,this),e._stacked&&qn(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(W(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){Fe(n,this);const e=this._cachedMeta;qn(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Le.forEach((e=>{const t="_onData"+se(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const o=n.apply(this,i);return r._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...i)})),o}})})))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=Un(t.vScale,t),t.stack!==n.stack&&(r=!0,qn(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(zn(this,t._parsed),t._stacked=Un(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=z(r[e])?this.parseArrayData(n,r,e,t):W(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&zn(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:c||i.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(ie(d,o),h),y:s.parse(ie(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return jn({keys:Fn(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,s=jn(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Fn(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=r[h];const t=d[o.axis];return!q(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],q(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return W(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(K(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=Ln(e,n),i=Ln(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,a),c=o;c<o+a;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return Mt(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return Mt(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,o=i[s],a=this.enableOptionSharing&&oe(n);if(o)return Kn(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(ct.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(Kn(f,a))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(e,n,t))}const l=new Mn(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Hn(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){Hn(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Hn(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&qn(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Yn(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=je(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(oe(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return a}function Qn(e,t,n,r){return z(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function $n(e,t,n,r){const i=e.iScale,s=e.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(Qn(d,h,s,c));return l}function Xn(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Jn(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[Zn(u,o,a,l)]=!0,i=c)),s[Zn(i,o,a,l)]=!0,e.borderSkipped=s}function Zn(e,t,n,r){var i,s,o;return r?(o=n,e=er(e=(i=e)===(s=t)?o:i===o?s:i,n,t)):e=er(e,t,n),e}function er(e,t,n){return"start"===e?t:"end"===e?n:e}function tr(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}s(Gn,"defaults",{}),s(Gn,"datasetElementType",null),s(Gn,"dataElementType",null);class nr extends Gn{parsePrimitiveData(e,t,n,r){return $n(e,t,n,r)}parseArrayData(e,t,n,r){return $n(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(ie(p,l),h),u.push(Qn(ie(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,o=Xn(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||V(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||Xn(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const g=m.options||e[d].options;Jn(m,g,p,s),tr(m,g,c.ratio),this.updateElement(e[d],d,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===a)),r=t&&t[e.vScale.axis];if(V(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||Yn(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(e),l=a._custom,c=Xn(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&ye(d)!==ye(l.barEnd)&&(f=0),f+=d);const m=V(i)||c?f:i;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,h=u-g,Math.abs(h)<s){h=function(e,t,n){return 0!==e?ye(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(g-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+h,n&&!c&&(a._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(o)){const e=ye(h)*t.getLineWidthForValue(o)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=K(r.maxBarThickness,1/0);let o,a;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let s,o;return V(i)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:t.pixels[e]-s/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}s(nr,"id","bar"),s(nr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),s(nr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class rr extends Gn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=K(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=K(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=K(n&&n._custom,i),r}}s(rr,"id","bubble"),s(rr,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),s(rr,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class ir extends Gn{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=e=>+n[e];if(W(n[e])){const{key:e="value"}=this._parsing;o=t=>+ie(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return Te(this.options.rotation-90)}_getCircumference(){return Te(this.options.circumference)}_getRotationExtents(){let e=ue,t=-ue;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,s=0,o=0;if(t<ue){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>Ne(e,a,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>Ne(e,a,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,h),g=f(pe,u,d),v=p(ce,c,h),y=p(ce+pe,u,d);r=(m-v)/2,i=(g-y)/2,s=-(m+v)/2,o=-(g+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(d,h,a),v=(n.width-s)/f,y=(n.height-s)/p,_=Math.max(Math.min(v,y)/2,0),b=G(this.options.radius,_),w=(b-Math.max(b*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,r.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ue)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ue*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=tt(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,o,a;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,o=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(K(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}s(ir,"id","doughnut"),s(ir,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),s(ir,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),s(ir,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class sr extends Gn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=We(t,r,s);this._drawStart=o,this._drawCount=a,qe(t)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,o,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,m=we(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,y=e.length;let _=t>0&&this.getParsed(t-1);for(let b=0;b<y;++b){const n=e[b],f=g?n:{};if(b<t||b>=v){f.skip=!0;continue}const y=this.getParsed(b),w=V(y[d]),x=f[h]=s.getPixelForValue(y[h],b),T=f[d]=i||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,y,a):y[d],b);f.skip=isNaN(x)||isNaN(T)||w,f.stop=b>0&&Math.abs(y[h]-_[h])>m,p&&(f.parsed=y,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),g||this.updateElement(n,b,f,r),_=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}s(sr,"id","line"),s(sr,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),s(sr,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class or extends Gn{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=tt(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return Qt.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*ce;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),m=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(o.animateScale&&(m=0),o.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Te(this.resolveDataElementOptions(e,t).angle||n):0}}s(or,"id","polarArea"),s(or,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),s(or,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ar extends ir{}s(ar,"id","pie"),s(ar,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class lr extends Gn{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Qt.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,r)}}}s(lr,"id","radar"),s(lr,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),s(lr,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class cr extends Gn{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=We(t,n,r);if(this._drawStart=i,this._drawCount=s,qe(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,g=we(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let _=t;_<t+n;++_){const t=e[_],n=this.getParsed(_),c=v?t:{},p=V(n[f]),b=c[d]=s.getPixelForValue(n[d],_),w=c[f]=i||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],_);c.skip=isNaN(b)||isNaN(w)||p,c.stop=_>0&&Math.abs(n[d]-y[d])>g,m&&(c.parsed=n,c.raw=l.data[_]),h&&(c.options=u||this.resolveDataElementOptions(_,t.active?"active":r)),v||this.updateElement(t,_,c,r),y=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}s(cr,"id","scatter"),s(cr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),s(cr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function ur(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hr{static override(e){Object.assign(hr.prototype,e)}constructor(e){s(this,"options",void 0),this.options=e||{}}init(){}formats(){return ur()}parse(){return ur()}format(){return ur()}add(){return ur()}diff(){return ur()}startOf(){return ur()}endOf(){return ur()}}var dr=hr;function fr(e,t,n,r){const{controller:i,data:s,_sorted:o}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?Me:De;if(!r)return e(s,t,n);if(i._sharedOptions){const r=s[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(s,t,n-i),o=e(s,t,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function pr(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=fr(s[a],t,o,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function mr(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return pr(e,n,t,(function(n,o,a){(i||gt(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function gr(e,t,n,r,i,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return pr(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function vr(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?gr(e,t,n,r,i,s):function(e,t,n,r){let i=[];return pr(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=Ce(e,{x:t.x,y:t.y});Ne(l,o,a)&&i.push({element:e,datasetIndex:n,index:s})})),i}(e,t,n,i):[]}function yr(e,t,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return pr(e,n,t,((e,r,l)=>{e[o]&&e[o](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:s}var _r={evaluateInteractionItems:pr,modes:{index(e,t,n,r){const i=hn(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mr(e,i,s,r,o):vr(e,i,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=hn(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mr(e,i,s,r,o):vr(e,i,s,!1,r,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>mr(e,hn(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=hn(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return vr(e,i,s,n.intersect,r,o)},x:(e,t,n,r)=>yr(e,hn(t,e),"x",n.intersect,r),y:(e,t,n,r)=>yr(e,hn(t,e),"y",n.intersect,r)}};const br=["left","top","right","bottom"];function wr(e,t){return e.filter((e=>e.pos===t))}function xr(e,t){return e.filter((e=>-1===br.indexOf(e.pos)&&e.box.axis===t))}function Tr(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Sr(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!br.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&t.availableHeight)}return n}function Er(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Cr(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function kr(e,t,n,r){const{pos:i,box:s}=n,o=e.maxPadding;if(!W(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&Cr(o,s.getPadding());const a=Math.max(0,t.outerWidth-Er(o,e,"left","right")),l=Math.max(0,t.outerHeight-Er(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Ir(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Ar(e,t,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Ir(a.horizontal,t));const{same:o,other:h}=kr(t,n,a,r);c|=o&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Ar(i,t,n,r)||u}function Nr(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function Rr(e,t,n,r){const i=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,s=l.size||e.height;oe(l.start)&&(o=l.start),e.fullSize?Nr(e,i.left,o,n.outerWidth-i.right-i.left,s):Nr(e,t.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;oe(l.start)&&(s=l.start),e.fullSize?Nr(e,s,i.top,o,n.outerHeight-i.bottom-i.top):Nr(e,s,t.top+l.placed,o,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=o}var Pr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=Pt(e.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,s,o,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=Tr(t.filter((e=>e.box.fullSize)),!0),r=Tr(wr(t,"left"),!0),i=Tr(wr(t,"right")),s=Tr(wr(t,"top"),!0),o=Tr(wr(t,"bottom")),a=xr(t,"x"),l=xr(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:wr(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Q(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);Cr(d,Pt(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=Sr(l.concat(c),h);Ar(a.fullSize,f,h,p),Ar(l,f,h,p),Ar(c,f,h,p)&&Ar(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Rr(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Rr(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Q(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Or{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Dr extends Or{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mr="$chartjs",Lr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fr=e=>null===e||""===e;const jr=!!mn&&{passive:!0};function Ur(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,jr)}function Br(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Vr(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Br(n.addedNodes,r),t=t&&!Br(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function zr(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Br(n.removedNodes,r),t=t&&!Br(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const Wr=new Map;let qr=0;function Hr(){const e=window.devicePixelRatio;e!==qr&&(qr=e,Wr.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Kr(e,t,n){const r=e.canvas,i=r&&sn(r);if(!i)return;const s=Be(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)}));return o.observe(i),function(e,t){Wr.size||window.addEventListener("resize",Hr),Wr.set(e,t)}(e,s),o}function Gr(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Wr.delete(e),Wr.size||window.removeEventListener("resize",Hr)}(e)}function Yr(e,t,n){const r=e.canvas,i=Be((t=>{null!==e.ctx&&n(function(e,t){const n=Lr[e.type]||e.type,{x:r,y:i}=hn(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,jr)}(r,t,i),i}class Qr extends Or{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[Mr]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Fr(i)){const t=gn(e,"width");void 0!==t&&(e.width=t)}if(Fr(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=gn(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Mr])return!1;const n=t[Mr].initial;["height","width"].forEach((e=>{const r=n[e];V(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[Mr],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:Vr,detach:zr,resize:Kr}[t]||Yr;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Gr,detach:Gr,resize:Gr}[t]||Ur)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return fn(e,t,n,r)}isAttached(e){const t=e&&sn(e);return!(!t||!t.isConnected)}}class $r{constructor(){s(this,"x",void 0),s(this,"y",void 0),s(this,"active",!1),s(this,"options",void 0),s(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return we(this.x)&&we(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function Xr(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(e,t,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),s++,o=n[s*r])}(t,c,s,o/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(Jr(t,c,u,V(r)?0:a-r,a),e=0,n=o-1;e<n;e++)Jr(t,c,u,s[e],s[e+1]);return Jr(t,c,u,l,V(r)?t.length:l+r),c}return Jr(t,c,u),c}function Jr(e,t,n,r,i){const s=K(r,0),o=Math.min(K(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}s($r,"defaults",{}),s($r,"defaultRoutes",void 0);const Zr=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,ei=(e,t)=>Math.min(t||e,e);function ti(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function ni(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-a||c>o+a)))return c}function ri(e){return e.drawTicks?e.tickLength:0}function ii(e,t){if(!e.display)return 0;const n=Ot(e.font,t),r=Pt(e.padding);return(z(e.text)?e.text.length:1)*n.lineHeight+r.height}function si(e,t,n){let r=Ve(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class oi extends $r{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=H(e,Number.POSITIVE_INFINITY),t=H(t,Number.NEGATIVE_INFINITY),n=H(n,Number.POSITIVE_INFINITY),r=H(r,Number.NEGATIVE_INFINITY),{min:H(e,n),max:H(t,r),minDefined:q(e),maxDefined:q(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:H(n,H(r,n)),max:H(r,H(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Y(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=G(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?ti(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Xr(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Y(this.options.afterUpdate,[this])}beforeSetDimensions(){Y(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Y(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Y(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Y(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Y(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Y(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Y(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=ei(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Re(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-ri(e.grid)-t.padding-ii(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=Se(Math.min(Math.asin(Re((c.highest.height+6)/s,-1,1)),Math.asin(Re(o/a,-1,1))-Math.asin(Re(h/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Y(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Y(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=ii(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=ri(i)+s):(e.height=this.maxHeight,e.width=ri(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=Te(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Y(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)V(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ti(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(t/ei(t,n));let l,c,u,h,d,f,p,m,g,v,y,_=0,b=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},m=d.lineHeight,g=v=0,V(h)||z(h)){if(z(h))for(c=0,u=h.length;c<u;++c)y=h[c],V(y)||z(y)||(g=ut(r,p.data,p.gc,g,y),v+=m)}else g=ut(r,p.data,p.gc,g,h),v=m;s.push(g),o.push(v),_=Math.max(g,_),b=Math.max(v,b)}!function(e,t){Q(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=s.indexOf(_),x=o.indexOf(b),T=e=>({width:s[e]||0,height:o[e]||0});return{first:T(0),last:T(t-1),widest:T(w),highest:T(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Re(this._alignToPixels?dt(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Mt(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Mt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Te(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=ri(i),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,m=function(e){return dt(n,e,f)};let g,v,y,_,b,w,x,T,S,E,C,k;if("top"===s)g=m(this.bottom),w=this.bottom-u,T=g-p,E=m(e.top)+p,k=e.bottom;else if("bottom"===s)g=m(this.top),E=e.top,k=m(e.bottom)-p,w=g+p,T=this.top+u;else if("left"===s)g=m(this.right),b=this.right-u,x=g-p,S=m(e.left)+p,C=e.right;else if("right"===s)g=m(this.left),S=e.left,C=m(e.right)-p,b=g+p,x=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(W(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}E=e.top,k=e.bottom,w=g+p,T=w+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(W(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}b=g-p,x=b-u,S=e.left,C=e.right}const I=K(r.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/I));for(v=0;v<c;v+=A){const e=this.getContext(v),t=i.setContext(e),r=o.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=ni(this,v,a),void 0!==y&&(_=dt(n,y,s),l?b=x=S=C=_:w=T=E=k=_,h.push({tx1:b,ty1:w,tx2:x,ty2:T,x1:S,y1:E,x2:C,y2:k,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,h=ri(n.grid),d=h+c,f=u?-c:d,p=-Te(this.labelRotation),m=[];let g,v,y,_,b,w,x,T,S,E,C,k,I="middle";if("top"===r)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,b=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+d;else if(W(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-d;else if(W(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const A=this._getLabelSizes();for(g=0,v=o.length;g<v;++g){y=o[g],_=y.label;const e=i.setContext(this.getContext(g));T=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),E=S.lineHeight,C=z(_)?_.length:1;const t=C/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(b=T,"inner"===x&&(d=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),k="top"===r?"near"===l||0!==p?-C*E+E/2:"center"===l?-A.highest.height/2-t*E+E:-A.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?A.highest.height/2-t*E:A.highest.height-C*E,u&&(k*=-1),0===p||e.showLabelBackdrop||(b+=E/2*Math.sin(p))):(w=T,k=(1-C)*E/2),e.showLabelBackdrop){const t=Pt(e.backdropPadding),n=A.heights[g],r=A.widths[g];let i=k-t.top,s=0-t.left;switch(I){case"middle":i-=n/2;break;case"bottom":i-=n}switch(x){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===v-1?s-=r:g>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:_,font:S,textOffset:k,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:I,translation:[b,w],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Te(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=dt(e,this.left,s)-s/2,c=dt(e,this.right,o)+o/2,u=h=a):(u=dt(e,this.top,s)-s/2,h=dt(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&vt(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;Tt(t,i.label,0,i.textOffset,n,e)}n&&yt(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=Ot(n.font),s=Pt(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||W(t)?(a+=s.bottom,z(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const m=o-i,g=a-s;if(e.isHorizontal()){if(d=ze(r,s,a),W(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:Zr(e,n,t);h=a-s}else{if(W(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:Zr(e,n,t);f=ze(r,o,i),p="left"===n?-pe:pe}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);Tt(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:si(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=K(e.grid&&e.grid.z,-1),r=K(e.border&&e.border.z,0);return this._isVisible()&&this.draw===oi.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return Ot(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ai{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=ee(Object.create(null),[n?ct.get(n):{},ct.get(t),e.defaults]);ct.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ct.route(s,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&ct.describe(t,e.descriptors)}(e,s,n),this.override&&ct.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in ct[r]&&(delete ct[r][n],this.override&&delete it[n])}}class li{constructor(){this.controllers=new ai(Gn,"datasets",!0),this.elements=new ai($r,"elements"),this.plugins=new ai(Object,"plugins"),this.scales=new ai(oi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Q(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=se(e);Y(n["before"+r],[],n),t[e](n),Y(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ci=new li;class ui{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===Y(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){V(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=K(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(ci.plugins.items);for(let s=0;s<r.length;s++)n.push(ci.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const o=[],a=e.getContext();for(const l of i){const t=l.id,i=hi(n[t],r);null!==i&&o.push({plugin:l,options:di(e.config,{plugin:l,local:s[t]},i,a)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function hi(e,t){return t||!1!==e?!0===e?{}:e:null}function di(e,t,n,r){let{plugin:i,local:s}=t;const o=e.pluginScopeKeys(i),a=e.getOptionScopes(n,o);return s&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fi(e,t){const n=ct.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function pi(e){if("x"===e||"y"===e||"r"===e)return e}function mi(e){if(pi(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&pi(e[0].toLowerCase());if(t)return t}var i;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function gi(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function vi(e,t){const n=it[e.type]||{scales:{}},r=t.scales||{},i=fi(e.type,t),s=Object.create(null);return Object.keys(r).forEach((t=>{const o=r[t];if(!W(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=mi(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return gi(e,"x",n[0])||gi(e,"y",n[0])}return{}}(t,e),ct.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};s[t]=te(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,o=n.indexAxis||fi(i,t),a=(it[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),te(s[i],[{axis:t},r[i],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];te(t,[ct.scales[t.type],ct.scale])})),s}function yi(e){const t=e.options||(e.options={});t.plugins=K(t.plugins,{}),t.scales=vi(e,t)}function _i(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const bi=new Map,wi=new Set;function xi(e,t){let n=bi.get(e);return n||(n=t(),bi.set(e,n),wi.add(n)),n}const Ti=(e,t,n)=>{const r=ie(t,n);void 0!==r&&e.add(r)};class Si{constructor(e){this._config=function(e){return(e=e||{}).data=_i(e.data),yi(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=_i(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yi(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xi(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return xi("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return xi("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return xi("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>Ti(a,e,t)))),t.forEach((e=>Ti(a,r,e))),t.forEach((e=>Ti(a,it[i]||{},e))),t.forEach((e=>Ti(a,ct,e))),t.forEach((e=>Ti(a,st,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),wi.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,it[t]||{},ct.datasets[t]||{},{type:t},ct,st]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:o}=Ei(this._resolverCache,e,r);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=jt(e);for(const i of t){const t=n(i),s=r(i),o=(s||t)&&e[i];if(t&&(ae(o)||Ci(o))||s&&z(o))return!0}return!1}(s,t)){i.$shared=!1;a=Ft(s,n=ae(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=Ei(this._resolverCache,e,n);return W(t)?Ft(i,t,void 0,r):i}}function Ei(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:Lt(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,s)}return s}const Ci=e=>W(e)&&Object.getOwnPropertyNames(e).some((t=>ae(e[t])));const ki=["top","bottom","left","right","chartArea"];function Ii(e,t){return"top"===e||"bottom"===e||-1===ki.indexOf(e)&&"x"===t}function Ai(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Ni(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Y(n&&n.onComplete,[e],t)}function Ri(e){const t=e.chart,n=t.options.animation;Y(n&&n.onProgress,[e],t)}function Pi(e){return rn()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Oi={},Di=e=>{const t=Pi(e);return Object.values(Oi).filter((e=>e.canvas===t)).pop()};function Mi(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}function Li(e,t,n){return e.options.clip?e[n]:t[n]}class Fi{static register(){ci.add(...arguments),ji()}static unregister(){ci.remove(...arguments),ji()}constructor(e,t){const n=this.config=new Si(t),r=Pi(e),i=Di(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!rn()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Dr:Qr}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=B(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ui,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],Oi[this.id]=this,o&&a?(Rn.listen(this,"complete",Ni),Rn.listen(this,"progress",Ri),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return V(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ci}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ft(this.canvas,this.ctx),this}stop(){return Rn.stop(this),this}resize(e,t){Rn.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,pn(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Y(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Q(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=mi(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),Q(i,(t=>{const i=t.options,s=i.id,o=mi(s,i),a=K(i.type,t.dtype);void 0!==i.position&&Ii(i.position,o)===Ii(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ci.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),Q(r,((e,t)=>{e||delete n[t]})),Q(n,(e=>{Pr.configure(this,e,e.options),Pr.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Ai("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||fi(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=ci.getController(s),{datasetElementType:r,dataElementType:o}=ct.datasets[s];Object.assign(t,{dataElementType:ci.getElement(o),datasetElementType:r&&ci.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Q(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||Q(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ai("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Q(this.scales,(e=>{Pr.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);le(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){Mi(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!le(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Pr.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Q(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,ae(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Rn.has(this)?this.attached&&!Rn.running(this)&&Rn.start(this):(this.draw(),Ni({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Li(n,t,"left"),right:Li(n,t,"right"),top:Li(r,t,"top"),bottom:Li(r,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&vt(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&yt(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return gt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=_r.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Mt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);oe(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Rn.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ft(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Oi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Q(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Q(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Q(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!$(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=i(t,e),o=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,o=this._getActiveElements(e,r,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Y(i.onHover,[e,o,this],this),a&&Y(i.onClick,[e,o,this],this));const c=!$(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function ji(){return Q(Fi.instances,(e=>e._plugins.invalidate()))}function Ui(e,t,n,r){const i=At(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,r*t/2),a=e=>{const t=(n-Math.min(s,e))*r/2;return Re(e,0,Math.min(s,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Re(i.innerStart,0,o),innerEnd:Re(i.innerEnd,0,o)}}function Bi(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Vi(e,t,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*h-n/ce)/h)/2,g=l+m+f,v=i-m-f,{outerStart:y,outerEnd:_,innerStart:b,innerEnd:w}=Ui(t,d,h,v-g),x=h-y,T=h-_,S=g+y/x,E=v-_/T,C=d+b,k=d+w,I=g+b/C,A=v-w/k;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(o,a,h,S,t),e.arc(o,a,h,t,E),_>0){const t=Bi(T,E,o,a);e.arc(t.x,t.y,_,E,v+pe)}const n=Bi(k,v,o,a);if(e.lineTo(n.x,n.y),w>0){const t=Bi(k,A,o,a);e.arc(t.x,t.y,w,v+pe,A+Math.PI)}const r=(v-w/d+(g+b/d))/2;if(e.arc(o,a,d,v-w/d,r,!0),e.arc(o,a,d,r,g+b/d,!0),b>0){const t=Bi(C,I,o,a);e.arc(t.x,t.y,b,I+Math.PI,g-pe)}const i=Bi(x,g,o,a);if(e.lineTo(i.x,i.y),y>0){const t=Bi(x,S,o,a);e.arc(t.x,t.y,y,g-pe,S)}}else{e.moveTo(o,a);const t=Math.cos(S)*h+o,n=Math.sin(S)*h+a;e.lineTo(t,n);const r=Math.cos(E)*h+o,i=Math.sin(E)*h+a;e.lineTo(r,i)}e.closePath()}function zi(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){Vi(e,t,n,r,p,i);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%ue||ue))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(s,o,a,r-c,n+c),l>i?(c=i/l,e.arc(s,o,l,n+c,r-c,!0)):e.arc(s,o,i,n+pe,r-pe),e.closePath(),e.clip()}(e,t,p),s||(Vi(e,t,n,r,p,i),e.stroke())}s(Fi,"defaults",ct),s(Fi,"instances",Oi),s(Fi,"overrides",it),s(Fi,"registry",ci),s(Fi,"version","4.4.7"),s(Fi,"getChart",Di);class Wi extends $r{constructor(e){super(),s(this,"circumference",void 0),s(this,"endAngle",void 0),s(this,"fullCircles",void 0),s(this,"innerRadius",void 0),s(this,"outerRadius",void 0),s(this,"pixelMargin",void 0),s(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=Ce(r,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=K(u,a-o),f=Ne(i,o,a)&&o!==a,p=d>=ue||f,m=Pe(s,l+h,c+h);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ue?Math.floor(n/ue):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(ce,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){Vi(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%ue||ue))}Vi(e,t,n,r,l,i),e.fill()}(e,this,a,i,s),zi(e,this,a,i,s),e.restore()}}function qi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=K(n.borderCapStyle,t.borderCapStyle),e.setLineDash(K(n.borderDash,t.borderDash)),e.lineDashOffset=K(n.borderDashOffset,t.borderDashOffset),e.lineJoin=K(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=K(n.borderWidth,t.borderWidth),e.strokeStyle=K(n.borderColor,t.borderColor)}function Hi(e,t,n){e.lineTo(n.x,n.y)}function Ki(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Gi(e,t,n,r){const{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=Ki(i,n,r),u=function(e){return e.stepped?_t:e.tension||"monotone"===e.cubicInterpolationMode?bt:Hi}(s);let h,d,f,{move:p=!0,reverse:m}=r||{};for(h=0;h<=c;++h)d=i[(a+(m?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,m,s.stepped),f=d);return l&&(d=i[(a+(m?c:0))%o],u(e,f,d,m,s.stepped)),!!l}function Yi(e,t,n,r){const i=t.points,{count:s,start:o,ilen:a}=Ki(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,m,g=0,v=0;const y=e=>(o+(c?a-e:e))%s,_=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(h=i[y(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=i[y(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(_(),e.lineTo(t,n),d=r,v=0,f=p=n),m=n}_()}function Qi(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Yi:Gi}s(Wi,"id","arc"),s(Wi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),s(Wi,"defaultRoutes",{backgroundColor:"backgroundColor"}),s(Wi,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const $i="function"===typeof Path2D;function Xi(e,t,n,r){$i&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),qi(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,o=Qi(t);for(const a of i)qi(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Ji extends $r{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;nn(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return kn(e,!0===r?[{start:o,end:a,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(o-1)%i,loop:r}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!e._fullLoop&&0===o&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=Cn(this,{property:t,start:r,end:r});if(!s.length)return;const o=[],a=function(e){return e.stepped?yn:e.tension||"monotone"===e.cubicInterpolationMode?_n:vn}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return Qi(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=Qi(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)s&=i(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Xi(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Zi(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}s(Ji,"id","line"),s(Ji,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),s(Ji,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),s(Ji,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class es extends $r{constructor(e){super(),s(this,"parsed",void 0),s(this,"skip",void 0),s(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Zi(this,e,"x",t)}inYRange(e,t){return Zi(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!gt(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,pt(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ts(e,t){const{x:n,y:r,base:i,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function ns(e,t,n,r){return e?0:Re(t,n,r)}function rs(e){const t=ts(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=Nt(r);return{t:ns(i.top,s.top,0,n),r:ns(i.right,s.right,0,t),b:ns(i.bottom,s.bottom,0,n),l:ns(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=Rt(i),o=Math.min(t,n),a=e.borderSkipped,l=r||W(i);return{topLeft:ns(!l||a.top||a.left,s.topLeft,0,o),topRight:ns(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ns(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ns(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function is(e,t,n,r){const i=null===t,s=null===n,o=e&&!(i&&s)&&ts(e,r);return o&&(i||Pe(t,o.left,o.right))&&(s||Pe(n,o.top,o.bottom))}function ss(e,t){e.rect(t.x,t.y,t.w,t.h)}function os(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+o,radius:e.radius}}s(es,"id","point"),s(es,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),s(es,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class as extends $r{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=rs(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?St:ss;var a;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),o(e,os(s,t,i)),e.clip(),o(e,os(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,os(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return is(this,e,t,n)}inXRange(e,t){return is(this,e,null,t)}inYRange(e,t){return is(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}s(as,"id","bar"),s(as,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),s(as,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ls=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class cs extends $r{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Y(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=Ot(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=ls(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=us(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,i,e,r);s>0&&d+g+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:m,height:g},h=Math.max(h,m),d+=g+o})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=bn(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=ze(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,o=ze(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=ze(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,o=ze(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;vt(e,this),this._draw(),yt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,o=ct.color,a=bn(e.rtl,this.left,this.width),l=Ot(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=ls(s,u),g=this.isHorizontal(),v=this._computeTitleHeight();d=g?{x:ze(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:ze(i,this.top+v+c,this.bottom-t[0].height),line:0},wn(this.ctx,e.textDirection);const y=m+c;this.legendItems.forEach(((_,b)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const w=r.measureText(_.text).width,x=a.textAlign(_.textAlign||(_.textAlign=s.textAlign)),T=f+h+w;let S=d.x,E=d.y;a.setWidth(this.width),g?b>0&&S+T+c>this.right&&(E=d.y+=y,d.line++,S=d.x=ze(i,this.left+c,this.right-n[d.line])):b>0&&E+y>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=ze(i,this.top+v+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=K(n.lineWidth,1);if(r.fillStyle=K(n.fillStyle,o),r.lineCap=K(n.lineCap,"butt"),r.lineDashOffset=K(n.lineDashOffset,0),r.lineJoin=K(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=K(n.strokeStyle,o),r.setLineDash(K(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);mt(r,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=Rt(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?St(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(S),E,_),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(x,S+f+h,g?S+T:this.right,e.rtl),function(e,t,n){Tt(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),E,_),g)d.x+=T+c;else if("string"!==typeof _.text){const e=l.lineHeight;d.y+=us(_,e)+c}else d.y+=y})),xn(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Ot(t.font),r=Pt(t.padding);if(!t.display)return;const i=bn(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=ze(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+ze(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=ze(o,u,u+h);s.textAlign=i.textAlign(Ve(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Tt(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=Ot(e.font),n=Pt(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(Pe(e,this.left,this.right)&&Pe(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Pe(e,r.left,r.left+r.width)&&Pe(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,o=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!o&&Y(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&Y(t.onHover,[e,n,this],this)}else n&&Y(t.onClick,[e,n,this],this);var r,i}}function us(e,t){return t*(e.text?e.text.length:0)}var hs={id:"legend",_element:cs,start(e,t,n){const r=e.legend=new cs({ctx:e.ctx,options:n,chart:e});Pr.configure(e,r,n),Pr.addBox(e,r)},stop(e){Pr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Pr.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Pt(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ds extends $r{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=z(n.text)?n.text.length:1;this._padding=Pt(n.padding);const i=r*Ot(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=ze(o,n,i),c=t+e,a=i-n):("left"===s.position?(l=n+e,c=ze(o,r,t),u=-.5*ce):(l=i-e,c=ze(o,t,r),u=.5*ce),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Ot(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);Tt(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:Ve(t.align),textBaseline:"middle",translation:[i,s]})}}var fs={id:"title",_element:ds,start(e,t,n){!function(e,t){const n=new ds({ctx:e.ctx,options:t,chart:e});Pr.configure(e,n,t),Pr.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Pr.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Pr.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ps={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce(((e,t)=>e+t))/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=ke(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function ms(e,t){return t&&(z(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function gs(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function vs(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:e,label:o,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function ys(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=Ot(t.bodyFont),c=Ot(t.titleFont),u=Ot(t.footerFont),h=s.length,d=i.length,f=r.length,p=Pt(t.padding);let m=p.height,g=0,v=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const _=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,Q(e.title,_),n.font=l.string,Q(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?o+2+t.boxPadding:0,Q(r,(e=>{Q(e.before,_),Q(e.lines,_),Q(e.after,_)})),y=0,n.font=u.string,Q(e.footer,_),n.restore(),g+=p.width,{width:g,height:m}}function _s(e,t,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+s+o>t.width||"right"===e&&i-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function bs(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||_s(e,t,n,r),yAlign:r}}function ws(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Rt(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+i:"right"===a&&(p+=Math.max(h,f)+i),{x:Re(p,0,r.width-t.width),y:Re(m,0,r.height-t.height)}}function xs(e,t,n){const r=Pt(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Ts(e){return ms([],gs(e))}function Ss(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Es={beforeTitle:U,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:U,beforeBody:U,beforeLabel:U,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return V(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:U,afterBody:U,beforeFooter:U,footer:U,afterFooter:U};function Cs(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?Es[t].call(n,r):i}class ks extends $r{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new Mn(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Mt(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=Cs(n,"beforeTitle",this,e),i=Cs(n,"title",this,e),s=Cs(n,"afterTitle",this,e);let o=[];return o=ms(o,gs(r)),o=ms(o,gs(i)),o=ms(o,gs(s)),o}getBeforeBody(e,t){return Ts(Cs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Q(e,(e=>{const t={before:[],lines:[],after:[]},i=Ss(n,e);ms(t.before,gs(Cs(i,"beforeLabel",this,e))),ms(t.lines,Cs(i,"label",this,e)),ms(t.after,gs(Cs(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return Ts(Cs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=Cs(n,"beforeFooter",this,e),i=Cs(n,"footer",this,e),s=Cs(n,"afterFooter",this,e);let o=[];return o=ms(o,gs(r)),o=ms(o,gs(i)),o=ms(o,gs(s)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(vs(this.chart,t[o]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),Q(l,(t=>{const n=Ss(e.callbacks,t);r.push(Cs(n,"labelColor",this,t)),i.push(Cs(n,"labelPointStyle",this,t)),s.push(Cs(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=ps[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=ys(this,n),o=Object.assign({},e,t),a=bs(this.chart,n,o),l=ws(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Rt(o),{x:h,y:d}=e,{width:f,height:p}=t;let m,g,v,y,_,b;return"center"===i?(_=d+p/2,"left"===r?(m=h,g=m-s,y=_+s,b=_-s):(m=h+f,g=m+s,y=_-s,b=_+s),v=m):(g="left"===r?h+Math.max(a,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(y=d,_=y-s,m=g-s,v=g+s):(y=d+p,_=y+s,m=g+s,v=g-s),b=y),{x1:m,x2:g,x3:v,y1:y,y2:_,y3:b}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=bn(n.rtl,this.x,this.width);for(e.x=xs(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=Ot(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=Ot(i.bodyFont),u=xs(this,"left",i),h=r.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,pt(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,pt(e,t,n,c)}else{e.lineWidth=W(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),o=Rt(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,St(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),St(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Ot(n.bodyFont);let h=u.lineHeight,d=0;const f=bn(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},m=f.textAlign(s);let g,v,y,_,b,w,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=xs(this,m,n),t.fillStyle=n.bodyColor,Q(this.beforeBody,p),d=o&&"right"!==m?"center"===s?l/2+c:l+2+c:0,_=0,w=r.length;_<w;++_){for(g=r[_],v=this.labelTextColors[_],t.fillStyle=v,Q(g.before,p),y=g.lines,o&&y.length&&(this._drawColorBox(t,e,_,f,n),h=Math.max(u.lineHeight,a)),b=0,x=y.length;b<x;++b)p(y[b]),h=u.lineHeight;Q(g.after,p)}d=0,h=u.lineHeight,Q(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,o;if(i){const a=bn(n.rtl,this.x,this.width);for(e.x=xs(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=Ot(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Rt(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=ps[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=ys(this,e),o=Object.assign({},n,this._size),a=bs(t,e,o),l=ws(e,o,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Pt(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),wn(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),xn(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!$(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),o=this._positionChanged(s,e),a=t||!$(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=ps[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}s(ks,"positioners",ps);var Is={id:"tooltip",_element:ks,positioners:ps,afterInit(e,t,n){n&&(e.tooltip=new ks({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Es},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function As(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function Ns(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Rs extends oi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(V(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Re(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:As(n,e,K(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return Ns.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ps(e,t){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:m}=t,g=!V(s),v=!V(o),y=!V(l),_=(m-p)/(u+1);let b,w,x,T,S=be((m-p)/f/d)*d;if(S<1e-14&&!g&&!v)return[{value:p},{value:m}];T=Math.ceil(m/S)-Math.floor(p/S),T>f&&(S=be(T*S/f/d)*d),V(a)||(b=Math.pow(10,a),S=Math.ceil(S*b)/b),"ticks"===r?(w=Math.floor(p/S)*S,x=Math.ceil(m/S)*S):(w=p,x=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/i,S/1e3)?(T=Math.round(Math.min((o-s)/S,c)),S=(o-s)/T,w=s,x=o):y?(w=g?s:w,x=v?o:x,T=l-1,S=(x-w)/T):(T=(x-w)/S,T=_e(T,Math.round(T),S/1e3)?Math.round(T):Math.ceil(T));const E=Math.max(Ee(S),Ee(w));b=Math.pow(10,V(a)?E:a),w=Math.round(w*b)/b,x=Math.round(x*b)/b;let C=0;for(g&&(h&&w!==s?(n.push({value:s}),w<s&&C++,_e(Math.round((w+C*S)*b)/b,s,Os(s,_,e))&&C++):w<s&&C++);C<T;++C){const e=Math.round((w+C*S)*b)/b;if(v&&e>o)break;n.push({value:e})}return v&&h&&x!==o?n.length&&_e(n[n.length-1].value,o,Os(o,_,e))?n[n.length-1].value=o:n.push({value:o}):v&&x!==o||n.push({value:x}),n}function Os(e,t,n){let{horizontal:r,minRotation:i}=n;const s=Te(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}s(Rs,"id","category"),s(Rs,"defaults",{ticks:{callback:Ns}});class Ds extends oi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return V(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=ye(r),t=ye(i);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Ps({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&xe(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return tt(e,this.chart.options.locale,this.options.ticks.format)}}class Ms extends Ds{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=q(e)?e:0,this.max=q(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Te(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}s(Ms,"id","linear"),s(Ms,"defaults",{ticks:{callback:rt.formatters.numeric}});const Ls=e=>Math.floor(ve(e)),Fs=(e,t)=>Math.pow(10,Ls(e)+t);function js(e){return 1===e/Math.pow(10,Ls(e))}function Us(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function Bs(e,t){let{min:n,max:r}=t;n=H(e.min,n);const i=[],s=Ls(n);let o=function(e,t){let n=Ls(t-e);for(;Us(e,t,n)>10;)n++;for(;Us(e,t,n)<10;)n--;return Math.min(n,Ls(e))}(n,r),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=H(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<r;)i.push({value:f,major:js(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=H(e.max,f);return i.push({value:p,major:js(p),significand:d}),i}class Vs extends oi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Ds.prototype.parse.apply(this,[e,t]);if(0!==n)return q(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=q(e)?Math.max(0,e):null,this.max=q(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!q(this._userMin)&&(this.min=e===Fs(this.min,0)?Fs(this.min,-1):Fs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(Fs(n,-1)),s(Fs(r,1)))),n<=0&&i(Fs(r,-1)),r<=0&&s(Fs(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Bs({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&xe(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":tt(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ve(e),this._valueRange=ve(this.max)-ve(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ve(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function zs(e){const t=e.ticks;if(t.display&&e.display){const e=Pt(t.backdropPadding);return K(t.font&&t.font.size,ct.font.size)+e.height}return 0}function Ws(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function qs(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?ce/s:0;for(let h=0;h<s;h++){const s=o.setContext(e.getPointLabelContext(h));i[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+i[h],a),f=Ot(s.font),p=(l=e.ctx,c=f,u=z(u=e._pointLabels[h])?u:[u],{w:ht(l,c.string,u),h:u.length*c.lineHeight});r[h]=p;const m=Ae(e.getIndexAngle(h)+a),g=Math.round(Se(m));Hs(n,t,m,Ws(g,d.x,p.w,0,180),Ws(g,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:zs(s)/2,additionalAngle:o?ce/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=Ks(e,u,l);r.push(i),"auto"===a&&(i.visible=Gs(i,c),i.visible&&(c=i))}return r}(e,r,i)}function Hs(e,t,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function Ks(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,r+i+o,s),c=Math.round(Se(Ae(l.angle+pe))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Gs(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(gt({x:n,y:r},t)||gt({x:n,y:s},t)||gt({x:i,y:r},t)||gt({x:i,y:s},t))}function Ys(e,t,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=t;if(!V(a)){const n=Rt(t.borderRadius),l=Pt(t.backdropPadding);e.fillStyle=a;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=o-i+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),St(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function Qs(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,ue);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}s(Vs,"id","logarithmic"),s(Vs,"defaults",{ticks:{callback:rt.formatters.logarithmic,major:{enabled:!0}}});class $s extends Ds{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Pt(zs(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=q(e)&&!isNaN(e)?e:0,this.max=q(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zs(this.options))}generateTickLabels(e){Ds.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Y(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?qs(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return Ae(e*(ue/(this._pointLabels.length||1))+Te(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(V(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(V(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Mt(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-pe+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Qs(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));Ys(n,s,t);const o=Ot(s.font),{x:a,y:l,textAlign:c}=t;Tt(n,e._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Qs(e,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=Ot(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=a.backdropColor;const t=Pt(a.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}Tt(e,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}s($s,"id","radialLinear"),s($s,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),s($s,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),s($s,"descriptors",{angleLines:{_fallback:"grid"}});const Xs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Js=Object.keys(Xs);function Zs(e,t){return e-t}function eo(e,t){if(V(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof r&&(o=r(o)),q(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!we(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function to(e,t,n,r){const i=Js.length;for(let s=Js.indexOf(e);s<i-1;++s){const e=Xs[Js[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return Js[s]}return Js[i-1]}function no(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=Oe(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function ro(e,t,n){const r=[],i={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class io extends oi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new dr(e.adapters.date);r.init(t),te(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:eo(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(i=Math.max(i,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),r=q(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=q(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?to(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=Js.length-1;s>=Js.indexOf(n);s--){const n=Js[s];if(Xs[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return Js[n?Js.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Js.indexOf(e)+1,n=Js.length;t<n;++t)if(Xs[Js[t]].common)return Js[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),ro(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=Re(r,0,s),i=Re(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||to(i.minUnit,t,n,this._getLabelCapacity(t)),o=K(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=we(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)no(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||no(c,u,f),Object.keys(c).sort(Zs).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return Y(s,[e,t,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Te(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,ro(this,[e],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(eo(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return je(e.sort(Zs))}}function so(e,t,n){let r,i,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=De(e,"pos",t)),({pos:r,time:s}=e[a]),({pos:i,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=De(e,"time",t)),({time:r,pos:s}=e[a]),({time:i,pos:o}=e[l]));const c=i-r;return c?s+(o-s)*(t-r)/c:s}s(io,"id","time"),s(io,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class oo extends io{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=so(t,this.min),this._tableRange=so(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(so(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return so(this._table,n*this._tableRange+this._minPos,!0)}}s(oo,"id","timeseries"),s(oo,"defaults",io.defaults)},6564:(e,t,n)=>{"use strict";n.d(t,{A:()=>r.A});var r=n(8984);r.A.registerVersion("firebase","10.12.4","app-compat")},6747:(e,t,n)=>{"use strict";var r=n(8984),i=n(913),s=n(9061),o=n(4624);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var l=n(7253);const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u="EMAIL_SIGNIN",h="PASSWORD_RESET",d="RECOVER_EMAIL",f="REVERT_SECOND_FACTOR_ADDITION",p="VERIFY_AND_CHANGE_EMAIL",m="VERIFY_EMAIL";function g(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},y=g,_=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),b=new o.Vy("@firebase/auth");function w(e){if(b.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.error("Auth (".concat(i.SDK_VERSION,"): ").concat(e),...n)}}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw k(e,...n)}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k(e,...n)}function S(e,t,n){const r=Object.assign(Object.assign({},y()),{[t]:n});return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function E(e){return S(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&x(e,"argument-error"),S(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return _.create(e,...n)}function I(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw k(t,...r)}}function A(e){const t="INTERNAL ASSERTION FAILED: "+e;throw w(t),new Error(t)}function N(e,t){e||A(t)}function R(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function P(){return"http:"===O()||"https:"===O()}function O(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class D{constructor(e,t){this.shortDelay=e,this.longDelay=t,N(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(P()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function M(e,t){N(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class L{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void A("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void A("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void A("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j=new D(3e4,6e4);function U(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function B(e,t,n,r){return V(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),L.fetch()(W(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))}))}async function V(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},F),t);try{const t=new H(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw K(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw K(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw K(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw K(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw S(e,a,o);x(e,a)}}catch(i){if(i instanceof s.g)throw i;x(e,"network-request-failed",{message:String(i)})}}async function z(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await B(e,t,n,r,i);return"mfaPendingCredential"in s&&x(e,"multi-factor-auth-required",{_serverResponse:s}),s}function W(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?M(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function q(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(T(this.auth,"network-request-failed"))),j.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function K(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=T(e,t,r);return i.customData._tokenResponse=n,i}function G(e){return void 0!==e&&void 0!==e.getResponse}function Y(e){return void 0!==e&&void 0!==e.enterprise}class Q{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return q(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function $(e,t){return B(e,"GET","/v2/recaptchaConfig",U(e,t))}async function X(e,t){return B(e,"POST","/v1/accounts:lookup",t)}function J(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Z(e){return 1e3*Number(e)}function ee(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return w("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(w("Failed to decode base64 JWT payload"),null)}catch(i){return w("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function te(e){const t=ee(e);return I(t,"internal-error"),I("undefined"!==typeof t.exp,"internal-error"),I("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ne(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class re{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ie{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=J(this.lastLoginAt),this.creationTime=J(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function se(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ne(e,X(n,{idToken:r}));I(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?oe(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ie(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function oe(e){return e.map((e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I("undefined"!==typeof e.idToken,"internal-error"),I("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):te(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){I(0!==e.length,"internal-error");const t=te(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(I(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await V(e,{},(async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=W(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ae;return n&&(I("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(I("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(I("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return A("not implemented")}}function le(e,t){I("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ce{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new re(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ie(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ne(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=ee(r);I(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:J(Z(i.auth_time)),issuedAtTime:J(Z(i.iat)),expirationTime:J(Z(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await se(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ce(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await se(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,i._isFirebaseServerApp)(this.auth.app))return Promise.reject(E(this.auth));const e=await this.getIdToken();return await ne(this,async function(e,t){return B(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;I(y&&x,e,"internal-error");const T=ae.fromJSON(this.name,x);I("string"===typeof y,e,"internal-error"),le(u,e.name),le(h,e.name),I("boolean"===typeof _,e,"internal-error"),I("boolean"===typeof b,e,"internal-error"),le(d,e.name),le(f,e.name),le(p,e.name),le(m,e.name),le(g,e.name),le(v,e.name);const S=new ce({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(S.providerData=w.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ae;r.updateFromServerResponse(t);const i=new ce({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await se(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];I(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?oe(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new ae;o.updateFromIdToken(n);const a=new ce({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ie(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const ue=new Map;function he(e){N(e instanceof Function,"Expected a class definition");let t=ue.get(e);return t?(N(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ue.set(e,t),t)}class de{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}de.type="NONE";const fe=de;function pe(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class me{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pe(this.userKey,r.apiKey,i),this.fullPersistenceKey=pe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ce._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new me(he(fe),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||he(fe);const s=pe(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ce._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new me(i,e,n)):new me(i,e,n)}}function ge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(be(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ve(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xe(t))return"Blackberry";if(Te(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||_e(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function ye(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function Se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return Se(e)||we(e)||Te(e)||xe(e)||/windows phone/i.test(e)||be(e)}function Ce(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ge((0,s.ZQ)());break;case"Worker":t="".concat(ge((0,s.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(i.SDK_VERSION,"/").concat(r)}class ke{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ie{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ae{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Re(this),this.idTokenSubscription=new Re(this),this.beforeStateQueue=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=he(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await me.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await X(this,{idToken:e}),n=await ce._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,i._isFirebaseServerApp)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==i||!(null===o||void 0===o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await se(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,i._isFirebaseServerApp)(this.app))return Promise.reject(E(this));const t=e?(0,s.Ku)(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(0,i._isFirebaseServerApp)(this.app)?Promise.reject(E(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,i._isFirebaseServerApp)(this.app)?Promise.reject(E(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(he(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return B(e,"GET","/v2/passwordPolicy",U(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ie(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return B(e,"POST","/v2/accounts:revokeToken",U(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&he(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await me.create(this,[he(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(I(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(b.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.warn("Auth (".concat(i.SDK_VERSION,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ne(e){return(0,s.Ku)(e)}class Re{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)((e=>this.observer=e))}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oe(e){return Pe.loadJS(e)}function De(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Me{constructor(e){this.type="recaptcha-enterprise",this.auth=Ne(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Y(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{$(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Q(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Y(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Pe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Oe(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Le(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Me(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fe(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Le(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Le(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function je(e,t,n){const r=Ne(e);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ue(t),{host:o,port:a}=function(e){const t=Ue(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Be(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Be(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ue(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Be(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ve{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return A("not implemented")}_getIdTokenResponse(e){return A("not implemented")}_linkToIdToken(e,t){return A("not implemented")}_getReauthenticationResolver(e){return A("not implemented")}}async function ze(e,t){return B(e,"POST","/v1/accounts:resetPassword",U(e,t))}async function We(e,t){return B(e,"POST","/v1/accounts:signUp",t)}async function qe(e,t){return z(e,"POST","/v1/accounts:signInWithPassword",U(e,t))}async function He(e,t){return B(e,"POST","/v1/accounts:sendOobCode",U(e,t))}async function Ke(e,t){return He(e,t)}async function Ge(e,t){return He(e,t)}class Ye extends Ve{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t){return new Ye(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Fe(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qe);case"emailLink":return async function(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",U(e,t))}(e,{email:this._email,oobCode:this._password});default:x(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Fe(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",We);case"emailLink":return async function(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",U(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:x(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qe(e,t){return z(e,"POST","/v1/accounts:signInWithIdp",U(e,t))}class $e extends Ve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $e(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):x("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new $e(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}const Xe={USER_NOT_FOUND:"user-not-found"};class Je extends Ve{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Je({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Je({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",U(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await z(e,"POST","/v1/accounts:signInWithPhoneNumber",U(e,t));if(n.temporaryProof)throw K(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",U(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Xe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Je({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ze{constructor(e){var t,n,r,i,o,a;const l=(0,s.I9)((0,s.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);I(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ze(t)}catch(n){return null}}}class et{constructor(){this.providerId=et.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ze.parseLink(t);return I(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}et.PROVIDER_ID="password",et.EMAIL_PASSWORD_SIGN_IN_METHOD="password",et.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nt extends tt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rt extends nt{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return I("providerId"in t&&"signInMethod"in t,"argument-error"),$e._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return I(e.idToken||e.accessToken,"argument-error"),$e._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return rt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return rt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new rt(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class it extends nt{constructor(){super("facebook.com")}static credential(e){return $e._fromParams({providerId:it.PROVIDER_ID,signInMethod:it.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return it.credentialFromTaggedObject(e)}static credentialFromError(e){return it.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return it.credential(t.oauthAccessToken)}catch(n){return null}}}it.FACEBOOK_SIGN_IN_METHOD="facebook.com",it.PROVIDER_ID="facebook.com";class st extends nt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $e._fromParams({providerId:st.PROVIDER_ID,signInMethod:st.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return st.credentialFromTaggedObject(e)}static credentialFromError(e){return st.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return st.credential(n,r)}catch(i){return null}}}st.GOOGLE_SIGN_IN_METHOD="google.com",st.PROVIDER_ID="google.com";class ot extends nt{constructor(){super("github.com")}static credential(e){return $e._fromParams({providerId:ot.PROVIDER_ID,signInMethod:ot.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ot.credentialFromTaggedObject(e)}static credentialFromError(e){return ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ot.credential(t.oauthAccessToken)}catch(n){return null}}}ot.GITHUB_SIGN_IN_METHOD="github.com",ot.PROVIDER_ID="github.com";class at extends Ve{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Qe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qe(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new at(n,i):null}static _create(e,t){return new at(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lt extends tt{constructor(e){I(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return lt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=at.fromJSON(e);return I(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return at._create(r,n)}catch(i){return null}}}class ct extends nt{constructor(){super("twitter.com")}static credential(e,t){return $e._fromParams({providerId:ct.PROVIDER_ID,signInMethod:ct.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ct.credentialFromTaggedObject(e)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ct.credential(n,r)}catch(i){return null}}}async function ut(e,t){return z(e,"POST","/v1/accounts:signUp",U(e,t))}ct.TWITTER_SIGN_IN_METHOD="twitter.com",ct.PROVIDER_ID="twitter.com";class ht{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ce._fromIdTokenResponse(e,n,r),s=dt(n);return new ht({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=dt(n);return new ht({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function dt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ft extends s.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ft.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ft(e,t,n,r)}}function pt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ft._fromErrorAndOperation(e,n,t,r);throw n}))}function mt(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function gt(e,t){const n=(0,s.Ku)(e);await yt(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return B(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=mt(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function vt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ne(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ht._forOperation(e,"link",r)}async function yt(e,t,n){await se(t);const r=!1===e?"provider-already-linked":"no-such-provider";I(mt(t.providerData).has(n)===e,t.auth,r)}async function _t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,i._isFirebaseServerApp)(r.app))return Promise.reject(E(r));const s="reauthenticate";try{const i=await ne(e,pt(r,s,t,e),n);I(i.idToken,r,"internal-error");const o=ee(i.idToken);I(o,r,"internal-error");const{sub:a}=o;return I(e.uid===a,r,"user-mismatch"),ht._forOperation(e,s,i)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&x(r,"user-mismatch"),o}}async function bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r="signIn",s=await pt(e,r,t),o=await ht._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(o.user),o}async function wt(e,t){return bt(Ne(e),t)}async function xt(e,t){const n=(0,s.Ku)(e);return await yt(!1,n,t.providerId),vt(n,t)}async function Tt(e,t){return _t((0,s.Ku)(e),t)}async function St(e,t){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const n=Ne(e),r=await async function(e,t){return z(e,"POST","/v1/accounts:signInWithCustomToken",U(e,t))}(n,{token:t,returnSecureToken:!0}),s=await ht._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}class Et{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ct._fromServerResponse(e,t):"totpInfo"in t?kt._fromServerResponse(e,t):x(e,"internal-error")}}class Ct extends Et{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ct(t)}}class kt extends Et{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new kt(t)}}function It(e,t,n){var r;I((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),I("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function At(e){const t=Ne(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Nt(e,t){await async function(e,t){return B(e,"POST","/v1/accounts:update",U(e,t))}((0,s.Ku)(e),{oobCode:t})}async function Rt(e,t){const n=(0,s.Ku)(e),r=await ze(n,{oobCode:t}),i=r.requestType;switch(I(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(r.mfaInfo,n,"internal-error");default:I(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Et._fromServerResponse(Ne(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Pt(e,t){const n={identifier:t,continueUri:P()?R():"http://localhost"},{signinMethods:r}=await async function(e,t){return B(e,"POST","/v1/accounts:createAuthUri",U(e,t))}((0,s.Ku)(e),n);return r||[]}async function Ot(e,t){const n=(0,s.Ku)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&It(n.auth,r,t);const{email:i}=await async function(e,t){return He(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Dt(e,t,n){const r=(0,s.Ku)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&It(r.auth,i,n);const{email:o}=await async function(e,t){return He(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Mt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,s.Ku)(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ne(i,async function(e,t){return B(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function Lt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ne(e,async function(e,t){return B(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Ft{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class jt extends Ft{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Ut extends Ft{constructor(e,t){super(e,"facebook.com",t)}}class Bt extends jt{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Vt extends Ft{constructor(e,t){super(e,"google.com",t)}}class zt extends jt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Wt(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=ee(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ft(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Ut(s,i);case"github.com":return new Bt(s,i);case"google.com":return new Vt(s,i);case"twitter.com":return new zt(s,i,e.screenName||null);case"custom":case"anonymous":return new Ft(s,null);default:return new Ft(s,r,i)}}(n)}class qt{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new qt("enroll",e,t)}static _fromMfaPendingCredential(e){return new qt("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return qt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return qt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ht{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ne(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Et._fromServerResponse(n,e)));I(r.mfaPendingCredential,n,"internal-error");const s=qt._fromMfaPendingCredential(r.mfaPendingCredential);return new Ht(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await ht._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return I(t.user,n,"internal-error"),ht._forOperation(t.user,t.operationType,o);default:x(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Kt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Et._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Kt(e)}async getSession(){return qt._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ne(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ne(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},B(r,"POST","/v2/accounts/mfaEnrollment:withdraw",U(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const Gt=new WeakMap;const Yt="__sak";class Qt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yt,"1"),this.storage.removeItem(Yt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class $t extends Qt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.ZQ)();return ye(e)||Se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$t.type="LOCAL";const Xt=$t;class Jt extends Qt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jt.type="SESSION";const Zt=Jt;class en{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new en(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}en.receivers=[];class nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=tn("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function rn(){return window}function sn(){return"undefined"!==typeof rn().WorkerGlobalScope&&"function"===typeof rn().importScripts}const on="firebaseLocalStorageDb",an="firebaseLocalStorage",ln="fbase_key";class cn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function un(e,t){return e.transaction([an],t?"readwrite":"readonly").objectStore(an)}function hn(){const e=indexedDB.open(on,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(an,{keyPath:ln})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(an)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(on);return new cn(e).toPromise()}(),t(await hn()))}))}))}async function dn(e,t,n){const r=un(e,!0).put({[ln]:t,value:n});return new cn(r).toPromise()}function fn(e,t){const n=un(e,!0).delete(t);return new cn(n).toPromise()}class pn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=en._getInstance(sn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new nn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hn();return await dn(e,Yt,"1"),await fn(e,Yt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>dn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=un(e,!1).get(t),r=await new cn(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>fn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=un(e,!1).getAll();return new cn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pn.type="LOCAL";const mn=pn;const gn=1e12;class vn{constructor(e){this.auth=e,this.counter=gn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new yn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||gn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||gn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||gn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class yn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;I(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _n=De("rcb"),bn=new D(3e4,6e4);class wn{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=rn().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return I(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&G(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise(((n,r)=>{const i=rn().setTimeout((()=>{r(T(e,"network-request-failed"))}),bn.get());rn()[_n]=()=>{rn().clearTimeout(i),delete rn()[_n];const s=rn().grecaptcha;if(!s||!G(s))return void r(T(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Oe("".concat(Pe.recaptchaV2Script,"?").concat((0,s.Am)({onload:_n,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(T(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=rn().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xn{async load(e){return new vn(e)}clearedOneInstance(){}}const Tn="recaptcha",Sn={theme:"light",type:"image"};class En{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Sn);this.parameters=n,this.type=Tn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(e),this.isInvisible="invisible"===this.parameters.size,I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;I(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xn:new wn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=rn()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){I(P()&&!sn(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await B(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);I(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Je._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function kn(e,t,n){var r;const i=await n.verify();try{let s;if(I("string"===typeof i,e,"argument-error"),I(n.type===Tn,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){I("enroll"===t.type,e,"internal-error");const n=await function(e,t){return B(e,"POST","/v2/accounts/mfaEnrollment:start",U(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{I("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;I(n,e,"missing-multi-factor-info");const o=await function(e,t){return B(e,"POST","/v2/accounts/mfaSignIn:start",U(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return B(e,"POST","/v1/accounts:sendVerificationCode",U(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class In{constructor(e){this.providerId=In.PROVIDER_ID,this.auth=Ne(e)}verifyPhoneNumber(e,t){return kn(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return Je._fromVerification(e,t)}static credentialFromResult(e){const t=e;return In.credentialFromTaggedObject(t)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Je._fromTokenResponse(n,r):null}}function An(e,t){return t?he(t):(I(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}In.PROVIDER_ID="phone",In.PHONE_SIGN_IN_METHOD="phone";class Nn extends Ve{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rn(e){return bt(e.auth,new Nn(e),e.bypassAuthState)}function Pn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),_t(n,new Nn(e),e.bypassAuthState)}async function On(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),vt(n,new Nn(e),e.bypassAuthState)}class Dn{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rn;case"linkViaPopup":case"linkViaRedirect":return On;case"reauthViaPopup":case"reauthViaRedirect":return Pn;default:x(this.auth,"internal-error")}}resolve(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mn=new D(2e3,1e4);class Ln extends Dn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ln.currentPopupAction&&Ln.currentPopupAction.cancel(),Ln.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){N(1===this.filter.length,"Popup operations only handle one event");const e=tn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(T(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(T(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ln.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(T(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Mn.get())};e()}}Ln.currentPopupAction=null;const Fn="pendingRedirect",jn=new Map;class Un extends Dn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=jn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Wn(t),r=zn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}jn.set(this.auth._key(),e)}return this.bypassAuthState||jn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Bn(e,t){return zn(e)._set(Wn(t),"true")}function Vn(e,t){jn.set(e._key(),t)}function zn(e){return he(e._redirectPersistence)}function Wn(e){return pe(Fn,e.config.apiKey,e.name)}function qn(e,t,n){return async function(e,t,n){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r=Ne(e);C(e,t,tt),await r._initializationPromise;const s=An(r,n);return await Bn(s,r),s._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Hn(e,t,n){return async function(e,t,n){const r=(0,s.Ku)(e);if(C(r.auth,t,tt),(0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(E(r.auth));await r.auth._initializationPromise;const o=An(r.auth,n);await Bn(o,r.auth);const a=await Yn(r);return o._openRedirect(r.auth,t,"reauthViaRedirect",a)}(e,t,n)}function Kn(e,t,n){return async function(e,t,n){const r=(0,s.Ku)(e);C(r.auth,t,tt),await r.auth._initializationPromise;const i=An(r.auth,n);await yt(!1,r,t.providerId),await Bn(i,r.auth);const o=await Yn(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Gn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r=Ne(e),s=An(r,t),o=new Un(r,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function Yn(e){const t=tn("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Qn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Xn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(T(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($n(e))}saveEventToCache(e){this.cachedEventUids.add($n(e)),this.lastProcessedEventTime=Date.now()}}function $n(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Xn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Jn(e){return B(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,er=/^https?/;function tr(e){const t=R(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!er.test(n))return!1;if(Zn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const nr=new D(3e4,6e4);function rr(){const e=rn().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ir(e){return new Promise(((t,n)=>{var r,i,s;function o(){rr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rr(),n(T(e,"network-request-failed"))},timeout:nr.get()})}if(null===(i=null===(r=rn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=rn().gapi)||void 0===s?void 0:s.load)){const t=De("iframefcb");return rn()[t]=()=>{gapi.load?o():n(T(e,"network-request-failed"))},Oe("".concat(Pe.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw sr=null,e}))}let sr=null;const or=new D(5e3,15e3),ar="__/auth/iframe",lr="emulator/auth/iframe",cr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hr(e){const t=e.config;I(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?M(t,lr):"https://".concat(e.config.authDomain,"/").concat(ar),r={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=ur.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,s.Am)(r).slice(1))}async function dr(e){const t=await function(e){return sr=sr||ir(e),sr}(e),n=rn().gapi;return I(n,e,"internal-error"),t.open({where:document.body,url:hr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cr,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=T(e,"network-request-failed"),s=rn().setTimeout((()=>{r(i)}),or.get());function o(){rn().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const fr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function mr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},fr),{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,s.ZQ)().toLowerCase();n&&(l=_e(u)?"_blank":n),ve(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Se(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new pr(null);const d=window.open(t||"",l,h);I(d,e,"popup-blocked");try{d.focus()}catch(f){}return new pr(d)}const gr="__/auth/handler",vr="emulator/auth/handler",yr=encodeURIComponent("fac");async function _r(e,t,n,r,o,a){I(e.config.authDomain,e,"auth-domain-config-required"),I(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:i.SDK_VERSION,eventId:o};if(t instanceof tt){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof nt){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const i of Object.keys(c))void 0===c[i]&&delete c[i];const u=await e._getAppCheckToken(),h=u?"#".concat(yr,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(gr);return M(t,vr)}(e),"?").concat((0,s.Am)(c).slice(1)).concat(h)}const br="webStorageSupport";const wr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zt,this._completeRedirectFn=Gn,this._overrideRedirectResult=Vn}async _openPopup(e,t,n,r){var i;N(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return mr(e,await _r(e,t,n,R(),r),tn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){rn().location.href=e}(await _r(e,t,n,R(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(N(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await dr(e),n=new Qn(e);return t.register("authEvent",(t=>{I(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(br,{type:br},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[br];void 0!==i&&t(!!i),x(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Jn(e);for(const r of t)try{if(tr(r))return}catch(n){}x(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ee()||ye()||Se()}};class xr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return A("unexpected MultiFactorSessionType")}}}class Tr extends xr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tr(e)}_finalizeEnroll(e,t,n){return function(e,t){return B(e,"POST","/v2/accounts/mfaEnrollment:finalize",U(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return B(e,"POST","/v2/accounts/mfaSignIn:finalize",U(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Sr{constructor(){}static assertion(e){return Tr._fromCredential(e)}}Sr.FACTOR_ID="phone";var Er="@firebase/auth",Cr="1.7.5";class kr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,s.XA)("authIdTokenMaxAge");var Ir;function Ar(){return window}Pe={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=T("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ir="Browser",(0,i._registerComponent)(new l.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;I(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ir,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ce(Ir)},c=new Ae(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(he);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i._registerComponent)(new l.uA("auth-internal",(e=>(e=>new kr(e))(Ne(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)(Er,Cr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ir)),(0,i.registerVersion)(Er,Cr,"esm2017");async function Nr(e,t,n){var r;const{BuildInfo:i}=Ar();N(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(N(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Se()?o.ibi=i.packageName:we()?o.apn=i.packageName:x(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,_r(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Rr(e){const{cordova:t}=Ar();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Pr=20;class Or extends Qn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Dr(e){const t=await Fr()._get(jr(e));return t&&await Fr()._remove(jr(e)),t}function Mr(e,t){var n,r;const i=function(e){const t=Ur(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ur(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ur(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ur(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?T(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Lr(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Pr;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Fr(){return he(Xt)}function jr(e){return pe("authEvent",e.config.apiKey,e.name)}function Ur(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.I9)(n.join("?"))}const Br=class{constructor(){this._redirectPersistence=Zt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gn,this._overrideRedirectResult=Vn}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Or(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){x(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Ar();I("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),I("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),I("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),jn.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Lr(),postBody:null,tenantId:e.tenantId,error:T(e,"no-auth-event")}}(e,n,r);await function(e,t){return Fr()._set(jr(e),t)}(e,s);const o=await Nr(e,s,t);return async function(e,t,n){const{cordova:r}=Ar();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(T(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),we()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Rr(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ar(),n={};Se()?n.iosBundleId=t.packageName:we()?n.androidPackageName=t.packageName:x(e,"operation-not-supported-in-this-environment"),await Jn(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ar(),s=setTimeout((async()=>{await Dr(e),t.onEvent(Vr())}),500),o=async n=>{clearTimeout(s);const r=await Dr(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Mr(r,n.url)),t.onEvent(i||Vr())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Ar().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Vr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:T("no-auth-event")}}function zr(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return!("file:"!==zr()&&"ionic:"!==zr()&&"capacitor:"!==zr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return(0,s.lT)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/Edge\/\d+/.test(e)}(e)}function Hr(){try{const e=self.localStorage,t=tn();if(e)return e.setItem(t,"1"),e.removeItem(t),!qr()||(0,s.zW)()}catch(e){return Kr()&&(0,s.zW)()}return!1}function Kr(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Gr(){return("http:"===zr()||"https:"===zr()||(0,s.sr)()||Wr())&&!((0,s.lV)()||(0,s.Ll)())&&Hr()&&!Kr()}function Yr(){return Wr()&&"undefined"!==typeof document}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},$r=I,Xr="persistence";async function Jr(e){await e._initializationPromise;const t=Zr(),n=pe(Xr,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Zr(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const ei=I;class ti{constructor(){this.browserResolver=he(wr),this.cordovaResolver=he(Br),this.underlyingResolver=null,this._redirectPersistence=Zt,this._completeRedirectFn=Gn,this._overrideRedirectResult=Vn}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Yr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ei(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Yr()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ni(e){return e.unwrap()}function ri(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new ai(e,function(e,t){var n;const r=(0,s.Ku)(e),i=t;return I(t.customData.operationType,r,"argument-error"),I(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ht._fromError(r,i)}(e,t))}else if(r){const e=ii(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function ii(e){const{_tokenResponse:t}=e instanceof s.g?e.customData:e;if(!t)return null;if(!(e instanceof s.g)&&"temporaryProof"in t&&"phoneNumber"in t)return In.credentialFromResult(e);const n=t.providerId;if(!n||n===c.PASSWORD)return null;let r;switch(n){case c.GOOGLE:r=st;break;case c.FACEBOOK:r=it;break;case c.GITHUB:r=ot;break;case c.TWITTER:r=ct;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?at._create(n,o):$e._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new rt(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.g?r.credentialFromError(e):r.credentialFromResult(e)}function si(e,t){return t.catch((t=>{throw t instanceof s.g&&ri(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,ii(r)),additionalUserInfo:Wt(e),user:li.getOrCreate(n)};var r}))}async function oi(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>si(e,n.confirm(t))}}class ai{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return si(ni(this.auth),this.resolver.resolveSignIn(e))}}class li{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.Ku)(e);return Gt.has(t)||Gt.set(t,Kt._fromUser(t)),Gt.get(t)}(e)}static getOrCreate(e){return li.USER_MAP.has(e)||li.USER_MAP.set(e,new li(e)),li.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return si(this.auth,xt(this._delegate,e))}async linkWithPhoneNumber(e,t){return oi(this.auth,async function(e,t,n){const r=(0,s.Ku)(e);await yt(!1,r,"phone");const i=await kn(r.auth,t,(0,s.Ku)(n));return new Cn(i,(e=>xt(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return si(this.auth,async function(e,t,n){const r=(0,s.Ku)(e);C(r.auth,t,tt);const i=An(r.auth,n);return new Ln(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ti))}async linkWithRedirect(e){return await Jr(Ne(this.auth)),Kn(this._delegate,e,ti)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return si(this.auth,Tt(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return oi(this.auth,async function(e,t,n){const r=(0,s.Ku)(e);if((0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(E(r.auth));const o=await kn(r.auth,t,(0,s.Ku)(n));return new Cn(o,(e=>Tt(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return si(this.auth,async function(e,t,n){const r=(0,s.Ku)(e);if((0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(T(r.auth,"operation-not-supported-in-this-environment"));C(r.auth,t,tt);const o=An(r.auth,n);return new Ln(r.auth,"reauthViaPopup",t,o,r).executeNotNull()}(this._delegate,e,ti))}async reauthenticateWithRedirect(e){return await Jr(Ne(this.auth)),Hn(this._delegate,e,ti)}sendEmailVerification(e){return Ot(this._delegate,e)}async unlink(e){return await gt(this._delegate,e),this}updateEmail(e){return function(e,t){const n=(0,s.Ku)(e);return(0,i._isFirebaseServerApp)(n.auth.app)?Promise.reject(E(n.auth)):Lt(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Lt((0,s.Ku)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=(0,s.Ku)(e);if((0,i._isFirebaseServerApp)(n.auth.app))return Promise.reject(E(n.auth));await vt(n,t)}(this._delegate,e)}updateProfile(e){return Mt(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Dt(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}li.USER_MAP=new WeakMap;const ci=I;class ui{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;ci(n,"invalid-api-key",{appName:e.name}),ci(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?ti:void 0;this._delegate=t.initialize({options:{persistence:di(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(v),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?li.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){je(this._delegate,e,t)}applyActionCode(e){return Nt(this._delegate,e)}checkActionCode(e){return Rt(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ze((0,s.Ku)(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&At(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return si(this._delegate,async function(e,t,n){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r=Ne(e),s=Fe(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ut),o=await s.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&At(e),t})),a=await ht._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Pt(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ze.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){ci(Gr(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ne(e)._initializationPromise,Gn(e,t,!1)}(this._delegate,ti);return e?si(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ne(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=hi(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=hi(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ne(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){I(t.handleCodeInApp,r,"argument-error"),t&&It(r,e,t)}(i,n),await Fe(r,i,"getOobCode",Ge)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ne(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&It(r,i,n),await Fe(r,i,"getOobCode",Ke)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){$r(Object.values(Qr).includes(t),e,"invalid-persistence-type"),(0,s.lV)()?$r(t!==Qr.SESSION,e,"unsupported-persistence-type"):(0,s.Ll)()?$r(t===Qr.NONE,e,"unsupported-persistence-type"):Kr()?$r(t===Qr.NONE||t===Qr.LOCAL&&(0,s.zW)(),e,"unsupported-persistence-type"):$r(t===Qr.NONE||Hr(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Qr.SESSION:t=Zt;break;case Qr.LOCAL:t=await he(mn)._isAvailable()?mn:Xt;break;case Qr.NONE:t=fe;break;default:return x("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return si(this._delegate,async function(e){var t;if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const n=Ne(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ht({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ut(n,{returnSecureToken:!0}),s=await ht._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}(this._delegate))}signInWithCredential(e){return si(this._delegate,wt(this._delegate,e))}signInWithCustomToken(e){return si(this._delegate,St(this._delegate,e))}signInWithEmailAndPassword(e,t){return si(this._delegate,function(e,t,n){return(0,i._isFirebaseServerApp)(e.app)?Promise.reject(E(e)):wt((0,s.Ku)(e),et.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&At(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return si(this._delegate,async function(e,t,n){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r=(0,s.Ku)(e),o=et.credentialWithLink(t,n||R());return I(o._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),wt(r,o)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return oi(this._delegate,async function(e,t,n){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(E(e));const r=Ne(e),o=await kn(r,t,(0,s.Ku)(n));return new Cn(o,(e=>wt(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return ci(Gr(),this._delegate,"operation-not-supported-in-this-environment"),si(this._delegate,async function(e,t,n){if((0,i._isFirebaseServerApp)(e.app))return Promise.reject(T(e,"operation-not-supported-in-this-environment"));const r=Ne(e);C(e,t,tt);const s=An(r,n);return new Ln(r,"signInViaPopup",t,s).executeNotNull()}(this._delegate,e,ti))}async signInWithRedirect(e){return ci(Gr(),this._delegate,"operation-not-supported-in-this-environment"),await Jr(this._delegate),qn(this._delegate,e,ti)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Rt((0,s.Ku)(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function hi(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&li.getOrCreate(e)),error:t,complete:n}}function di(e,t){const n=function(e,t){const n=Zr();if(!n)return[];const r=pe(Xr,e,t);switch(n.getItem(r)){case Qr.NONE:return[fe];case Qr.LOCAL:return[mn,Zt];case Qr.SESSION:return[Zt];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(mn)||n.push(mn),"undefined"!==typeof window)for(const r of[Xt,Zt])n.includes(r)||n.push(r);return n.includes(fe)||n.push(fe),n}ui.Persistence=Qr;class fi{constructor(){this.providerId="phone",this._delegate=new In(ni(r.A.auth()))}static credential(e,t){return In.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}fi.PHONE_SIGN_IN_METHOD=In.PHONE_SIGN_IN_METHOD,fi.PROVIDER_ID=In.PROVIDER_ID;const pi=I;class mi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.A.app();var i;pi(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new En(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var gi;(gi=r.A).INTERNAL.registerComponent(new l.uA("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ui(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:u,PASSWORD_RESET:h,RECOVER_EMAIL:d,REVERT_SECOND_FACTOR_ADDITION:f,VERIFY_AND_CHANGE_EMAIL:p,VERIFY_EMAIL:m}},EmailAuthProvider:et,FacebookAuthProvider:it,GithubAuthProvider:ot,GoogleAuthProvider:st,OAuthProvider:rt,SAMLAuthProvider:lt,PhoneAuthProvider:fi,PhoneMultiFactorGenerator:Sr,RecaptchaVerifier:mi,TwitterAuthProvider:ct,Auth:ui,AuthCredential:Ve,Error:s.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),gi.registerVersion("@firebase/auth-compat","0.5.10")},5855:(e,t,n)=>{"use strict";var r=n(8984),i=n(7253),s=n(913),o=n(9061),a=n(4624);const l="@firebase/database",c="1.0.6";let u="";function h(e){u=e}class d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,o.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d(t)}}catch(t){}return new f},m=p("localStorage"),g=p("sessionStorage"),v=new a.Vy("@firebase/database"),y=function(){let e=1;return function(){return e++}}(),_=function(e){const t=(0,o.kj)(e),n=new o.gz;n.update(t);const r=n.digest();return o.K3.encodeByteArray(r)},b=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=b.apply(null,n):e+="object"===typeof n?(0,o.As)(n):n,e+=" "}return e};let w=null,x=!0;const T=function(e,t){(0,o.vA)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(v.logLevel=a.$b.VERBOSE,w=v.log.bind(v),t&&g.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,g.remove("logging_enabled"))},S=function(){if(!0===x&&(x=!1,null===w&&!0===g.get("logging_enabled")&&T(!0)),w){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=b.apply(null,t);w(r)}},E=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];S(e,...n)}},C=function(){const e="FIREBASE INTERNAL ERROR: "+b(...arguments);v.error(e)},k=function(){const e="FIREBASE FATAL ERROR: ".concat(b(...arguments));throw v.error(e),new Error(e)},I=function(){const e="FIREBASE WARNING: "+b(...arguments);v.warn(e)},A=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},N="[MIN_NAME]",R="[MAX_NAME]",P=function(e,t){if(e===t)return 0;if(e===N||t===R)return-1;if(t===N||e===R)return 1;{const n=B(e),r=B(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},O=function(e,t){return e===t?0:e<t?-1:1},D=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.As)(t))},M=function(e){if("object"!==typeof e||null===e)return(0,o.As)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,o.As)(t[r]),n+=":",n+=M(e[t[r]]);return n+="}",n},L=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function F(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const j=function(e){(0,o.vA)(!A(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const l=[];for(a=52;a;a-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);l.push(n?1:0),l.reverse();const c=l.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(c.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const U=new RegExp("^-?(0*)\\d{1,10}$"),B=function(e){if(U.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},V=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw I("Exception was thrown by user callback.",e),t}),Math.floor(0))}},z=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class W{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){I('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class q{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(S("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(e)}}class H{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}H.OWNER="owner";const K="5",G=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y="ac",Q="websocket",$="long_polling";class X{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=m.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&m.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function J(e,t,n){let r;if((0,o.vA)("string"===typeof t,"typeof type must == string"),(0,o.vA)("object"===typeof n,"typeof params must == object"),t===Q)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return F(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Z{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,o.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,o.A4)(this.counters_)}}const ee={},te={};function ne(e){const t=e.toString();return ee[t]||(ee[t]=new Z),ee[t]}class re{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&V((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ie="start";class se{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(e),this.stats_=ne(t),this.urlFn=e=>(this.appCheckToken&&(e[Y]=this.appCheckToken),J(t,$,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new re(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,o.$g)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new oe((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ie)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ie]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=K,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Y]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&G.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){se.forceAllow_=!0}static forceDisallow(){se.forceDisallow_=!0}static isAvailable(){return!(0,o.$g)()&&(!!se.forceAllow_||!se.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,o.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,o.KA)(t),r=L(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,o.$g)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,o.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oe{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oe.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){S("frame writing exception"),i.stack&&S(i.stack),S(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||S("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){(0,o.$g)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{S("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let ae=null;"undefined"!==typeof MozWebSocket?ae=MozWebSocket:"undefined"!==typeof WebSocket&&(ae=WebSocket);class le{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=ne(t),this.connURL=le.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=K,!(0,o.$g)()&&"undefined"!==typeof location&&location.hostname&&G.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Y]=r),i&&(s.p=i),J(e,Q,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{let e;if((0,o.$g)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(K,"/").concat(u,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCC_IdWcuvEAVKifvcVqI2bPOsR-uW9OYc",REACT_APP_FIREBASE_APP_ID:"1:677211500256:web:1f0197a4521b877da42a85",REACT_APP_FIREBASE_AUTH_DOMAIN:"wondrlab-e27fc.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://wondrlab-e27fc-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-SXD2EN7X6W",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"677211500256",REACT_APP_FIREBASE_PROJECT_ID:"wondrlab-e27fc",REACT_APP_FIREBASE_STORAGE_BUCKET:"wondrlab-e27fc.firebasestorage.app",REACT_APP_GOOGLE_ANALYTICS:"",REACT_APP_GOOGLE_TAG_MANAGER:""},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ae(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){le.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ae&&!le.forceDisallow_}static previouslyFailed(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")}markConnectionHealthy(){m.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,o.$L)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,o.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,o.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=L(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}le.responsesRequiredToBeHealthy=2,le.healthyTimeout=3e4;class ce{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[se,le]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=le&&le.isAvailable();let n=t&&!le.previouslyFailed();if(e.webSocketOnly&&(t||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[le];else{const e=this.transports_=[];for(const t of ce.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ce.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ce.globalTransportInitialized_=!1;class ue{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new ce(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=z((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=D("t",e),n=D("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=D("t",e),n=D("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=D("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?C("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),K!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),z((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class he{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class de{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,o.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,o.vA)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class fe extends de{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.jZ)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new fe}getInitialEvent(e){return(0,o.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const pe=32,me=768;class ge{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ve(){return new ge("")}function ye(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function _e(e){return e.pieces_.length-e.pieceNum_}function be(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ge(e.pieces_,t)}function we(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Te(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ge(t,0)}function Se(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ge)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ge(n,0)}function Ee(e){return e.pieceNum_>=e.pieces_.length}function Ce(e,t){const n=ye(e),r=ye(t);if(null===n)return t;if(n===r)return Ce(be(e),be(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ke(e,t){const n=xe(e,0),r=xe(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=P(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Ie(e,t){if(_e(e)!==_e(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ae(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(_e(e)>_e(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Ne{constructor(e,t){this.errorPrefix_=t,this.parts_=xe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.OE)(this.parts_[n]);Re(this)}}function Re(e){if(e.byteLength_>me)throw new Error(e.errorPrefix_+"has a key path longer than "+me+" bytes ("+e.byteLength_+").");if(e.parts_.length>pe)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pe+") or object contains a cycle "+Pe(e))}function Pe(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Oe extends de{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Oe}getInitialEvent(e){return(0,o.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const De=1e3;class Me extends he{constructor(e,t,n,r,i,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Me.nextPersistentConnectionId_++,this.log_=E("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=De,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,o.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Oe.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&fe.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.As)(i)),(0,o.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new o.cY,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.vA)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Me.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,o.gR)(e,"w")){const n=(0,o.yw)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();I("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,o.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,o.Cv)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,o.As)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):C("Unrecognized action received from server: "+(0,o.As)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,o.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=De,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=De,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=De),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Me.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(e){(0,o.vA)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?S("getToken() completed but was canceled"):(S("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ue(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{I(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(C){this.log_("Failed to get token: "+C),s||(this.repoInfo_.nodeAdmin&&I(C),l())}}}interrupt(e){S("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){S("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.Im)(this.interruptReasons_)&&(this.reconnectDelay_=De,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>M(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ge(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){S("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){S("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,o.$g)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+u.replace(/\./g,"-")]=1,(0,o.jZ)()?e["framework.cordova"]=1:(0,o.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fe.getInstance().currentlyOnline();return(0,o.Im)(this.interruptReasons_)&&e}}Me.nextPersistentConnectionId_=0,Me.nextConnectionId_=0;class Le{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Le(e,t)}}class Fe{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Le(N,e),r=new Le(N,t);return 0!==this.compare(n,r)}minPost(){return Le.MIN}}let je;class Ue extends Fe{static get __EMPTY_NODE(){return je}static set __EMPTY_NODE(e){je=e}compare(e,t){return P(e.name,t.name)}isDefinedOn(e){throw(0,o.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(R,je)}makePost(e,t){return(0,o.vA)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Le(e,je)}toString(){return".key"}}const Be=new Ue;class Ve{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ze{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ze.RED,this.left=null!=r?r:We.EMPTY_NODE,this.right=null!=i?i:We.EMPTY_NODE}copy(e,t,n,r,i){return new ze(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return We.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return We.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ze.RED=!0,ze.BLACK=!1;class We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new We(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ze.BLACK,null,null))}remove(e){return new We(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ze.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ve(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ve(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ve(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ve(this.root_,null,this.comparator_,!0,e)}}function qe(e,t){return P(e.name,t.name)}function He(e,t){return P(e,t)}let Ke;We.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ze(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ge=function(e){return"number"===typeof e?"number:"+j(e):"string:"+e},Ye=function(e){if(e.isLeafNode()){const t=e.val();(0,o.vA)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.gR)(t,".sv"),"Priority must be a string or number.")}else(0,o.vA)(e===Ke||e.isEmpty(),"priority of unexpected type.");(0,o.vA)(e===Ke||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Qe,$e,Xe;class Je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,o.vA)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ye(this.priorityNode_)}static set __childrenNodeConstructor(e){Qe=e}static get __childrenNodeConstructor(){return Qe}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Je(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ee(e)?this:".priority"===ye(e)?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ye(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,o.vA)(".priority"!==n||1===_e(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Je.__childrenNodeConstructor.EMPTY_NODE.updateChild(be(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ge(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?j(this.value_):this.value_,this.lazyHash_=_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Je.__childrenNodeConstructor?-1:((0,o.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Je.VALUE_TYPE_ORDER.indexOf(t),i=Je.VALUE_TYPE_ORDER.indexOf(n);return(0,o.vA)(r>=0,"Unknown leaf type: "+t),(0,o.vA)(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Je.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ze=new class extends Fe{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?P(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(R,new Je("[PRIORITY-POST]",Xe))}makePost(e,t){const n=$e(e);return new Le(t,new Je("[PRIORITY-POST]",n))}toString(){return".priority"}},et=Math.log(2);class tt{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/et,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nt=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new ze(a,o.node,ze.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new ze(a,o.node,ze.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new ze(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,ze.BLACK):(a(r,ze.BLACK),a(r,ze.RED))}return s}(new tt(e.length));return new We(r||t,s)};let rt;const it={};class st{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,o.vA)(it&&Ze,"ChildrenNode.ts has not been loaded"),rt=rt||new st({".priority":it},{".priority":Ze}),rt}get(e){const t=(0,o.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof We?t:null}hasIndex(e){return(0,o.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,o.vA)(e!==Be,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Le.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?nt(n,e.getCompare()):it;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=s,new st(u,c)}addToIndexes(e,t){const n=(0,o.kH)(this.indexes_,((n,r)=>{const i=(0,o.yw)(this.indexSet_,r);if((0,o.vA)(i,"Missing index implementation for "+r),n===it){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Le.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),nt(n,i.getCompare())}return it}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Le(e.name,r))),i.insert(e,e.node)}}));return new st(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,o.kH)(this.indexes_,(n=>{if(n===it)return n;{const r=t.get(e.name);return r?n.remove(new Le(e.name,r)):n}}));return new st(n,this.indexSet_)}}let ot;class at{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ye(this.priorityNode_),this.children_.isEmpty()&&(0,o.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ot||(ot=new at(new We(He),null,st.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ot}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ot:t}}getChild(e){const t=ye(e);return null===t?this:this.getImmediateChild(t).getChild(be(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,o.vA)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Le(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?ot:this.priorityNode_;return new at(r,s,i)}}updateChild(e,t){const n=ye(e);if(null===n)return t;{(0,o.vA)(".priority"!==ye(e)||1===_e(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(be(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Ze,((s,o)=>{t[s]=o.val(e),n++,i&&at.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ge(this.getPriority().val())+":"),this.forEachChild(Ze,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Le(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Le.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Le.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lt?-1:0}withIndex(e){if(e===Be||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Be||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ze),n=t.getIterator(Ze);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Be?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const lt=new class extends at{constructor(){super(new We(He),at.EMPTY_NODE,st.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Le,{MIN:{value:new Le(N,at.EMPTY_NODE)},MAX:{value:new Le(R,lt)}}),Ue.__EMPTY_NODE=at.EMPTY_NODE,Je.__childrenNodeConstructor=at,Ke=lt,function(e){Xe=e}(lt);const ct=!0;function ut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return at.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.vA)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Je(e,ut(t))}if(e instanceof Array||!ct){let n=at.EMPTY_NODE;return F(e,((t,r)=>{if((0,o.gR)(e,t)&&"."!==t.substring(0,1)){const e=ut(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(ut(t))}{const n=[];let r=!1;if(F(e,((e,t)=>{if("."!==e.substring(0,1)){const i=ut(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Le(e,i)))}})),0===n.length)return at.EMPTY_NODE;const i=nt(n,qe,(e=>e.name),He);if(r){const e=nt(n,Ze.getCompare());return new at(i,ut(t),new st({".priority":e},{".priority":Ze}))}return new at(i,ut(t),st.Default)}}!function(e){$e=e}(ut);class ht extends Fe{constructor(e){super(),this.indexPath_=e,(0,o.vA)(!Ee(e)&&".priority"!==ye(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?P(e.name,t.name):i}makePost(e,t){const n=ut(e),r=at.EMPTY_NODE.updateChild(this.indexPath_,n);return new Le(t,r)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,lt);return new Le(R,e)}toString(){return xe(this.indexPath_,0).join("/")}}const dt=new class extends Fe{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?P(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){const n=ut(e);return new Le(t,n)}toString(){return".value"}};function ft(e){return{type:"value",snapshotNode:e}}function pt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class vt{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){(0,o.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(mt(t,a)):(0,o.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pt(t,n)):s.trackChildChange(gt(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ze,((e,r)=>{t.hasChild(e)||n.trackChildChange(mt(e,r))})),t.isLeafNode()||t.forEachChild(Ze,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gt(t,r,i))}else n.trackChildChange(pt(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?at.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class yt{constructor(e){this.indexedFilter_=new vt(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yt.getStartPost_(e),this.endPost_=yt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Le(t,n))||(n=at.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=at.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(at.EMPTY_NODE);const i=this;return t.forEachChild(Ze,((e,t)=>{i.matches(new Le(e,t))||(r=r.updateImmediateChild(e,at.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _t{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new yt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Le(t,n))||(n=at.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=at.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=at.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(at.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,at.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;(0,o.vA)(a.numChildren()===this.limit_,"");const l=new Le(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const e=a.getImmediateChild(t);let o=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=o&&(o.name===t||a.hasChild(o.name));)o=r.getChildAfterChild(this.index_,o,this.reverse_);const h=null==o?1:s(o,l);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(gt(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(mt(t,e));const n=a.updateImmediateChild(t,at.EMPTY_NODE);return null!=o&&this.rangedFilter_.matches(o)?(null!=i&&i.trackChildChange(pt(o.name,o.node)),n.updateImmediateChild(o.name,o.node)):n}}return n.isEmpty()?e:u&&s(c,l)>=0?(null!=i&&(i.trackChildChange(mt(c.name,c.node)),i.trackChildChange(pt(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,at.EMPTY_NODE)):e}}class bt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ze}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,o.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,o.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,o.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,o.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,o.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ze}copy(){const e=new bt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wt(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xt(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Tt(e,t){const n=e.copy();return n.index_=t,n}function St(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ze?n="$priority":e.index_===dt?n="$value":e.index_===Be?n="$key":((0,o.vA)(e.index_ instanceof ht,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,o.As)(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=(0,o.As)(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+(0,o.As)(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=(0,o.As)(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+(0,o.As)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Et(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ze&&(t.i=e.index_.toString()),t}class Ct extends he{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=E("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,o.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Ct.getListenId_(e,n),a={};this.listens_[s]=a;const l=St(e._queryParams);this.restRequest_(i+".json",l,((e,t)=>{let l=t;if(404===e&&(l=null,e=null),null===e&&this.onDataUpdate_(i,l,!1,n),(0,o.yw)(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ct.getListenId_(e,t);delete this.listens_[n]}get(e){const t=St(e._queryParams),n=e._path.toString(),r=new o.cY;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,o.Am)(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let t=null;if(l.status>=200&&l.status<300){try{t=(0,o.$L)(l.responseText)}catch(e){I("Failed to parse JSON response for "+a+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&I("Got unsuccessful REST response for "+a+" Status: "+l.status),n(l.status);n=null}},l.open("GET",a,!0),l.send()}))}}class kt{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function It(){return{value:null,children:new Map}}function At(e,t,n){if(Ee(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ye(t);e.children.has(r)||e.children.set(r,It());At(e.children.get(r),t=be(t),n)}}function Nt(e,t){if(Ee(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Ze,((t,n)=>{At(e,new ge(t),n)})),Nt(e,t)}}if(e.children.size>0){const n=ye(t);if(t=be(t),e.children.has(n)){Nt(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Rt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Rt(r,new ge(t.toString()+"/"+e),n)}))}class Pt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&F(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ot{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pt(e);const n=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;F(e,((e,r)=>{r>0&&(0,o.gR)(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Dt;function Mt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Dt||(Dt={}));class Lt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Dt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ee(this.path)){if(null!=this.affectedTree.value)return(0,o.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ge(e));return new Lt(ve(),t,this.revert)}}return(0,o.vA)(ye(this.path)===e,"operationForChild called for unrelated child."),new Lt(be(this.path),this.affectedTree,this.revert)}}class Ft{constructor(e,t){this.source=e,this.path=t,this.type=Dt.LISTEN_COMPLETE}operationForChild(e){return Ee(this.path)?new Ft(this.source,ve()):new Ft(this.source,be(this.path))}}class jt{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Dt.OVERWRITE}operationForChild(e){return Ee(this.path)?new jt(this.source,ve(),this.snap.getImmediateChild(e)):new jt(this.source,be(this.path),this.snap)}}class Ut{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Dt.MERGE}operationForChild(e){if(Ee(this.path)){const t=this.children.subtree(new ge(e));return t.isEmpty()?null:t.value?new jt(this.source,ve(),t.value):new Ut(this.source,ve(),t)}return(0,o.vA)(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ut(this.source,be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bt{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;const t=ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Vt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function zt(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.Hk)("Should only compare child_ events.");const r=new Le(t.childName,t.snapshotNode),i=new Le(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Wt(e,t){return{eventCache:e,serverCache:t}}function qt(e,t,n,r){return Wt(new Bt(t,n,r),e.serverCache)}function Ht(e,t,n,r){return Wt(e.eventCache,new Bt(t,n,r))}function Kt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Gt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Yt;class Qt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Yt||(Yt=new We(O)),Yt);this.value=e,this.children=t}static fromObject(e){let t=new Qt(null);return F(e,((e,n)=>{t=t.set(new ge(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ve(),value:this.value};if(Ee(e))return null;{const n=ye(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(be(e),t);if(null!=i){return{path:Se(new ge(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Ee(e))return this;{const t=ye(e),n=this.children.get(t);return null!==n?n.subtree(be(e)):new Qt(null)}}set(e,t){if(Ee(e))return new Qt(t,this.children);{const n=ye(e),r=(this.children.get(n)||new Qt(null)).set(be(e),t),i=this.children.insert(n,r);return new Qt(this.value,i)}}remove(e){if(Ee(e))return this.children.isEmpty()?new Qt(null):new Qt(null,this.children);{const t=ye(e),n=this.children.get(t);if(n){const r=n.remove(be(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Qt(null):new Qt(this.value,i)}return this}}get(e){if(Ee(e))return this.value;{const t=ye(e),n=this.children.get(t);return n?n.get(be(e)):null}}setTree(e,t){if(Ee(e))return t;{const n=ye(e),r=(this.children.get(n)||new Qt(null)).setTree(be(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Qt(this.value,i)}}fold(e){return this.fold_(ve(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Se(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ve(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Ee(e))return null;{const r=ye(e),i=this.children.get(r);return i?i.findOnPath_(be(e),Se(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ve(),t)}foreachOnPath_(e,t,n){if(Ee(e))return this;{this.value&&n(t,this.value);const r=ye(e),i=this.children.get(r);return i?i.foreachOnPath_(be(e),Se(t,r),n):new Qt(null)}}foreach(e){this.foreach_(ve(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Se(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class $t{constructor(e){this.writeTree_=e}static empty(){return new $t(new Qt(null))}}function Xt(e,t,n){if(Ee(t))return new $t(new Qt(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Ce(i,t);return s=s.updateChild(o,n),new $t(e.writeTree_.set(i,s))}{const r=new Qt(n),i=e.writeTree_.setTree(t,r);return new $t(i)}}}function Jt(e,t,n){let r=e;return F(n,((e,n)=>{r=Xt(r,Se(t,e),n)})),r}function Zt(e,t){if(Ee(t))return $t.empty();{const n=e.writeTree_.setTree(t,new Qt(null));return new $t(n)}}function en(e,t){return null!=tn(e,t)}function tn(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ce(n.path,t)):null}function nn(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ze,((e,n)=>{t.push(new Le(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Le(e,n.value))})),t}function rn(e,t){if(Ee(t))return e;{const n=tn(e,t);return new $t(null!=n?new Qt(n):e.writeTree_.subtree(t))}}function sn(e){return e.writeTree_.isEmpty()}function on(e,t){return an(ve(),e.writeTree_,t)}function an(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?((0,o.vA)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=an(Se(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Se(e,".priority"),r)),n}}function ln(e,t){return wn(t,e)}function cn(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,o.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&un(t,r.path)?i=!1:Ae(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=dn(e.allWrites,hn,ve()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Zt(e.visibleWrites,r.path);else{F(r.children,(t=>{e.visibleWrites=Zt(e.visibleWrites,Se(r.path,t))}))}return!0}return!1}function un(e,t){if(e.snap)return Ae(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ae(Se(e.path,n),t))return!0;return!1}function hn(e){return e.visible}function dn(e,t,n){let r=$t.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Ae(n,e)?(t=Ce(n,e),r=Xt(r,t,s.snap)):Ae(e,n)&&(t=Ce(e,n),r=Xt(r,ve(),s.snap.getChild(t)));else{if(!s.children)throw(0,o.Hk)("WriteRecord should have .snap or .children");if(Ae(n,e))t=Ce(n,e),r=Jt(r,t,s.children);else if(Ae(e,n))if(t=Ce(e,n),Ee(t))r=Jt(r,ve(),s.children);else{const e=(0,o.yw)(s.children,ye(t));if(e){const n=e.getChild(be(t));r=Xt(r,ve(),n)}}}}}return r}function fn(e,t,n,r,i){if(r||i){const s=rn(e.visibleWrites,t);if(!i&&sn(s))return n;if(i||null!=n||en(s,ve())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ae(e.path,t)||Ae(t,e.path))};return on(dn(e.allWrites,s,t),n||at.EMPTY_NODE)}return null}{const r=tn(e.visibleWrites,t);if(null!=r)return r;{const r=rn(e.visibleWrites,t);if(sn(r))return n;if(null!=n||en(r,ve())){return on(r,n||at.EMPTY_NODE)}return null}}}function pn(e,t,n,r){return fn(e.writeTree,e.treePath,t,n,r)}function mn(e,t){return function(e,t,n){let r=at.EMPTY_NODE;const i=tn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ze,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=rn(e.visibleWrites,t);return n.forEachChild(Ze,((e,t)=>{const n=on(rn(i,new ge(e)),t);r=r.updateImmediateChild(e,n)})),nn(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return nn(rn(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function gn(e,t,n,r){return function(e,t,n,r,i){(0,o.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Se(t,n);if(en(e.visibleWrites,s))return null;{const t=rn(e.visibleWrites,s);return sn(t)?i.getChild(n):on(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function vn(e,t){return function(e,t){return tn(e.visibleWrites,t)}(e.writeTree,Se(e.treePath,t))}function yn(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=rn(e.visibleWrites,t),c=tn(l,ve());if(null!=c)a=c;else{if(null==n)return[];a=on(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function _n(e,t,n){return function(e,t,n,r){const i=Se(t,n),s=tn(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return on(rn(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function bn(e,t){return wn(Se(e.treePath,t),e.writeTree)}function wn(e,t){return{treePath:e,writeTree:t}}class xn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,o.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.vA)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,pt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.Hk)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Tn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Sn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Bt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gt(this.viewCache_),i=yn(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function En(e,t,n,r,i){const s=new xn;let a,l;if(n.type===Dt.OVERWRITE){const c=n;c.source.fromUser?a=In(e,t,c.path,c.snap,r,i,s):((0,o.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered()&&!Ee(c.path),a=kn(e,t,c.path,c.snap,r,i,l,s))}else if(n.type===Dt.MERGE){const c=n;c.source.fromUser?a=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=Se(n,r);An(t,ye(c))&&(a=In(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=Se(n,r);An(t,ye(c))||(a=In(e,a,c,l,i,s,o))})),a}(e,t,c.path,c.children,r,i,s):((0,o.vA)(c.source.fromServer,"Unknown source."),l=c.source.tagged||t.serverCache.isFiltered(),a=Rn(e,t,c.path,c.children,r,i,l,s))}else if(n.type===Dt.ACK_USER_WRITE){const l=n;a=l.revert?function(e,t,n,r,i,s){let a;if(null!=vn(r,n))return t;{const l=new Sn(r,t,i),c=t.eventCache.getNode();let u;if(Ee(n)||".priority"===ye(n)){let n;if(t.serverCache.isFullyInitialized())n=pn(r,Gt(t));else{const e=t.serverCache.getNode();(0,o.vA)(e instanceof at,"serverChildren would be complete if leaf node"),n=mn(r,e)}u=e.filter.updateFullNode(c,n,s)}else{const i=ye(n);let o=_n(r,i,t.serverCache);null==o&&t.serverCache.isCompleteForChild(i)&&(o=c.getImmediateChild(i)),u=null!=o?e.filter.updateChild(c,i,o,be(n),l,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,at.EMPTY_NODE,be(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=pn(r,Gt(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=vn(r,ve()),qt(t,u,a,e.filter.filtersNodes())}}(e,t,l.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=vn(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Ee(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return kn(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Ee(n)){let r=new Qt(null);return l.getNode().forEachChild(Be,((e,t)=>{r=r.set(new ge(e),t)})),Rn(e,t,n,r,i,s,a,o)}return t}{let c=new Qt(null);return r.foreach(((e,t)=>{const r=Se(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Rn(e,t,n,c,i,s,a,o)}}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Dt.LISTEN_COMPLETE)throw(0,o.Hk)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,o=Ht(t,s.getNode(),s.isFullyInitialized()||Ee(n),s.isFiltered());return Cn(e,o,n,r,Tn,i)}(e,t,n.path,r,s)}const c=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Kt(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ft(Kt(t)))}}(t,a,c),{viewCache:a,changes:c}}function Cn(e,t,n,r,i,s){const a=t.eventCache;if(null!=vn(r,n))return t;{let l,c;if(Ee(n))if((0,o.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Gt(t),i=mn(r,n instanceof at?n:at.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=pn(r,Gt(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=ye(n);if(".priority"===u){(0,o.vA)(1===_e(n),"Can't have a priority with additional path components");const i=a.getNode();c=t.serverCache.getNode();const s=gn(r,n,i,c);l=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const o=be(n);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=gn(r,n,a.getNode(),c);h=null!=e?a.getNode().getImmediateChild(u).updateChild(o,e):a.getNode().getImmediateChild(u)}else h=_n(r,u,t.serverCache);l=null!=h?e.filter.updateChild(a.getNode(),u,h,o,i,s):a.getNode()}}return qt(t,l,a.isFullyInitialized()||Ee(n),e.filter.filtersNodes())}}function kn(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Ee(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ye(n);if(!l.isCompleteForPath(n)&&_e(n)>1)return t;const i=be(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Tn,null)}const h=Ht(t,c,l.isFullyInitialized()||Ee(n),u.filtersNodes());return Cn(e,h,n,i,new Sn(i,h,s),a)}function In(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Sn(i,t,s);if(Ee(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=qt(t,c,!0,e.filter.filtersNodes());else{const i=ye(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=qt(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=be(n),c=a.getNode().getImmediateChild(i);let h;if(Ee(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===we(s)&&e.getChild(Te(s)).isEmpty()?e:e.updateChild(s,r):at.EMPTY_NODE}if(c.equals(h))l=t;else{l=qt(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function An(e,t){return e.eventCache.isCompleteForChild(t)}function Nn(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Rn(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Ee(n)?r:new Qt(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Nn(0,t.serverCache.getNode().getImmediateChild(n),r);c=kn(e,c,new ge(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Nn(0,t.serverCache.getNode().getImmediateChild(n),r);c=kn(e,c,new ge(n),l,i,s,o,a)}})),c}class Pn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new vt(n.getIndex()),i=(s=n).loadsAllData()?new vt(s.getIndex()):s.hasLimit()?new _t(s):new yt(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(at.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(at.EMPTY_NODE,a.getNode(),null),u=new Bt(l,o.isFullyInitialized(),r.filtersNodes()),h=new Bt(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Wt(h,u),this.eventGenerator_=new Vt(this.query_)}get query(){return this.query_}}function On(e,t){const n=Gt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ee(t)&&!n.getImmediateChild(ye(t)).isEmpty())?n.getChild(t):null}function Dn(e){return 0===e.eventRegistrations_.length}function Mn(e,t,n){const r=[];if(n){(0,o.vA)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Ln(e,t,n,r){t.type===Dt.MERGE&&null!==t.source.queryId&&((0,o.vA)(Gt(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.vA)(Kt(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=En(e.processor_,i,t,n,r);var a,l;return a=e.processor_,l=s.viewCache,(0,o.vA)(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,o.vA)(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,o.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Fn(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Fn(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),zt(e,i,"child_removed",t,r,n),zt(e,i,"child_added",t,r,n),zt(e,i,"child_moved",s,r,n),zt(e,i,"child_changed",t,r,n),zt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let jn,Un;class Bn{constructor(){this.views=new Map}}function Vn(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,o.vA)(null!=s,"SyncTree gave us an op for an invalid query."),Ln(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Ln(s,t,n,r));return i}}function zn(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=pn(n,i?r:null),s=!1;e?s=!0:r instanceof at?(e=mn(n,r),s=!1):(e=at.EMPTY_NODE,s=!1);const o=Wt(new Bt(e,s,!1),new Bt(r,i,!1));return new Pn(t,o)}return o}function Wn(e,t,n,r,i,s){const o=zn(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Ze,((e,t)=>{r.push(pt(e,t))}));return n.isFullyInitialized()&&r.push(ft(n.getNode())),Fn(e,r,n.getNode(),t)}(o,n)}function qn(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const l=Qn(e);if("default"===i)for(const[o,c]of e.views.entries())a=a.concat(Mn(c,n,r)),Dn(c)&&(e.views.delete(o),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(Mn(t,n,r)),Dn(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return l&&!Qn(e)&&s.push(new((0,o.vA)(jn,"Reference.ts has not been loaded"),jn)(t._repo,t._path)),{removed:s,events:a}}function Hn(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Kn(e,t){let n=null;for(const r of e.views.values())n=n||On(r,t);return n}function Gn(e,t){if(t._queryParams.loadsAllData())return $n(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Yn(e,t){return null!=Gn(e,t)}function Qn(e){return null!=$n(e)}function $n(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Xn=1;class Jn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qt(null),this.pendingWriteTree_={visibleWrites:$t.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zn(e,t,n,r,i){return function(e,t,n,r,i){(0,o.vA)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?lr(e,new jt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function er(e,t,n,r){!function(e,t,n,r){(0,o.vA)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Jt(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Qt.fromObject(n);return lr(e,new Ut({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(cn(e.pendingWriteTree_,t)){let t=new Qt(null);return null!=r.snap?t=t.set(ve(),!0):F(r.children,(e=>{t=t.set(new ge(e),!0)})),lr(e,new Lt(r.path,t,n))}return[]}function nr(e,t,n){return lr(e,new jt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Yn(o,t))){const l=qn(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Qn(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Qn(t)){return[$n(t)]}{let e=[];return t&&(e=Hn(t)),F(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=hr(e,r);e.listenProvider_.startListening(vr(i),dr(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(vr(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(fr(t));e.listenProvider_.stopListening(vr(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=fr(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ir(e,t,n,r){const i=pr(e,r);if(null!=i){const r=mr(i),s=r.path,o=r.queryId,a=Ce(s,t);return gr(e,s,new jt(Mt(o),a,n))}return[]}function sr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Ce(e,i);s=s||Kn(t,n),a=a||Qn(t)}));let l,c=e.syncPointTree_.get(i);if(c?(a=a||Qn(c),s=s||Kn(c,ve())):(c=new Bn,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=s)l=!0;else{l=!1,s=at.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Kn(t,ve());n&&(s=s.updateImmediateChild(e,n))}))}const u=Yn(c,t);if(!u&&!t._queryParams.loadsAllData()){const n=fr(t);(0,o.vA)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Xn++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let h=Wn(c,t,n,ln(e.pendingWriteTree_,i),s,l);if(!u&&!a&&!r){const n=Gn(c,t);h=h.concat(function(e,t,n){const r=t._path,i=dr(e,t),s=hr(e,n),a=e.listenProvider_.startListening(vr(t),i,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(r);if(i)(0,o.vA)(!Qn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!Ee(e)&&t&&Qn(t))return[$n(t).query];{let e=[];return t&&(e=e.concat(Hn(t).map((e=>e.query)))),F(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(vr(r),dr(e,r))}}return a}(e,t,n))}return h}function or(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Kn(n,Ce(e,t));if(r)return r}));return fn(r,t,i,n,!0)}function ar(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Ce(e,n);r=r||Kn(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Kn(i,ve()):(i=new Bn,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Bt(r,!0,!1):null;return function(e){return Kt(e.viewCache_)}(zn(i,t,ln(e.pendingWriteTree_,t._path),s?o.getNode():at.EMPTY_NODE,s))}function lr(e,t){return cr(t,e.syncPointTree_,null,ln(e.pendingWriteTree_,ve()))}function cr(e,t,n,r){if(Ee(e.path))return ur(e,t,n,r);{const i=t.get(ve());null==n&&null!=i&&(n=Kn(i,ve()));let s=[];const o=ye(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=bn(r,o);s=s.concat(cr(a,l,e,t))}return i&&(s=s.concat(Vn(i,e,r,n))),s}}function ur(e,t,n,r){const i=t.get(ve());null==n&&null!=i&&(n=Kn(i,ve()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=bn(r,t),l=e.operationForChild(t);l&&(s=s.concat(ur(l,i,o,a)))})),i&&(s=s.concat(Vn(i,e,r,n))),s}function hr(e,t){const n=t.query,r=dr(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||at.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=pr(e,n);if(r){const n=mr(r),i=n.path,s=n.queryId,o=Ce(i,t);return gr(e,i,new Ft(Mt(s),o))}return[]}(e,n._path,r):function(e,t){return lr(e,new Ft({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return rr(e,n,null,r)}}}}function dr(e,t){const n=fr(t);return e.queryToTagMap.get(n)}function fr(e){return e._path.toString()+"$"+e._queryIdentifier}function pr(e,t){return e.tagToQueryMap.get(t)}function mr(e){const t=e.indexOf("$");return(0,o.vA)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ge(e.substr(0,t))}}function gr(e,t,n){const r=e.syncPointTree_.get(t);(0,o.vA)(r,"Missing sync point for query tag that we're tracking");return Vn(r,n,ln(e.pendingWriteTree_,t),null)}function vr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.vA)(Un,"Reference.ts has not been loaded"),Un)(e._repo,e._path):e}class yr{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yr(t)}node(){return this.node_}}class _r{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Se(this.path_,e);return new _r(this.syncTree_,t)}node(){return or(this.syncTree_,this.path_)}}const br=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},wr=function(e,t,n){return e&&"object"===typeof e?((0,o.vA)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xr(e[".sv"],t,n):"object"===typeof e[".sv"]?Tr(e[".sv"],t):void(0,o.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.vA)(!1,"Unexpected server value: "+e)},Tr=function(e,t,n){e.hasOwnProperty("increment")||(0,o.vA)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&(0,o.vA)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,o.vA)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Sr=function(e,t,n,r){return Cr(t,new _r(n,e),r)},Er=function(e,t,n){return Cr(e,new yr(t),n)};function Cr(e,t,n){const r=e.getPriority().val(),i=wr(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=wr(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Je(s,ut(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Je(i))),r.forEachChild(Ze,((e,r)=>{const i=Cr(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class kr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Ir(e,t){let n=t instanceof ge?t:new ge(t),r=e,i=ye(n);for(;null!==i;){const e=(0,o.yw)(r.node.children,i)||{children:{},childCount:0};r=new kr(i,r,e),n=be(n),i=ye(n)}return r}function Ar(e){return e.node.value}function Nr(e,t){e.node.value=t,Mr(e)}function Rr(e){return e.node.childCount>0}function Pr(e,t){F(e.node.children,((n,r)=>{t(new kr(n,e,r))}))}function Or(e,t,n,r){n&&!r&&t(e),Pr(e,(e=>{Or(e,t,!0,r)})),n&&r&&t(e)}function Dr(e){return new ge(null===e.parent?e.name:Dr(e.parent)+"/"+e.name)}function Mr(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Ar(e)&&!Rr(e)}(n),i=(0,o.gR)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Mr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Mr(e))}(e.parent,e.name,e)}const Lr=/[\[\].#$\/\u0000-\u001F\u007F]/,Fr=/[\[\].#$\u0000-\u001F\u007F]/,jr=10485760,Ur=function(e){return"string"===typeof e&&0!==e.length&&!Lr.test(e)},Br=function(e){return"string"===typeof e&&0!==e.length&&!Fr.test(e)},Vr=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!A(e)||e&&"object"===typeof e&&(0,o.gR)(e,".sv")},zr=function(e,t,n,r){r&&void 0===t||Wr((0,o.dI)(e,"value"),t,n)},Wr=function(e,t,n){const r=n instanceof ge?new Ne(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Pe(r));if("function"===typeof t)throw new Error(e+"contains a function "+Pe(r)+" with contents = "+t.toString());if(A(t))throw new Error(e+"contains "+t.toString()+" "+Pe(r));if("string"===typeof t&&t.length>jr/3&&(0,o.OE)(t)>jr)throw new Error(e+"contains a string greater than "+jr+" utf8 bytes "+Pe(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(F(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Ur(t)))throw new Error(e+" contains an invalid key ("+t+") "+Pe(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.OE)(t),Re(e)}(r,t),Wr(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,o.OE)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Pe(r)+" in addition to actual children.")}},qr=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,o.dI)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];F(t,((e,t)=>{const r=new ge(e);if(Wr(i,t,Se(n,r)),".priority"===we(r)&&!Vr(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=xe(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Ur(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(ke);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Ae(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Hr=function(e,t,n){if(!n||void 0!==t){if(A(t))throw new Error((0,o.dI)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Vr(t))throw new Error((0,o.dI)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Kr=function(e,t,n,r){if((!r||void 0!==n)&&!Ur(n))throw new Error((0,o.dI)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gr=function(e,t,n,r){if((!r||void 0!==n)&&!Br(n))throw new Error((0,o.dI)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Yr=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gr(e,t,n,r)},Qr=function(e,t){if(".info"===ye(t))throw new Error(e+" failed = Can't modify data under /.info/")},$r=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ur(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Br(e)}(n))throw new Error((0,o.dI)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jr(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Ie(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Zr(e,t,n){Jr(e,n),ti(e,(e=>Ie(e,t)))}function ei(e,t,n){Jr(e,n),ti(e,(e=>Ae(e,t)||Ae(t,e)))}function ti(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ni(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ni(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();w&&S("event: "+n.toString()),V(r)}}}const ri="repo_interrupt",ii=25;class si{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=It(),this.transactionQueueTree_=new kr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oi(e,t,n){if(e.stats_=ne(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ct(e.repoInfo_,((t,n,r,i)=>{ci(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>ui(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.As)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Me(e.repoInfo_,t,((t,n,r,i)=>{ci(e,t,n,r,i)}),(t=>{ui(e,t)}),(t=>{!function(e,t){F(t,((t,n)=>{hi(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return te[n]||(te[n]=t()),te[n]}(e.repoInfo_,(()=>new Ot(e.stats_,e.server_))),e.infoData_=new kt,e.infoSyncTree_=new Jn({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=nr(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),hi(e,"connected",!1),e.serverSyncTree_=new Jn({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);ei(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ai(e){const t=e.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function li(e){return br({timestamp:ai(e)})}function ci(e,t,n,r,i){e.dataUpdateCount++;const s=new ge(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=(0,o.kH)(n,(e=>ut(e)));a=function(e,t,n,r){const i=pr(e,r);if(i){const r=mr(i),s=r.path,o=r.queryId,a=Ce(s,t),l=Qt.fromObject(n);return gr(e,s,new Ut(Mt(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=ut(n);a=ir(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,o.kH)(n,(e=>ut(e)));a=function(e,t,n){const r=Qt.fromObject(n);return lr(e,new Ut({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=ut(n);a=nr(e.serverSyncTree_,s,t)}let l=s;a.length>0&&(l=xi(e,s)),ei(e.eventQueue_,l,a)}function ui(e,t){hi(e,"connected",t),!1===t&&function(e){yi(e,"onDisconnectEvents");const t=li(e),n=It();Rt(e.onDisconnect_,ve(),((r,i)=>{const s=Sr(r,i,e.serverSyncTree_,t);At(n,r,s)}));let r=[];Rt(n,ve(),((t,n)=>{r=r.concat(nr(e.serverSyncTree_,t,n));const i=ki(e,t);xi(e,i)})),e.onDisconnect_=It(),ei(e.eventQueue_,ve(),r)}(e)}function hi(e,t,n){const r=new ge("/.info/"+t),i=ut(n);e.infoData_.updateSnapshot(r,i);const s=nr(e.infoSyncTree_,r,i);ei(e.eventQueue_,r,s)}function di(e){return e.nextWriteId_++}function fi(e,t,n,r,i){yi(e,"set",{path:t.toString(),value:n,priority:r});const s=li(e),o=ut(n,r),a=or(e.serverSyncTree_,t),l=Er(o,a,s),c=di(e),u=Zn(e.serverSyncTree_,t,l,c,!0);Jr(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||I("set at "+t+" failed: "+n);const o=tr(e.serverSyncTree_,c,!s);ei(e.eventQueue_,t,o),_i(e,i,n,r)}));const h=ki(e,t);xi(e,h),ei(e.eventQueue_,h,[])}function pi(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Nt(e.onDisconnect_,t),_i(e,n,r,i)}))}function mi(e,t,n,r){const i=ut(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&At(e.onDisconnect_,t,i),_i(e,r,n,s)}))}function gi(e,t,n){let r;r=".info"===ye(t._path)?rr(e.infoSyncTree_,t,n):rr(e.serverSyncTree_,t,n),Zr(e.eventQueue_,t._path,r)}function vi(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ri)}function yi(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];S(t,...r)}function _i(e,t,n,r){t&&V((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function bi(e,t,n){return or(e.serverSyncTree_,t,n)||at.EMPTY_NODE}function wi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ci(e,t),Ar(t)){const n=Si(e,t);(0,o.vA)(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=bi(e,t,r);let s=i;const a=i.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,o.vA)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Ce(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,(r=>{yi(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(tr(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Ci(e,Ir(e.transactionQueueTree_,t)),wi(e,e.transactionQueueTree_),ei(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)V(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{I("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}xi(e,t)}}),a)}(e,Dr(t),n)}else Rr(t)&&Pr(t,(t=>{wi(e,t)}))}function xi(e,t){const n=Ti(e,t),r=Dr(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const s=t[c],u=Ce(n,s.path);let h,d=!1;if((0,o.vA)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,h=s.abortReason,i=i.concat(tr(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=ii)d=!0,h="maxretry",i=i.concat(tr(e.serverSyncTree_,s.currentWriteId,!0));else{const n=bi(e,s.path,a);s.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){Wr("transaction failed: Data returned ",r,s.path);let t=ut(r);"object"===typeof r&&null!=r&&(0,o.gR)(r,".priority")||(t=t.updatePriority(n.getPriority()));const l=s.currentWriteId,c=li(e),u=Er(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=u,s.currentWriteId=di(e),a.splice(a.indexOf(l),1),i=i.concat(Zn(e.serverSyncTree_,s.path,u,s.currentWriteId,s.applyLocally)),i=i.concat(tr(e.serverSyncTree_,l,!0))}else d=!0,h="nodata",i=i.concat(tr(e.serverSyncTree_,s.currentWriteId,!0))}ei(e.eventQueue_,n,i),i=[],d&&(t[c].status=2,l=t[c].unwatcher,setTimeout(l,Math.floor(0)),t[c].onComplete&&("nodata"===h?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(h),!1,null)))))}var l;Ci(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)V(r[o]);wi(e,e.transactionQueueTree_)}(e,Si(e,n),r),r}function Ti(e,t){let n,r=e.transactionQueueTree_;for(n=ye(t);null!==n&&void 0===Ar(r);)r=Ir(r,n),n=ye(t=be(t));return r}function Si(e,t){const n=[];return Ei(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Ei(e,t,n){const r=Ar(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Pr(t,(t=>{Ei(e,t,n)}))}function Ci(e,t){const n=Ar(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Nr(t,n.length>0?n:void 0)}Pr(t,(t=>{Ci(e,t)}))}function ki(e,t){const n=Dr(Ti(e,t)),r=Ir(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Ii(e,t)})),Ii(e,r),Or(r,(t=>{Ii(e,t)})),n}function Ii(e,t){const n=Ar(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,o.vA)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,o.vA)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(tr(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Nr(t,void 0):n.length=s+1,ei(e.eventQueue_,Dr(t),i);for(let e=0;e<r.length;e++)V(r[e])}}const Ai=function(e,t){const n=Ni(e),r=n.namespace;"firebase.com"===n.domain&&k(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||k("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new X(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ge(n.pathString)}},Ni=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):I("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Ri="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pi=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Ri.charAt(n%64),n=Math.floor(n/64);(0,o.vA)(0===n,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=Ri.charAt(t[i]);return(0,o.vA)(20===a.length,"nextPushId: Length should be 20."),a}}();class Oi{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.As)(this.snapshot.exportVal())}}class Di{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Mi{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,o.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Li{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new o.cY;return pi(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Qr("OnDisconnect.remove",this._path);const e=new o.cY;return mi(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Qr("OnDisconnect.set",this._path),zr("OnDisconnect.set",e,this._path,!1);const t=new o.cY;return mi(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Qr("OnDisconnect.setWithPriority",this._path),zr("OnDisconnect.setWithPriority",e,this._path,!1),Hr("OnDisconnect.setWithPriority",t,!1);const n=new o.cY;return function(e,t,n,r,i){const s=ut(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&At(e.onDisconnect_,t,s),_i(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Qr("OnDisconnect.update",this._path),qr("OnDisconnect.update",e,this._path,!1);const t=new o.cY;return function(e,t,n,r){if((0,o.Im)(n))return S("onDisconnect().update() called with empty data.  Don't do anything."),void _i(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&F(n,((n,r)=>{const i=ut(r);At(e.onDisconnect_,Se(t,n),i)})),_i(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Fi{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Ee(this._path)?null:we(this._path)}get ref(){return new Vi(this._repo,this._path)}get _queryIdentifier(){const e=Et(this._queryParams),t=M(e);return"{}"===t?"default":t}get _queryObject(){return Et(this._queryParams)}isEqual(e){if(!((e=(0,o.Ku)(e))instanceof Fi))return!1;const t=this._repo===e._repo,n=Ie(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function ji(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ui(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Be){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==N)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==R)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Ze){if(null!=t&&!Vr(t)||null!=n&&!Vr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.vA)(e.getIndex()instanceof ht||e.getIndex()===dt,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bi(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Vi extends Fi{constructor(e,t){super(e,t,new bt,!1)}get parent(){const e=Te(this._path);return null===e?null:new Vi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zi{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ge(e),n=Hi(this.ref,e);return new zi(this._node.getChild(t),n,Ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new zi(n,Hi(this.ref,t),Ze))))}hasChild(e){const t=new ge(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Wi(e,t){return(e=(0,o.Ku)(e))._checkNotDeleted("ref"),void 0!==t?Hi(e._root,t):e._root}function qi(e,t){(e=(0,o.Ku)(e))._checkNotDeleted("refFromURL");const n=Ai(t,e._repo.repoInfo_.nodeAdmin);$r("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||k("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Wi(e,n.path.toString())}function Hi(e,t){return null===ye((e=(0,o.Ku)(e))._path)?Yr("child","path",t,!1):Gr("child","path",t,!1),new Vi(e._repo,Se(e._path,t))}function Ki(e,t){e=(0,o.Ku)(e),Qr("set",e._path),zr("set",t,e._path,!1);const n=new o.cY;return fi(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Gi(e,t){qr("update",t,e._path,!1);const n=new o.cY;return function(e,t,n,r){yi(e,"update",{path:t.toString(),value:n});let i=!0;const s=li(e),o={};if(F(n,((n,r)=>{i=!1,o[n]=Sr(Se(t,n),ut(r),e.serverSyncTree_,s)})),i)S("update() called with empty data.  Don't do anything."),_i(0,r,"ok",void 0);else{const i=di(e),s=er(e.serverSyncTree_,t,o,i);Jr(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||I("update at "+t+" failed: "+n);const a=tr(e.serverSyncTree_,i,!o),l=a.length>0?xi(e,t):t;ei(e.eventQueue_,l,a),_i(0,r,n,s)})),F(n,(n=>{const r=ki(e,Se(t,n));xi(e,r)})),ei(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Yi(e){e=(0,o.Ku)(e);const t=new Mi((()=>{})),n=new Qi(t);return function(e,t,n){const r=ar(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=ut(r).withIndex(t._queryParams.getIndex());let s;if(sr(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=nr(e.serverSyncTree_,t._path,i);else{const n=dr(e.serverSyncTree_,t);s=ir(e.serverSyncTree_,t._path,i,n)}return ei(e.eventQueue_,t._path,s),rr(e.serverSyncTree_,t,n,null,!0),i}),(n=>(yi(e,"get for query "+(0,o.As)(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new zi(t,new Vi(e._repo,e._path),e._queryParams.getIndex())))}class Qi{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Oi("value",this,new zi(e.snapshotNode,new Vi(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Di(this,e,t):null}matches(e){return e instanceof Qi&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class $i{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Di(this,e,t):null}createEvent(e,t){(0,o.vA)(null!=e.childName,"Child events should have a childName.");const n=Hi(new Vi(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Oi(e.type,this,new zi(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof $i&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Xi(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{gi(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Mi(n,s||void 0),a="value"===t?new Qi(o):new $i(t,o);return function(e,t,n){let r;r=".info"===ye(t._path)?sr(e.infoSyncTree_,t,n):sr(e.serverSyncTree_,t,n),Zr(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>gi(e._repo,e,a)}function Ji(e,t,n,r){return Xi(e,"value",t,n,r)}function Zi(e,t,n,r){return Xi(e,"child_added",t,n,r)}function es(e,t,n,r){return Xi(e,"child_changed",t,n,r)}function ts(e,t,n,r){return Xi(e,"child_moved",t,n,r)}function ns(e,t,n,r){return Xi(e,"child_removed",t,n,r)}function rs(e,t,n){let r=null;const i=n?new Mi(n):null;"value"===t?r=new Qi(i):t&&(r=new $i(t,i)),gi(e._repo,e,r)}class is{}class ss extends is{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){zr("endAt",this._value,e._path,!0);const t=xt(e._queryParams,this._value,this._key);if(Bi(t),Ui(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fi(e._repo,e._path,t,e._orderByCalled)}}class os extends is{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){zr("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Be||n?xt(e,t,n):xt(e,t,N),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Bi(t),Ui(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fi(e._repo,e._path,t,e._orderByCalled)}}class as extends is{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){zr("startAt",this._value,e._path,!0);const t=wt(e._queryParams,this._value,this._key);if(Bi(t),Ui(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fi(e._repo,e._path,t,e._orderByCalled)}}class ls extends is{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){zr("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Be||n?wt(e,t,n):wt(e,t,R),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Bi(t),Ui(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fi(e._repo,e._path,t,e._orderByCalled)}}class cs extends is{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fi(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class us extends is{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fi(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class hs extends is{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){ji(e,"orderByChild");const t=new ge(this._path);if(Ee(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new ht(t),r=Tt(e._queryParams,n);return Ui(r),new Fi(e._repo,e._path,r,!0)}}class ds extends is{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){ji(e,"orderByKey");const t=Tt(e._queryParams,Be);return Ui(t),new Fi(e._repo,e._path,t,!0)}}class fs extends is{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){ji(e,"orderByPriority");const t=Tt(e._queryParams,Ze);return Ui(t),new Fi(e._repo,e._path,t,!0)}}class ps extends is{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){ji(e,"orderByValue");const t=Tt(e._queryParams,dt);return Ui(t),new Fi(e._repo,e._path,t,!0)}}class ms extends is{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(zr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ss(this._value,this._key)._apply(new as(this._value,this._key)._apply(e))}}function gs(e){let t=(0,o.Ku)(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){(0,o.vA)(!jn,"__referenceConstructor has already been defined"),jn=e}(Vi),function(e){(0,o.vA)(!Un,"__referenceConstructor has already been defined"),Un=e}(Vi);const vs="FIREBASE_DATABASE_EMULATOR_HOST",ys={};let _s=!1;function bs(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||k("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),S("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=Ai(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCC_IdWcuvEAVKifvcVqI2bPOsR-uW9OYc",REACT_APP_FIREBASE_APP_ID:"1:677211500256:web:1f0197a4521b877da42a85",REACT_APP_FIREBASE_AUTH_DOMAIN:"wondrlab-e27fc.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://wondrlab-e27fc-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-SXD2EN7X6W",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"677211500256",REACT_APP_FIREBASE_PROJECT_ID:"wondrlab-e27fc",REACT_APP_FIREBASE_STORAGE_BUCKET:"wondrlab-e27fc.firebasestorage.app",REACT_APP_GOOGLE_ANALYTICS:"",REACT_APP_GOOGLE_TAG_MANAGER:""}[vs]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=Ai(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new H(H.OWNER):new q(e.name,e.options,t);$r("Invalid Firebase Database URL",l),Ee(l.path)||k("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=ys[t.name];i||(i={},ys[t.name]=i);let s=i[e.toURLString()];s&&k("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new si(e,_s,n,r),i[e.toURLString()]=s,s}(c,e,u,new W(e.name,n));return new ws(h,e)}class ws{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vi(this._repo,ve())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=ys[t];n&&n[e.key]===e||k("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),vi(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&k("Cannot call "+e+" on a deleted database.")}}function xs(){ce.IS_TRANSPORT_INITIALIZED&&I("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ts(){xs(),se.forceDisallow()}function Ss(){xs(),le.forceDisallow(),se.forceAllow()}function Es(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=(0,o.Ku)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&k("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&k('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:(0,o.Fy)(r.mockUserToken,e.app.options.projectId);s=new H(t)}!function(e,t,n,r){e.repoInfo_=new X("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function Cs(e){var t;(e=(0,o.Ku)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ri)}function ks(e,t){T(e,t)}const Is={".sv":"timestamp"};class As{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ns(e,t,n){var r;if(e=(0,o.Ku)(e),Qr("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new o.cY,a=Ji(e,(()=>{}));return function(e,t,n,r,i,s){yi(e,"transaction on "+t);const a={path:t,update:n,onComplete:r,status:null,order:y(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=bi(e,t,void 0);a.currentInputSnapshot=l;const c=a.update(l.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Wr("transaction failed: Data returned ",c,a.path),a.status=0;const n=Ir(e.transactionQueueTree_,t),r=Ar(n)||[];let i;r.push(a),Nr(n,r),"object"===typeof c&&null!==c&&(0,o.gR)(c,".priority")?(i=(0,o.yw)(c,".priority"),(0,o.vA)(Vr(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(or(e.serverSyncTree_,t)||at.EMPTY_NODE).getPriority().val();const s=li(e),u=ut(c,i),h=Er(u,l,s);a.currentOutputSnapshotRaw=u,a.currentOutputSnapshotResolved=h,a.currentWriteId=di(e);const d=Zn(e.serverSyncTree_,t,h,a.currentWriteId,a.applyLocally);ei(e.eventQueue_,t,d),wi(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new zi(r,new Vi(e._repo,e._path),Ze),s.resolve(new As(n,i)))}),a,i),s.promise}Me.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Me.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Rs;h(s.SDK_VERSION),(0,s._registerComponent)(new i.uA("database",((e,t)=>{let{instanceIdentifier:n}=t;return bs(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)(l,c,Rs),(0,s.registerVersion)(l,c,"esm2017");const Ps=new a.Vy("@firebase/database-compat"),Os=function(e){const t="FIREBASE WARNING: "+e;Ps.warn(t)};class Ds{constructor(e){this._delegate=e}cancel(e){(0,o.od)("OnDisconnect.cancel",0,1,arguments.length),(0,o.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){(0,o.od)("OnDisconnect.remove",0,1,arguments.length),(0,o.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){(0,o.od)("OnDisconnect.set",1,2,arguments.length),(0,o.oD)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,o.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.oD)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if((0,o.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Os("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.oD)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class Ms{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,o.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ls{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,o.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,o.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,o.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,o.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,o.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Gr("DataSnapshot.child","path",e,!1),new Ls(this._database,this._delegate.child(e))}hasChild(e){return(0,o.od)("DataSnapshot.hasChild",1,1,arguments.length),Gr("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,o.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,o.od)("DataSnapshot.forEach",1,1,arguments.length),(0,o.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new Ls(this._database,t))))}hasChildren(){return(0,o.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,o.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,o.od)("DataSnapshot.ref",0,0,arguments.length),new js(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Fs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,o.od)("Query.on",2,4,arguments.length),(0,o.oD)("Query.on","callback",t,!1);const s=Fs.getCancelAndContextArgs_("Query.on",n,r),a=(e,n)=>{t.call(s.context,new Ls(this.database,e),n)};a.userCallback=t,a.context=s.context;const l=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return Ji(this._delegate,a,l),t;case"child_added":return Zi(this._delegate,a,l),t;case"child_removed":return ns(this._delegate,a,l),t;case"child_changed":return es(this._delegate,a,l),t;case"child_moved":return ts(this._delegate,a,l),t;default:throw new Error((0,o.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,o.od)("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.dI)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),(0,o.oD)("Query.off","callback",t,!0),(0,o.HN)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,rs(this._delegate,e,r)}else rs(this._delegate,e)}get(){return Yi(this._delegate).then((e=>new Ls(this.database,e)))}once(e,t,n,r){(0,o.od)("Query.once",1,4,arguments.length),(0,o.oD)("Query.once","callback",t,!0);const i=Fs.getCancelAndContextArgs_("Query.once",n,r),s=new o.cY,a=(e,n)=>{const r=new Ls(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};a.userCallback=t,a.context=i.context;const l=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":Ji(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Zi(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ns(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":es(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":ts(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,o.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,o.od)("Query.limitToFirst",1,1,arguments.length),new Fs(this.database,gs(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cs(e)}(e)))}limitToLast(e){return(0,o.od)("Query.limitToLast",1,1,arguments.length),new Fs(this.database,gs(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new us(e)}(e)))}orderByChild(e){return(0,o.od)("Query.orderByChild",1,1,arguments.length),new Fs(this.database,gs(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gr("orderByChild","path",e,!1),new hs(e)}(e)))}orderByKey(){return(0,o.od)("Query.orderByKey",0,0,arguments.length),new Fs(this.database,gs(this._delegate,new ds))}orderByPriority(){return(0,o.od)("Query.orderByPriority",0,0,arguments.length),new Fs(this.database,gs(this._delegate,new fs))}orderByValue(){return(0,o.od)("Query.orderByValue",0,0,arguments.length),new Fs(this.database,gs(this._delegate,new ps))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return(0,o.od)("Query.startAt",0,2,arguments.length),new Fs(this.database,gs(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Kr("startAt","key",t,!0),new as(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return(0,o.od)("Query.startAfter",0,2,arguments.length),new Fs(this.database,gs(this._delegate,function(e,t){return Kr("startAfter","key",t,!0),new ls(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return(0,o.od)("Query.endAt",0,2,arguments.length),new Fs(this.database,gs(this._delegate,function(e,t){return Kr("endAt","key",t,!0),new ss(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return(0,o.od)("Query.endBefore",0,2,arguments.length),new Fs(this.database,gs(this._delegate,function(e,t){return Kr("endBefore","key",t,!0),new os(e,t)}(e,t)))}equalTo(e,t){return(0,o.od)("Query.equalTo",1,2,arguments.length),new Fs(this.database,gs(this._delegate,function(e,t){return Kr("equalTo","key",t,!0),new ms(e,t)}(e,t)))}toString(){return(0,o.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,o.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,o.od)("Query.isEqual",1,1,arguments.length),!(e instanceof Fs)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.oD)(e,"cancel",r.cancel,!0),r.context=n,(0,o.HN)(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,o.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new js(this.database,new Vi(this._delegate._repo,this._delegate._path))}}class js extends Fs{constructor(e,t){super(e,new Fi(t._repo,t._path,new bt,!1)),this.database=e,this._delegate=t}getKey(){return(0,o.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,o.od)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new js(this.database,Hi(this._delegate,e))}getParent(){(0,o.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new js(this.database,e):null}getRoot(){return(0,o.od)("Reference.root",0,0,arguments.length),new js(this.database,this._delegate.root)}set(e,t){(0,o.od)("Reference.set",1,2,arguments.length),(0,o.oD)("Reference.set","onComplete",t,!0);const n=Ki(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if((0,o.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Os("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qr("Reference.update",this._delegate._path),(0,o.oD)("Reference.update","onComplete",t,!0);const n=Gi(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,o.od)("Reference.setWithPriority",2,3,arguments.length),(0,o.oD)("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(Qr("setWithPriority",e._path),zr("setWithPriority",t,e._path,!1),Hr("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new o.cY;return fi(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){(0,o.od)("Reference.remove",0,1,arguments.length),(0,o.oD)("Reference.remove","onComplete",e,!0);const t=function(e){return Qr("remove",e._path),Ki(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){(0,o.od)("Reference.transaction",1,3,arguments.length),(0,o.oD)("Reference.transaction","transactionUpdate",e,!1),(0,o.oD)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.dI)(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=Ns(this._delegate,e,{applyLocally:n}).then((e=>new Ms(e.committed,new Ls(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){(0,o.od)("Reference.setPriority",1,2,arguments.length),(0,o.oD)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,o.Ku)(e),Qr("setPriority",e._path),Hr("setPriority",t,!1);const n=new o.cY;return fi(e._repo,Se(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){(0,o.od)("Reference.push",0,2,arguments.length),(0,o.oD)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,o.Ku)(e),Qr("push",e._path),zr("push",t,e._path,!0);const n=ai(e._repo),r=Pi(n),i=Hi(e,r),s=Hi(e,r);let a;return a=null!=t?Ki(s,t).then((()=>s)):Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}(this._delegate,e),r=n.then((e=>new js(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new js(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return Qr("Reference.onDisconnect",this._delegate._path),new Ds(new Li(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Us{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ts,forceLongPolling:Ss}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Es(this._delegate,e,t,n)}ref(e){if((0,o.od)("database.ref",0,1,arguments.length),e instanceof js){const t=qi(this._delegate,e.toString());return new js(this,t)}{const t=Wi(this._delegate,e);return new js(this,t)}}refFromURL(e){(0,o.od)("database.refFromURL",1,1,arguments.length);const t=qi(this._delegate,e);return new js(this,t)}goOffline(){return(0,o.od)("database.goOffline",0,0,arguments.length),e=this._delegate,(e=(0,o.Ku)(e))._checkNotDeleted("goOffline"),void vi(e._repo);var e}goOnline(){return(0,o.od)("database.goOnline",0,0,arguments.length),Cs(this._delegate)}}Us.ServerValue={TIMESTAMP:Is,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var Bs=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:s,customAppCheckImpl:o,namespace:a,nodeAdmin:l=!1}=e;h(r);const c=new i.h1("database-standalone"),u=new i.Kq("auth-internal",c);let d;return u.setComponent(new i.uA("auth-internal",(()=>s),"PRIVATE")),o&&(d=new i.Kq("app-check-internal",c),d.setComponent(new i.uA("app-check-internal",(()=>o),"PRIVATE"))),{instance:new Us(bs(t,u,d,n,l),t),namespace:a}}});const Vs=Us.ServerValue;var zs;(zs=r.A).INTERNAL.registerComponent(new i.uA("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Us(i,r)}),"PUBLIC").setServiceProps({Reference:js,Query:Fs,Database:Us,DataSnapshot:Ls,enableLogging:ks,INTERNAL:Bs,ServerValue:Vs}).setMultipleInstances(!0)),zs.registerVersion("@firebase/database-compat","1.0.6")},9492:(e,t,n)=>{"use strict";var r,i,s=n(8984),o=n(913),a=n(7253),l=n(4624),c=n(9061),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},h={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=a(0),u=a(1),d=a(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function _(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(p(e))return t=_(m(e),t),new y(m(t.g),m(t.h));if(p(t))return t=_(e,m(t)),new y(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;0>=r.l(e);)n=b(n),r=b(r);var i=w(n,1),s=w(r,1);for(r=w(r,2),n=w(n,2);!f(r);){var o=s.add(r);0>=o.l(e)&&(i=i.add(n),s=o),r=w(r,1),n=w(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=l(n)).j(t);p(o)||0<o.l(e);)o=(s=l(n-=r)).j(t);f(s)&&(s=u),i=i.add(s),e=g(e,o)}return new y(i,e)}function b(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=_(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(d)&&0>e.l(d))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(i)>>>16,h=65535&e.i(i);n[2*r+2*i]+=a*h,v(n,2*r+2*i),n[2*r+2*i+1]+=o*h,v(n,2*r+2*i+1),n[2*r+2*i+1]+=a*u,v(n,2*r+2*i+1),n[2*r+2*i+2]+=o*u,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return _(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=h.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=l(Math.pow(n,o)),i=i.j(o).add(l(a))):i=(i=i.j(r)).add(l(a))}return i},r=h.Integer=s}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,f,p,m,g,v,y,_,b,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function C(e){return/^[\s\xa0]*$/.test(e)}function k(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function I(e){return I[" "](e),e}I[" "]=function(){};var A=-1!=k().indexOf("Gecko")&&!(-1!=k().toLowerCase().indexOf("webkit")&&-1==k().indexOf("Edge"))&&!(-1!=k().indexOf("Trident")||-1!=k().indexOf("MSIE"))&&-1==k().indexOf("Edge");function N(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function D(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function M(e){i.setTimeout((()=>{throw e}),0)}function L(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var F=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new j),(e=>e.reset()));class j{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=F.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},z=()=>{const e=i.Promise.resolve(void 0);U=()=>{e.then(W)}};var W=()=>{for(var e;e=L();){try{e.h.call(e.g)}catch(n){M(n)}var t=F;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}B=!1};function q(){this.s=this.s,this.C=this.C}function H(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function G(e,t){if(H.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(A){e:{try{I(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Y[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}h(G,H);var Y={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),$=0;function X(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++$,this.da=this.fa=!1}function J(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Z(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(J(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=te(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new X(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function ie(e,t,n,r,i){if(r&&r.once)return oe(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=fe(n),e&&e[Q]?e.K(t,n,o(r)?!!r.capture:!!r,i):se(e,t,n,!1,r,i)}function se(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=he(e);if(l||(e[ne]=l=new Z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function oe(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)oe(e,t[s],n,r,i);return null}return n=fe(n),e&&e[Q]?e.L(t,n,o(r)?!!r.capture:!!r,i):se(e,t,n,!0,r,i)}function ae(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ae(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=fe(n),e&&e[Q]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(s=e.g[t],n,r,i))&&(J(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=he(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,i)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[Q])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=he(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):J(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new G(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function he(e){return(e=e[ne])instanceof Z?e:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[de]||(e[de]=function(t){return e.handleEvent(t)}),e[de])}function pe(){q.call(this),this.i=new Z(this),this.M=this,this.F=null}function me(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new H(t,e);else if(t instanceof H)t.target=t.target||e;else{var i=t;O(t=new H(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ge(o,r,!0,t)&&i}if(i=ge(o=t.g=e,r,!0,t)&&i,i=ge(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ge(o=t.g=n[s],r,!1,t)&&i}function ge(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&ee(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function ve(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ye(e){e.g=ve((()=>{e.g=null,e.i&&(e.i=!1,ye(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(pe,q),pe.prototype[Q]=!0,pe.prototype.removeEventListener=function(e,t,n,r){ae(this,e,t,n,r)},pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)J(n[r]);delete t.g[e],t.h--}}this.F=null},pe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class _e extends q{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(e){q.call(this),this.h=e,this.g={}}h(be,q);var we=[];function xe(e){N(e.g,(function(e,t){this.g.hasOwnProperty(t)&&le(e)}),e),e.g={}}be.prototype.N=function(){be.aa.N.call(this),xe(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=i.JSON.stringify,Se=i.JSON.parse,Ee=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Ce(){}function ke(e){return e.h||(e.h=e.i())}function Ie(){}Ce.prototype.h=null;var Ae={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ne(){H.call(this,"d")}function Re(){H.call(this,"c")}h(Ne,H),h(Re,H);var Pe={},Oe=null;function De(){return Oe=Oe||new pe}function Me(e){H.call(this,Pe.La,e)}function Le(e){const t=De();me(t,new Me(t))}function Fe(e,t){H.call(this,Pe.STAT_EVENT,e),this.stat=t}function je(e){const t=De();me(t,new Fe(t,e))}function Ue(e,t){H.call(this,Pe.Ma,e),this.size=t}function Be(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ve(){this.g=!0}function ze(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Te(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Pe.La="serverreachability",h(Me,H),Pe.STAT_EVENT="statevent",h(Fe,H),Pe.Ma="timingevent",h(Ue,H),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var We,qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ke(){}function Ge(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ye}function Ye(){this.i=null,this.g="",this.h=!1}h(Ke,Ce),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},We=new Ke;var Qe={},$e={};function Xe(e,t,n){e.L=1,e.v=Tt(yt(t)),e.m=n,e.P=!0,Je(e,null)}function Je(e,t){e.F=Date.now(),tt(e),e.A=yt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ft(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ye,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new _e(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(we[0]=i.toString()),i=we);for(var s=0;s<i.length;s++){var o=ie(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?R(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Le(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$e:(n=Number(t.substring(n,r)),isNaN(n)?Qe:(r+=1)+n>t.length?$e:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Be(c(e.ba,e),t)}function rt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function it(e){0==e.j.G||e.J||bn(e.j,e)}function st(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,xe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function ot(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ht(n.h,e)))if(!e.K&&ht(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_n(n),cn(n)}gn(n),je(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Be(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&_n(n),!C(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dt(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,xt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),o.K){ft(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(rt(a),tt(a)),r.g=o}else mn(r);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Le()}catch(u){}}Ge.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Ge.prototype.Y=function(e){try{if(e==this.g)e:{const d=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=d||7==t||Le(),rt(this);var n=this.g.Z();this.X=n;t:if(Ze(this)){var r=sn(this.g);e="";var s=r.length,o=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){st(this),it(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,je(12),st(this),it(this);break e}ze(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ot(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=et(this,a),e==$e){4==d&&(this.s=4,je(14),n=!1),ze(this.i,this.l,null,"[Incomplete Response]");break}if(e==Qe){this.s=4,je(15),ze(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}ze(this.i,this.l,e,null),ot(this,e)}if(Ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,je(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),vn(h),h.M=!0,je(11))}}else ze(this.i,this.l,a,"[Invalid Chunked Response]"),st(this),it(this)}else ze(this.i,this.l,a,null),ot(this,a);4==d&&st(this),this.o&&!this.J&&(4==d?bn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=D(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),st(this),it(this)}}}catch(d){}},Ge.prototype.cancel=function(){this.J=!0,st(this)},Ge.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Le(),je(17)),st(this),this.s=2,it(this)):nt(this,this.S-e)};var at=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function ht(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dt(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return T(e.i)}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}lt.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof vt){this.h=e.h,_t(this,e.j),this.o=e.o,this.g=e.g,bt(this,e.s),this.l=e.l;var t=e.i,n=new Ot;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,_t(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),bt(this,t[4]),this.l=St(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}function yt(e){return new vt(e)}function _t(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Ot?(e.i=t,function(e,t){t&&!e.j&&(Dt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Mt(this,t),Ft(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,Rt)),e.i=new Ot(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function Tt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,It,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,It,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?Nt:At,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,Pt)),e.join("")};var kt,It=/[#\/\?@]/g,At=/[#\?:]/g,Nt=/[#\?]/g,Rt=/[#\?@]/g,Pt=/#/g;function Ot(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Mt(e,t){Dt(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Lt(e,t){return Dt(e),t=jt(e,t),e.g.has(t)}function Ft(e,t,n){Mt(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),T(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ut(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Bt(){this.g=new Ee}function Vt(e,t,n){const r=n||"";try{mt(e,(function(e,n){let i=e;o(e)&&(i=Te(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Wt(e,t){pe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ht(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return N(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Yt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Qt(e){pe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ot.prototype).add=function(e,t){Dt(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Dt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Dt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Dt(this);let t=[];if("string"===typeof e)Lt(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Dt(this),this.i=null,Lt(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(zt,Ce),zt.prototype.g=function(){return new Wt(this.l,this.j)},zt.prototype.i=(kt={},function(){return kt}),h(Wt,pe),(e=Wt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ht(this):Kt(this),3==this.readyState&&qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ht(this))},e.Qa=function(e){this.g&&(this.response=e,Ht(this))},e.ga=function(){this.g&&Ht(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Qt,pe);var $t=/^https?$/i,Xt=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,me(e,"complete"),me(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))ve(e.Ea,0,e);else if(me(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(gt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!$t.test(o?o.toLowerCase():"")}n=s}if(n)me(e,"complete"),me(e,"success");else{e.m=6;try{var a=2<rn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||me(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(E){return null}}function on(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function an(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=on("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=on("baseRetryDelayMs",5e3,e),this.cb=on("retryDelaySeedMs",1e4,e),this.Wa=on("forwardChannelMaxRetries",2,e),this.wa=on("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new Bt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=yt(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),fn(e,n),(t=new Ge(e,e.j,t)).L=2,t.v=Tt(yt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}Tn(e)}function cn(e){e.g&&(vn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(i.clearTimeout(e.u),e.u=null),_n(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function hn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||z(),B||(U(),B=!0),V.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=yt(e.I);xt(r,"SID",e.K),xt(r,"RID",n),xt(r,"AID",e.T),fn(e,r),e.m&&e.o&&Yt(r,e.m,e.o),n=new Ge(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),dt(e.h,n),Xe(n,r,t)}function fn(e,t){e.H&&N(e.H,(function(e,n){xt(t,n,e)})),e.l&&mt({},(function(e,n){xt(t,n,e)}))}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||z(),B||(U(),B=!0),V.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Be(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function vn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new Ge(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=yt(e.qa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.T),xt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&xt(t,"TO",e.ja),xt(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Yt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=Tt(yt(t)),n.m=null,n.P=!0,Je(n,e)}function _n(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function bn(e,t){var n=null;if(e.g==t){_n(e),vn(e),e.g=null;var r=2}else{if(!ht(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;me(r=De(),new Ue(r,n)),hn(e)}else mn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Be(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new vt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||_t(r,"https"),Tt(r),t?function(e,t){const n=new Ve;if(i.Image){const r=new Image;r.onload=u(Ut,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ut,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ut,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ut,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ut(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ut(0,0,!0,t):Ut(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ut(0,0,!1,t)}))}(r.toString(),n)}else je(2);e.G=0,e.l&&e.l.sa(t),Tn(e),un(e)}function Tn(e){if(e.G=0,e.ka=[],e.l){const t=pt(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,T(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof vt?yt(n):new vt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new vt(null);r&&_t(o,r),t&&(o.g=t),s&&bt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&xt(r,n,t),xt(r,"VER",e.la),fn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Qt(new zt({eb:n})):new Qt(e.pa)).Ha(e.J),t}function Cn(){}function kn(){}function In(e,t){pe.call(this),this.g=new an(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!C(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rn(this)}function An(e){Ne.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nn(){Re.call(this),this.status=1}function Rn(e){this.g=e}(e=Qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():We.g(),this.v=this.o?ke(this.o):ke(We),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Jt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Jt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,me(this,"complete"),me(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(kt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(kt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Se(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=an.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){je(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),hn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ge(this,this.j,e);let s=this.o;if(this.S&&(s?(s=R(s),O(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,i,t),xt(n=yt(this.I),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Gt(s)))+"&"+t:this.m&&Yt(n,this.m,s)),dt(this.h,i),this.Ua&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),i.T=!0,Xe(i,n,null)):Xe(i,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||ct(this.h)||dn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Be(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),cn(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),je(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Cn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new In(e,t)},h(In,pe),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ln(this.g)},In.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=Te(e),e=n);t.i.push(new at(t.Ya++,e)),3==t.G&&hn(t)},In.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,In.aa.N.call(this)},h(An,Ne),h(Nn,Re),h(Rn,Cn),Rn.prototype.ua=function(){me(this.g,"a")},Rn.prototype.ta=function(e){me(this.g,new An(e))},Rn.prototype.sa=function(e){me(this.g,new Nn)},Rn.prototype.ra=function(){me(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,b=x.createWebChannelTransport=function(){return new kn},_=x.getStatEventTarget=function(){return De()},y=x.Event=Pe,v=x.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qe.NO_ERROR=0,qe.TIMEOUT=8,qe.HTTP_ERROR=6,g=x.ErrorCode=qe,He.COMPLETE="complete",m=x.EventType=He,Ie.EventType=Ae,Ae.OPEN="a",Ae.CLOSE="b",Ae.ERROR="c",Ae.MESSAGE="d",pe.prototype.listen=pe.prototype.K,p=x.WebChannel=Ie,f=x.FetchXmlHttpFactory=zt,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,d=x.XhrIo=Qt}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const T="@firebase/firestore";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let E="10.12.3";const C=new l.Vy("@firebase/firestore");function k(){return C.logLevel}function I(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(R);C.debug("Firestore (".concat(E,"): ").concat(e),...i)}}function A(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(R);C.error("Firestore (".concat(E,"): ").concat(e),...i)}}function N(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(R);C.warn("Firestore (".concat(E,"): ").concat(e),...i)}}function R(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(E,") INTERNAL ASSERTION FAILED: ")+e;throw A(t),new Error(t)}function O(e,t){e||P()}function D(e,t){return e}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class F{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class j{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(S.UNAUTHENTICATED)))}shutdown(){}}class B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new F;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new F,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new F)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken),new j(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e),new S(e)}}class z{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class W{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new z(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(S.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,I("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(O("string"==typeof e.token),this.R=e.token,new q(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function K(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=K(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Y(e,t){return e<t?-1:e>t?1:0}function Q(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function $(e){return e+"\0"}class X{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return X.fromMillis(Date.now())}static fromDate(e){return X.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new X(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new X(0,0))}static max(){return new J(new X(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Z{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(),void 0===n?n=e.length-t:n>e.length-t&&P(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Z.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Z?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ee extends Z{construct(e,t,n){return new ee(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ee(e)}static emptyPath(){return new ee([])}}const te=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ne extends Z{construct(e,t,n){return new ne(e,t,n)}static isValidIdentifier(e){return te.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ne.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ne(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new L(M.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ne(t)}static emptyPath(){return new ne([])}}class re{constructor(e){this.path=e}static fromPath(e){return new re(ee.fromString(e))}static fromName(e){return new re(ee.fromString(e).popFirst(5))}static empty(){return new re(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ee.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new ee(e.slice()))}}class ie{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function se(e){return e.fields.find((e=>2===e.kind))}function oe(e){return e.fields.filter((e=>2!==e.kind))}ie.UNKNOWN_ID=-1;class ae{constructor(e,t){this.fieldPath=e,this.kind=t}}class le{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new le(0,he.min())}}function ce(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=J.fromTimestamp(1e9===r?new X(n+1,0):new X(n,r));return new he(i,re.empty(),t)}function ue(e){return new he(e.readTime,e.key,-1)}class he{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new he(J.min(),re.empty(),-1)}static max(){return new he(J.max(),re.empty(),-1)}}function de(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=re.comparator(e.documentKey,t.documentKey),0!==n?n:Y(e.largestBatchId,t.largestBatchId))}const fe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function me(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==fe)throw e;I("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(e){return ge.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,n)=>{t(e)}))}static reject(e){return new ge(((t,n)=>{n(e)}))}static waitFor(e){return new ge(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ge.resolve(!1);for(const n of e)t=t.next((e=>e?ge.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ge(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ge(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ve{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new F,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new we(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ce(t.target.error);this.V.reject(new we(e,n))}}static open(e,t,n,r){try{return new ve(t,e.transaction(r,n))}catch(e){throw new we(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Te(t)}}class ye{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===ye.S((0,c.ZQ)())&&A("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),Se(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,c.zW)())return!1;if(ye.C())return!0;const e=(0,c.ZQ)(),t=ye.S(e),n=0<t&&t<10,r=_e(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new we(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new L(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new L(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new we(e,r))},r.onupgradeneeded=e=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=ve.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),ge.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(I("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class be{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Se(this.B.delete())}}class we extends L{constructor(e,t){super(M.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function xe(e){return"IndexedDbTransactionError"===e.name}class Te{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(I("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Se(n)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Se(this.store.add(e))}get(e){return Se(this.store.get(e)).next((t=>(void 0===t&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Se(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Se(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new ge(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ge(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){I("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new ge(((n,r)=>{t.onerror=e=>{const t=Ce(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new ge(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new be(i),o=t(i.primaryKey,i.value,s);if(o instanceof ge){const e=o.catch((e=>(s.done(),ge.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>ge.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Se(e){return new ge(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ce(e.target.error);n(t)}}))}let Ee=!1;function Ce(e){const t=ye.S((0,c.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new L("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ee||(Ee=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ke{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){I("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{I("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){xe(e)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await me(e)}await this.X(6e4)}))}}class Ie{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return ge.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return I("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(I("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ue(t);de(r,n)>0&&(n=r)})),new he(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ae{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ne(e){return null==e}function Re(e){return 0===e&&1/e==-1/0}function Pe(e){return"number"==typeof e&&Number.isInteger(e)&&!Re(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Oe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Me(t)),t=De(e.get(n),t);return Me(t)}function De(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Me(e){return e+"\x01\x01"}function Le(e){const t=e.length;if(O(t>=2),2===t)return O("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ee.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&P(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:P()}s=t+2}return new ee(r)}Ae.oe=-1;const Fe=["userId","batchId"];function je(e,t){return[e,Oe(t)]}function Ue(e,t,n){return[e,Oe(t),n]}const Be={},Ve=["prefixPath","collectionGroup","readTime","documentId"],ze=["prefixPath","collectionGroup","documentId"],We=["collectionGroup","readTime","prefixPath","documentId"],qe=["canonicalId","targetId"],He=["targetId","path"],Ke=["path","targetId"],Ge=["collectionId","parent"],Ye=["indexId","uid"],Qe=["uid","sequenceNumber"],$e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xe=["indexId","uid","orderedDocumentKey"],Je=["userId","collectionPath","documentId"],Ze=["userId","collectionPath","largestBatchId"],et=["userId","collectionGroup","largestBatchId"],tt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nt=[...tt,"documentOverlays"],rt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],it=rt,st=[...it,"indexConfiguration","indexState","indexEntries"],ot=st;class at extends pe{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function lt(e,t){const n=D(e);return ye.F(n._e,t)}function ct(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||pt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ft(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ft(this.root,e,this.comparator,!1)}getReverseIterator(){return new ft(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ft(this.root,e,this.comparator,!0)}}class ft{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:pt.RED,this.left=null!=r?r:pt.EMPTY,this.right=null!=i?i:pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new pt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P();if(this.right.isRed())throw P();const e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1,pt.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(e,t,n,r,i){return this}insert(e,t,n){return new pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof mt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vt(e){return e.hasNext()?e.getNext():void 0}class yt{constructor(e){this.fields=e,e.sort(ne.comparator)}static empty(){return new yt([])}unionWith(e){let t=new mt(ne.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Q(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class _t extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new _t("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const wt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(O(!!e),"string"==typeof e){let t=0;const n=wt.exec(e);if(O(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Tt(e.seconds),nanos:Tt(e.nanos)}}function Tt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function St(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}function Et(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ct(e){const t=e.mapValue.fields.__previous_value__;return Et(t)?Ct(t):t}function kt(e){const t=xt(e.mapValue.fields.__local_write_time__.timestampValue);return new X(t.seconds,t.nanos)}class It{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class At{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new At("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof At&&e.projectId===this.projectId&&e.database===this.database}}const Nt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rt={nullValue:"NULL_VALUE"};function Pt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Et(e)?4:Kt(e)?9007199254740991:10:P()}function Ot(e,t){if(e===t)return!0;const n=Pt(e);if(n!==Pt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kt(e).isEqual(kt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return St(e.bytesValue).isEqual(St(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Tt(e.geoPointValue.latitude)===Tt(t.geoPointValue.latitude)&&Tt(e.geoPointValue.longitude)===Tt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Tt(e.integerValue)===Tt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Tt(e.doubleValue),r=Tt(t.doubleValue);return n===r?Re(n)===Re(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Q(e.arrayValue.values||[],t.arrayValue.values||[],Ot);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ct(n)!==ct(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ot(n[i],r[i])))return!1;return!0}(e,t);default:return P()}}function Dt(e,t){return void 0!==(e.values||[]).find((e=>Ot(e,t)))}function Mt(e,t){if(e===t)return 0;const n=Pt(e),r=Pt(t);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Tt(e.integerValue||e.doubleValue),r=Tt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Lt(e.timestampValue,t.timestampValue);case 4:return Lt(kt(e),kt(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=St(e),r=St(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Y(n[i],r[i]);if(0!==e)return e}return Y(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Y(Tt(e.latitude),Tt(t.latitude));return 0!==n?n:Y(Tt(e.longitude),Tt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Mt(n[i],r[i]);if(e)return e}return Y(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Nt.mapValue&&t===Nt.mapValue)return 0;if(e===Nt.mapValue)return 1;if(t===Nt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Y(r[o],s[o]);if(0!==e)return e;const t=Mt(n[r[o]],i[s[o]]);if(0!==t)return t}return Y(r.length,s.length)}(e.mapValue,t.mapValue);default:throw P()}}function Lt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);const n=xt(e),r=xt(t),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function Ft(e){return jt(e)}function jt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return St(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return re.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(jt(e.fields[i]));return n+"}"}(e.mapValue):P()}function Ut(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bt(e){return!!e&&"integerValue"in e}function Vt(e){return!!e&&"arrayValue"in e}function zt(e){return!!e&&"nullValue"in e}function Wt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qt(e){return!!e&&"mapValue"in e}function Ht(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ht(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ht(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Kt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gt(e){return"nullValue"in e?Rt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ut(At.empty(),re.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:P()}function Yt(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ut(At.empty(),re.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Nt:P()}function Qt(e,t){const n=Mt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function $t(e,t){const n=Mt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ht(t)}setAll(e){let t=ne.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ht(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());qt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ot(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Xt(Ht(this.value))}}function Jt(e){const t=[];return ut(e.fields,((e,n)=>{const r=new ne([e]);if(qt(n)){const e=Jt(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new yt(t)}class Zt{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Zt(e,0,J.min(),J.min(),J.min(),Xt.empty(),0)}static newFoundDocument(e,t,n,r){return new Zt(e,1,t,J.min(),n,r,0)}static newNoDocument(e,t){return new Zt(e,2,t,J.min(),J.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,J.min(),J.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class en{constructor(e,t){this.position=e,this.inclusive=t}}function tn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?re.comparator(re.fromName(o.referenceValue),n.key):Mt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function nn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ot(e.position[n],t.position[n]))return!1;return!0}class rn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class on{}class an extends on{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vn(e,t,n):"array-contains"===t?new wn(e,n):"in"===t?new xn(e,n):"not-in"===t?new Tn(e,n):"array-contains-any"===t?new Sn(e,n):new an(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yn(e,n):new _n(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mt(t,this.value)):null!==t&&Pt(this.value)===Pt(t)&&this.matchesComparison(Mt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends on{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ln(e,t)}matches(e){return cn(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cn(e){return"and"===e.op}function un(e){return"or"===e.op}function hn(e){return dn(e)&&cn(e)}function dn(e){for(const t of e.filters)if(t instanceof ln)return!1;return!0}function fn(e){if(e instanceof an)return e.field.canonicalString()+e.op.toString()+Ft(e.value);if(hn(e))return e.filters.map((e=>fn(e))).join(",");{const t=e.filters.map((e=>fn(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function pn(e,t){return e instanceof an?function(e,t){return t instanceof an&&e.op===t.op&&e.field.isEqual(t.field)&&Ot(e.value,t.value)}(e,t):e instanceof ln?function(e,t){return t instanceof ln&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&pn(n,t.filters[r])),!0)}(e,t):void P()}function mn(e,t){const n=e.filters.concat(t);return ln.create(n,e.op)}function gn(e){return e instanceof an?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ft(e.value))}(e):e instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(gn).join(" ,")+"}"}(e):"Filter"}class vn extends an{constructor(e,t,n){super(e,t,n),this.key=re.fromName(n.referenceValue)}matches(e){const t=re.comparator(e.key,this.key);return this.matchesComparison(t)}}class yn extends an{constructor(e,t){super(e,"in",t),this.keys=bn("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _n extends an{constructor(e,t){super(e,"not-in",t),this.keys=bn("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>re.fromName(e.referenceValue)))}class wn extends an{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vt(t)&&Dt(t.arrayValue,this.value)}}class xn extends an{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dt(this.value.arrayValue,t)}}class Tn extends an{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dt(this.value.arrayValue,t)}}class Sn extends an{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vt(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Dt(this.value.arrayValue,e)))}}class En{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Cn(e){return new En(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function kn(e){const t=D(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>fn(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ne(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ft(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ft(e))).join(",")),t.ue=e}return t.ue}function In(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nn(e.startAt,t.startAt)&&nn(e.endAt,t.endAt)}function An(e){return re.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Nn(e,t){return e.filters.filter((e=>e instanceof an&&e.field.isEqual(t)))}function Rn(e,t,n){let r=Rt,i=!0;for(const s of Nn(e,t)){let e=Rt,t=!0;switch(s.op){case"<":case"<=":e=Gt(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Rt}Qt({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Qt({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Pn(e,t,n){let r=Nt,i=!0;for(const s of Nn(e,t)){let e=Nt,t=!0;switch(s.op){case">=":case">":e=Yt(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Nt}$t({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];$t({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class On{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dn(e,t,n,r,i,s,o,a){return new On(e,t,n,r,i,s,o,a)}function Mn(e){return new On(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function jn(e){const t=D(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mt(ne.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new rn(r,n))})),e.has(ne.keyField().canonicalString())||t.ce.push(new rn(ne.keyField(),n))}return t.ce}function Un(e){const t=D(e);return t.le||(t.le=Bn(t,jn(e))),t.le}function Bn(e,t){if("F"===e.limitType)return Cn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new rn(e.field,t)}));const n=e.endAt?new en(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new en(e.startAt.position,e.startAt.inclusive):null;return Cn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vn(e,t){const n=e.filters.concat([t]);return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zn(e,t,n){return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wn(e,t){return In(Un(e),Un(t))&&e.limitType===t.limitType}function qn(e){return"".concat(kn(Un(e)),"|lt:").concat(e.limitType)}function Hn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>gn(e))).join(", "),"]")),Ne(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ft(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ft(e))).join(",")),"Target(".concat(t,")")}(Un(e)),"; limitType=").concat(e.limitType,")")}function Kn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):re.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of jn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=tn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jn(e),t))&&!(e.endAt&&!function(e,t,n){const r=tn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jn(e),t))}(e,t)}function Gn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yn(e){return(t,n)=>{let r=!1;for(const i of jn(e)){const e=Qn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qn(e,t,n){const r=e.field.isKeyField()?re.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mt(r,i):P()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const Xn=new dt(re.comparator);function Jn(){return Xn}const Zn=new dt(re.comparator);function er(){let e=Zn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function tr(e){let t=Zn;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function nr(){return ir()}function rr(){return ir()}function ir(){return new $n((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sr=new dt(re.comparator),or=new mt(re.comparator);function ar(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const lr=new mt(Y);function cr(){return lr}function ur(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Re(t)?"-0":t}}function hr(e){return{integerValue:""+e}}function dr(e,t){return Pe(t)?hr(t):ur(e,t)}class fr{constructor(){this._=void 0}}function pr(e,t,n){return e instanceof vr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Et(t)&&(t=Ct(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yr?_r(e,t):e instanceof br?wr(e,t):function(e,t){const n=gr(e,t),r=Tr(n)+Tr(e.Pe);return Bt(n)&&Bt(e.Pe)?hr(r):ur(e.serializer,r)}(e,t)}function mr(e,t,n){return e instanceof yr?_r(e,t):e instanceof br?wr(e,t):n}function gr(e,t){return e instanceof xr?function(e){return Bt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vr extends fr{}class yr extends fr{constructor(e){super(),this.elements=e}}function _r(e,t){const n=Sr(t);for(const r of e.elements)n.some((e=>Ot(e,r)))||n.push(r);return{arrayValue:{values:n}}}class br extends fr{constructor(e){super(),this.elements=e}}function wr(e,t){let n=Sr(t);for(const r of e.elements)n=n.filter((e=>!Ot(e,r)));return{arrayValue:{values:n}}}class xr extends fr{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Tr(e){return Tt(e.integerValue||e.doubleValue)}function Sr(e){return Vt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Er{constructor(e,t){this.field=e,this.transform=t}}class Cr{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ir(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ar{}function Nr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Br(e.key,kr.none()):new Mr(e.key,e.data,kr.none());{const n=e.data,r=Xt.empty();let i=new mt(ne.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lr(e.key,r,new yt(i.toArray()),kr.none())}}function Rr(e,t,n){e instanceof Mr?function(e,t,n){const r=e.value.clone(),i=jr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Ir(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pr(e,t,n,r){return e instanceof Mr?function(e,t,n,r){if(!Ir(e.precondition,t))return n;const i=e.value.clone(),s=Ur(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!Ir(e.precondition,t))return n;const i=Ur(e.fieldTransforms,r,t),s=t.data;return s.setAll(Fr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ir(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Or(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gr(r.transform,e||null);null!=i&&(null===n&&(n=Xt.empty()),n.set(r.field,i))}return n||null}function Dr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Q(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yr&&t instanceof yr||e instanceof br&&t instanceof br?Q(e.elements,t.elements,Ot):e instanceof xr&&t instanceof xr?Ot(e.Pe,t.Pe):e instanceof vr&&t instanceof vr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mr extends Ar{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends Ar{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function jr(e,t,n){const r=new Map;O(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,mr(o,a,n[i]))}return r}function Ur(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,pr(e,s,t))}return r}class Br extends Ar{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vr extends Ar{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rr();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Nr(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(J.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ar())}isEqual(e){return this.batchId===e.batchId&&Q(this.mutations,e.mutations,((e,t)=>Dr(e,t)))&&Q(this.baseMutations,e.baseMutations,((e,t)=>Dr(e,t)))}}class Wr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){O(e.mutations.length===n.length);let r=sr;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wr(e,t,n,r)}}class qr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Hr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,Gr;function Yr(e){switch(e){default:return P();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Qr(e){if(void 0===e)return A("GRPC error has no .code"),M.UNKNOWN;switch(e){case Kr.OK:return M.OK;case Kr.CANCELLED:return M.CANCELLED;case Kr.UNKNOWN:return M.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return M.INTERNAL;case Kr.UNAVAILABLE:return M.UNAVAILABLE;case Kr.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Kr.NOT_FOUND:return M.NOT_FOUND;case Kr.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Kr.ABORTED:return M.ABORTED;case Kr.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Kr.DATA_LOSS:return M.DATA_LOSS;default:return P()}}(Gr=Kr||(Kr={}))[Gr.OK=0]="OK",Gr[Gr.CANCELLED=1]="CANCELLED",Gr[Gr.UNKNOWN=2]="UNKNOWN",Gr[Gr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gr[Gr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gr[Gr.NOT_FOUND=5]="NOT_FOUND",Gr[Gr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gr[Gr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gr[Gr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gr[Gr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gr[Gr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gr[Gr.ABORTED=10]="ABORTED",Gr[Gr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gr[Gr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gr[Gr.INTERNAL=13]="INTERNAL",Gr[Gr.UNAVAILABLE=14]="UNAVAILABLE",Gr[Gr.DATA_LOSS=15]="DATA_LOSS";let $r=null;function Xr(){return new TextEncoder}const Jr=new r([4294967295,4294967295],0);function Zr(e){const t=Xr().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function ei(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,i],0),new r([s,o],0)]}class ti{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ni("Invalid padding: ".concat(t));if(n<0)throw new ni("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ni("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ni("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=r.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(Jr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ti(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Zr(e),[n,r]=ei(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ri{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ii.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ri(J.min(),r,new dt(Y),Jn(),ar())}}class ii{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ii(n,t,ar(),ar(),ar())}}class si{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class oi{constructor(e,t){this.targetId=e,this.me=t}}class ai{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class li{constructor(){this.fe=0,this.ge=hi(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ar(),t=ar(),n=ar();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P()}})),new ii(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=hi()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,O(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ci{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jn(),this.qe=ui(),this.Qe=new dt(Y)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:P()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(An(i))if(0===n){const e=new re(i.path);this.Ue(t,e,Zt.newNoDocument(e,J.min()))}else O(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==$r||$r.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=St(n).toUint8Array()}catch(e){if(e instanceof _t)return N("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ti(s,r,i)}catch(e){return N(e instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&An(i.target)){const t=new re(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Zt.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=ar();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new ri(e,t,this.Qe,this.ke,n);return this.ke=Jn(),this.qe=ui(),this.Qe=new dt(Y),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new li,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new mt(Y),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new li),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ui(){return new dt(re.comparator)}function hi(){return new dt(re.comparator)}const di={asc:"ASCENDING",desc:"DESCENDING"},fi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pi={and:"AND",or:"OR"};class mi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gi(e,t){return e.useProto3Json||Ne(t)?t:{value:t}}function vi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function yi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _i(e,t){return vi(e,t.toTimestamp())}function bi(e){return O(!!e),J.fromTimestamp(function(e){const t=xt(e);return new X(t.seconds,t.nanos)}(e))}function wi(e,t){return xi(e,t).canonicalString()}function xi(e,t){const n=function(e){return new ee(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ti(e){const t=ee.fromString(e);return O(Hi(t)),t}function Si(e,t){return wi(e.databaseId,t.path)}function Ei(e,t){const n=Ti(t);if(n.get(1)!==e.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new re(Ai(n))}function Ci(e,t){return wi(e.databaseId,t)}function ki(e){const t=Ti(e);return 4===t.length?ee.emptyPath():Ai(t)}function Ii(e){return new ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ai(e){return O(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ni(e,t,n){return{name:Si(e,t),fields:n.value.mapValue.fields}}function Ri(e,t,n){const r=Ei(e,t.name),i=bi(t.updateTime),s=t.createTime?bi(t.createTime):J.min(),o=new Xt({mapValue:{fields:t.fields}}),a=Zt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Pi(e,t){let n;if(t instanceof Mr)n={update:Ni(e,t.key,t.value)};else if(t instanceof Br)n={delete:Si(e,t.key)};else if(t instanceof Lr)n={update:Ni(e,t.key,t.data),updateMask:qi(t.fieldMask)};else{if(!(t instanceof Vr))return P();n={verify:Si(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof br)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw P()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_i(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P()}(e,t.precondition)),n}function Oi(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?kr.updateTime(bi(e.updateTime)):void 0!==e.exists?kr.exists(e.exists):kr.none()}(t.currentDocument):kr.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)O("REQUEST_TIME"===t.setToServerValue),n=new vr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new yr(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new br(e)}else"increment"in t?n=new xr(e,t.increment):P();const r=ne.fromServerFormat(t.fieldPath);return new Er(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Ei(e,t.update.name),s=new Xt({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new yt(t.map((e=>ne.fromServerFormat(e))))}(t.updateMask);return new Lr(i,s,e,n,r)}return new Mr(i,s,n,r)}if(t.delete){const r=Ei(e,t.delete);return new Br(r,n)}if(t.verify){const r=Ei(e,t.verify);return new Vr(r,n)}return P()}function Di(e,t){return{documents:[Ci(e,t.path)]}}function Mi(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ci(e,i);const s=function(e){if(0!==e.length)return Wi(ln.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Vi(e.field),direction:ji(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gi(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Li(e){let t=ki(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Fi(e);return t instanceof ln&&hn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new rn(zi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ne(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new en(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new en(n,t)}(n.endAt)),Dn(t,i,o,s,a,"F",l,c)}function Fi(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zi(e.unaryFilter.field);return an.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zi(e.unaryFilter.field);return an.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zi(e.unaryFilter.field);return an.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zi(e.unaryFilter.field);return an.create(i,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(e):void 0!==e.fieldFilter?function(e){return an.create(zi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ln.create(e.compositeFilter.filters.map((e=>Fi(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P()}}(e.compositeFilter.op))}(e):P()}function ji(e){return di[e]}function Ui(e){return fi[e]}function Bi(e){return pi[e]}function Vi(e){return{fieldPath:e.canonicalString()}}function zi(e){return ne.fromServerFormat(e.fieldPath)}function Wi(e){return e instanceof an?function(e){if("=="===e.op){if(Wt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NAN"}};if(zt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NOT_NAN"}};if(zt(e.value))return{unaryFilter:{field:Vi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vi(e.field),op:Ui(e.op),value:e.value}}}(e):e instanceof ln?function(e){const t=e.getFilters().map((e=>Wi(e)));return 1===t.length?t[0]:{compositeFilter:{op:Bi(e.op),filters:t}}}(e):P()}function qi(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Hi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ki{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:J.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gi{constructor(e){this.ct=e}}function Yi(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qi(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Si(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vi(e,t.version.toTimestamp()),createTime:vi(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$i(t.version)};else{if(!t.isUnknownDocument())return P();r.unknownDocument={path:n.path.toArray(),version:$i(t.version)}}return r}function Qi(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $i(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xi(e){const t=new X(e.seconds,e.nanoseconds);return J.fromTimestamp(t)}function Ji(e,t){const n=(t.baseMutations||[]).map((t=>Oi(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Oi(e.ct,t))),i=X.fromMillis(t.localWriteTimeMs);return new zr(t.batchId,i,n,r)}function Zi(e){const t=Xi(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Xi(e.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return O(1===e.documents.length),Un(Mn(ki(e.documents[0])))}(e.query):function(e){return Un(Li(e))}(e.query),new Ki(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,bt.fromBase64String(e.resumeToken))}function es(e,t){const n=$i(t.snapshotVersion),r=$i(t.lastLimboFreeSnapshotVersion);let i;i=An(t.target)?Di(e.ct,t.target):Mi(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:kn(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ts(e){const t=Li({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zn(t,t.limit,"L"):t}function ns(e,t){return new qr(t.largestBatchId,Oi(e.ct,t.overlayMutation))}function rs(e,t){const n=t.path.lastSegment();return[e,Oe(t.path.popLast()),n]}function is(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:$i(r.readTime),documentKey:Oe(r.documentKey.path),largestBatchId:r.largestBatchId}}class ss{getBundleMetadata(e,t){return os(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Xi(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return os(e).put(function(e){return{bundleId:e.id,createTime:$i(bi(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return as(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ts(e.bundledQuery),readTime:Xi(e.readTime)}}(e)}))}saveNamedQuery(e,t){return as(e).put(function(e){return{name:e.name,readTime:$i(bi(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function os(e){return lt(e,"bundles")}function as(e){return lt(e,"namedQueries")}class ls{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new ls(e,n)}getOverlay(e,t){return cs(e).get(rs(this.userId,t)).next((e=>e?ns(this.serializer,e):null))}getOverlays(e,t){const n=nr();return ge.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new qr(t,i);r.push(this.ht(e,s))})),ge.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Oe(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(cs(e).j("collectionPathOverlayIndex",r))})),ge.waitFor(i)}getOverlaysForCollection(e,t,n){const r=nr(),i=Oe(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return cs(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=ns(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=nr();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cs(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=ns(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return cs(e).put(function(e,t,n){const[r,i,s]=rs(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Pi(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function cs(e){return lt(e,"documentOverlays")}class us{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Tt(e.integerValue));else if("doubleValue"in e){const n=Tt(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Re(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=xt(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(St(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Kt(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):P()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),re.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function hs(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ds(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=hs(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}us.bt=new us;class fs{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=ds(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=ds(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ps{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class ms{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class gs{constructor(){this.Gt=new fs,this.zt=new ps(this.Gt),this.jt=new ms(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vs{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new vs(this.indexId,this.documentKey,this.arrayValue,n)}}function ys(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=_s(e.arrayValue,t.arrayValue),0!==n?n:(n=_s(e.directionalValue,t.directionalValue),0!==n?n:re.comparator(e.documentKey,t.documentKey)))}function _s(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class bs{constructor(e){this.Yt=new mt(((e,t)=>ne.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(O(e.collectionGroup===this.collectionId),this.en)return!1;const t=se(e);if(void 0!==t&&!this.nn(t))return!1;const n=oe(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new mt(ne.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ae(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ae(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ae(n.field,"asc"===n.dir?0:1)));return new ie(ie.UNKNOWN_ID,this.collectionId,t,le.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ws(e){var t,n;if(O(e instanceof an||e instanceof ln),e instanceof an){if(e instanceof xn){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>an.create(e.field,"==",t))))||[];return ln.create(r,"or")}return e}const r=e.filters.map((e=>ws(e)));return ln.create(r,e.op)}function xs(e){if(0===e.getFilters().length)return[];const t=Cs(ws(e));return O(Es(t)),Ts(t)||Ss(t)?[t]:t.getFilters()}function Ts(e){return e instanceof an}function Ss(e){return e instanceof ln&&hn(e)}function Es(e){return Ts(e)||Ss(e)||function(e){if(e instanceof ln&&un(e)){for(const t of e.getFilters())if(!Ts(t)&&!Ss(t))return!1;return!0}return!1}(e)}function Cs(e){if(O(e instanceof an||e instanceof ln),e instanceof an)return e;if(1===e.filters.length)return Cs(e.filters[0]);const t=e.filters.map((e=>Cs(e)));let n=ln.create(t,e.op);return n=As(n),Es(n)?n:(O(n instanceof ln),O(cn(n)),O(n.filters.length>1),n.filters.reduce(((e,t)=>ks(e,t))))}function ks(e,t){let n;return O(e instanceof an||e instanceof ln),O(t instanceof an||t instanceof ln),n=e instanceof an?t instanceof an?function(e,t){return ln.create([e,t],"and")}(e,t):Is(e,t):t instanceof an?Is(t,e):function(e,t){if(O(e.filters.length>0&&t.filters.length>0),cn(e)&&cn(t))return mn(e,t.getFilters());const n=un(e)?e:t,r=un(e)?t:e,i=n.filters.map((e=>ks(e,r)));return ln.create(i,"or")}(e,t),As(n)}function Is(e,t){if(cn(t))return mn(t,e.getFilters());{const n=t.filters.map((t=>ks(e,t)));return ln.create(n,"or")}}function As(e){if(O(e instanceof an||e instanceof ln),e instanceof an)return e;const t=e.getFilters();if(1===t.length)return As(t[0]);if(dn(e))return e;const n=t.map((e=>As(e))),r=[];return n.forEach((t=>{t instanceof an?r.push(t):t instanceof ln&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ln.create(r,e.op)}class Ns{constructor(){this._n=new Rs}addToCollectionParentIndex(e,t){return this._n.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(he.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(he.min())}updateCollectionGroup(e,t,n){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Rs{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mt(ee.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mt(ee.comparator)).toArray()}}const Ps=new Uint8Array(0);class Os{constructor(e,t){this.databaseId=t,this.an=new Rs,this.un=new $n((e=>kn(e)),((e,t)=>In(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Oe(r)};return Ds(e).put(i)}return ge.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[$(t),""],!1,!0);return Ds(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Le(r.parent))}return n}))}addFieldIndex(e,t){const n=Ls(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Fs(e);return i.next((e=>{n.put(is(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Ls(e),r=Fs(e),i=Ms(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ls(e),n=Ms(e),r=Fs(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return ge.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new bs(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Ms(e);let r=!0;const i=new Map;return ge.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ar();const r=[];return ge.forEach(i,((i,s)=>{I("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(kn(t)));const o=function(e,t){const n=se(t);if(void 0===n)return null;for(const r of Nn(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of oe(t))for(const t of Nn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of oe(t)){const t=0===i.kind?Rn(e,i.fieldPath,e.startAt):Pn(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new en(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of oe(t)){const t=0===i.kind?Pn(e,i.fieldPath,e.endAt):Rn(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new en(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return ge.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=re.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ge.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:xs(ln.create(e.filters,"and")).map((t=>Cn(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Ps,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new vs(e,re.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new vs(e,re.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new bs(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return ge.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new mt(ne.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new gs;for(const r of oe(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);us.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new gs;return us.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new gs;return us.bt.Pt(Ut(this.databaseId,t),n.Ht(function(e){const t=oe(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new gs);let i=0;for(const s of oe(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Vt(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);us.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new gs;n.seed(e.Wt()),us.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof an&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Ls(e),r=Fs(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return ge.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new le(t.sequenceNumber,new he(Xi(t.readTime),new re(Le(t.documentKey)),t.largestBatchId)):le.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ae(ne.fromServerFormat(t),n)}));return new ie(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Y(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Ls(e),i=Fs(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ge.forEach(t,(t=>i.put(is(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ge.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ge.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ge.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?ge.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Ms(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Ms(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Ms(e);let i=new mt(ys);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new vs(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new mt(ys);const r=this.An(t,e);if(null==r)return n;const i=se(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Vt(s))for(const i of s.arrayValue.values||[])n=n.add(new vs(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new vs(t.indexId,e.key,Ps,r));return n}wn(e,t,n,r,i){I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=vt(s),l=vt(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=vt(o)):t?(i(a),a=vt(s)):(a=vt(s),l=vt(o))}}(r,i,ys,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),ge.waitFor(s)}gn(e){let t=1;return Fs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>ys(e,t))).filter(((e,t,n)=>!t||0!==ys(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=ys(s,e),i=ys(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ps,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ps,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return ys(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(js)}getMinOffset(e,t){return ge.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||P())))).next(js)}}function Ds(e){return lt(e,"collectionParents")}function Ms(e){return lt(e,"indexEntries")}function Ls(e){return lt(e,"indexConfiguration")}function Fs(e){return lt(e,"indexState")}function js(e){O(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;de(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new he(t.readTime,t.documentKey,n)}const Us={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vs(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{O(1===a)})));const c=[];for(const u of n.mutations){const e=Ue(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return ge.waitFor(s).next((()=>c))}function zs(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P();t=e.noDocument}return JSON.stringify(t).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class Ws{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){O(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Ws(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Ks(e),s=Hs(e);return s.add({}).next((o=>{O("number"==typeof o);const a=new zr(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Pi(e.ct,t))),i=n.mutations.map((t=>Pi(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new mt(((e,t)=>Y(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ue(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Be))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),ge.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Hs(e).get(t).next((e=>e?(O(e.userId===this.userId),Ji(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?ge.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Hs(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(O(t.batchId>=n),i=Ji(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Hs(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hs(e).U("userMutationsIndex",t).next((e=>e.map((e=>Ji(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=je(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ks(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Le(a);if(o===this.userId&&t.path.isEqual(c))return Hs(e).get(l).next((e=>{if(!e)throw P();O(e.userId===this.userId),i.push(Ji(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(Y);const r=[];return t.forEach((t=>{const i=je(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Ks(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Le(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),ge.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=je(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new mt(Y);return Ks(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Le(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Hs(e).get(t).next((e=>{if(null===e)throw P();O(e.userId===this.userId),n.push(Ji(this.serializer,e))})))})),ge.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Vs(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),ge.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ge.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ks(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Le(e[1]);r.push(t)}else n.done()})).next((()=>{O(0===r.length)}))}))}containsKey(e,t){return qs(e,this.userId,t)}xn(e){return Gs(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function qs(e,t,n){const r=je(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ks(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Hs(e){return lt(e,"mutations")}function Ks(e){return lt(e,"documentMutations")}function Gs(e){return lt(e,"mutationQueues")}class Ys{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ys(0)}static Ln(){return new Ys(-1)}}class Qs{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Ys(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>J.fromTimestamp(new X(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$s(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(O(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return $s(e).J(((s,o)=>{const a=Zi(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ge.waitFor(i))).next((()=>r))}forEachTarget(e,t){return $s(e).J(((e,n)=>{const r=Zi(n);t(r)}))}Bn(e){return Xs(e).get("targetGlobalKey").next((e=>(O(null!==e),e)))}kn(e,t){return Xs(e).put("targetGlobalKey",t)}qn(e,t){return $s(e).put(es(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=kn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return $s(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Zi(n);In(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Js(e);return t.forEach((t=>{const s=Oe(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ge.waitFor(r)}removeMatchingKeys(e,t,n){const r=Js(e);return ge.forEach(t,(t=>{const i=Oe(t.path);return ge.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Js(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Js(e);let i=ar();return r.J({range:n,H:!0},((e,t,n)=>{const r=Le(e[1]),s=new re(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Oe(t.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0);let i=0;return Js(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return $s(e).get(t).next((e=>e?Zi(e):null))}}function $s(e){return lt(e,"targets")}function Xs(e){return lt(e,"targetGlobal")}function Js(e){return lt(e,"targetDocuments")}function Zs(e,t){let[n,r]=e,[i,s]=t;const o=Y(n,i);return 0===o?Y(r,s):o}class eo{constructor(e){this.Kn=e,this.buffer=new mt(Zs),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Zs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class to{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){I("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xe(e)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await me(e)}await this.zn(3e5)}))}}class no{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Ae.oe);const n=new eo(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Us)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Us):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),k()<=l.$b.DEBUG&&I("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ro(e,t){return new no(e,t)}class io{constructor(e,t){this.db=e,this.garbageCollector=ro(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return so(e,n)}removeReference(e,t,n){return so(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return so(e,t)}er(e,t){return function(e,t){let n=!1;return Gs(e).Y((r=>qs(e,r,t).next((e=>(e&&(n=!0),ge.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,J.min()),Js(e).delete(function(e){return[0,Oe(e.path)]}(s)))))}));r.push(t)}})).next((()=>ge.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return so(e,t)}Xn(e,t){const n=Js(e);let r,i=Ae.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ae.oe&&t(new re(Le(r)),i),i=l,r=a):i=Ae.oe})).next((()=>{i!==Ae.oe&&t(new re(Le(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function so(e,t){return Js(e).put(function(e,t){return{targetId:0,path:Oe(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class oo{constructor(){this.changes=new $n((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ge.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ao{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ho(e).put(n)}removeEntry(e,t,n){return ho(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Qi(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Zt.newInvalidDocument(t);return ho(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fo(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Zt.newInvalidDocument(t)};return ho(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fo(t))},((e,r)=>{n={document:this.nr(t,r),size:zs(r)}})).next((()=>n))}getEntries(e,t){let n=Jn();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Jn(),r=new dt(re.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,zs(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return ge.resolve();let r=new mt(mo);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(fo(r.first()),fo(r.last())),s=r.getIterator();let o=s.getNext();return ho(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=re.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&mo(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(fo(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Qi(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ho(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Jn();for(const i of e){const e=this.nr(re.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Kn(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Jn();const s=po(t,n),o=po(t,he.max());return ho(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(re.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new co(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return uo(e).get("remoteDocumentGlobalKey").next((e=>(O(!!e),e)))}tr(e,t){return uo(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ri(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=re.fromSegments(t.noDocument.path),r=Xi(t.noDocument.readTime);n=Zt.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return P();{const e=re.fromSegments(t.unknownDocument.path),r=Xi(t.unknownDocument.version);n=Zt.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new X(e[0],e[1]);return J.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(J.min()))return e}return Zt.newInvalidDocument(e)}}function lo(e){return new ao(e)}class co extends oo{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new $n((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new mt(((e,t)=>Y(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Yi(this.ar.serializer,s);r=r.add(i.path.popLast());const l=zs(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Yi(this.ar.serializer,s.convertToNoDocument(J.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),ge.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function uo(e){return lt(e,"remoteDocumentGlobal")}function ho(e){return lt(e,"remoteDocumentsV14")}function fo(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function po(e,t){const n=t.documentKey.path.toArray();return[e,Qi(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mo(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Y(n[s],r[s]),i)return i;return i=Y(n.length,r.length),i||(i=Y(n[n.length-2],r[r.length-2]),i||Y(n[n.length-1],r[r.length-1]))}class go{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Pr(n.mutation,e,yt.empty(),X.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ar()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar();const r=nr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=er();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=nr();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ar())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Jn();const s=ir(),o=ir();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lr)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Pr(o.mutation,t,o.mutation.getFieldMask(),X.now())):s.set(t.key,yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new go(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ir();let r=new dt(((e,t)=>e-t)),i=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||yt.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ar()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=rr();l.forEach((e=>{if(!i.has(e)){const r=Nr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ge.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return re.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ge.resolve(nr());let o=-1,a=i;return s.next((t=>ge.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ge.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ar()))).next((e=>({batchId:o,changes:tr(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next((e=>{let t=er();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=er();return this.indexManager.getCollectionParents(e,i).next((o=>ge.forEach(o,(o=>{const a=function(e,t){return new On(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Zt.newInvalidDocument(r)))}));let n=er();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Pr(s.mutation,r,yt.empty(),X.now()),Kn(t,r)&&(n=n.insert(e,r))})),n}))}}class yo{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ge.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bi(e.createTime)}}(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:ts(e.bundledQuery),readTime:bi(e.readTime)}}(t)),ge.resolve()}}class _o{constructor(){this.overlays=new dt(re.comparator),this.hr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nr();return ge.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),ge.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),ge.resolve()}getOverlaysForCollection(e,t,n){const r=nr(),i=t.length+1,s=new re(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ge.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new dt(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nr(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nr(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ge.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qr(t,n));let i=this.hr.get(t);void 0===i&&(i=ar(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class bo{constructor(){this.Pr=new mt(wo.Ir),this.Tr=new mt(wo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new wo(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new wo(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new re(new ee([])),n=new wo(t,e),r=new wo(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new re(new ee([])),n=new wo(t,e),r=new wo(t,e+1);let i=ar();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wo(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wo{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return re.comparator(e.key,t.key)||Y(e.pr,t.pr)}static Er(e,t){return Y(e.pr,t.pr)||re.comparator(e.key,t.key)}}class xo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new mt(wo.Ir)}checkEmpty(e){return ge.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zr(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new wo(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ge.resolve(s)}lookupMutationBatch(e,t){return ge.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wo(t,0),r=new wo(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),ge.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(Y);return t.forEach((e=>{const t=new wo(e,0),r=new wo(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),ge.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;re.isDocumentKey(i)||(i=i.child(""));const s=new wo(new re(i),0);let o=new mt(Y);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),ge.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){O(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return ge.forEach(t.mutations,(r=>{const i=new wo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new wo(t,0),r=this.wr.firstAfterOrEqual(n);return ge.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class To{constructor(e){this.vr=e,this.docs=new dt(re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ge.resolve(n?n.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let n=Jn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Zt.newInvalidDocument(e))})),ge.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Jn();const s=t.path,o=new re(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||de(ue(o),n)<=0||(r.has(o.key)||Kn(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P()}Fr(e,t){return ge.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new So(this)}getSize(e){return ge.resolve(this.size)}}class So extends oo{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),ge.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Eo{constructor(e){this.persistence=e,this.Mr=new $n((e=>kn(e)),In),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bo,this.targetCount=0,this.Lr=Ys.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),ge.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ys(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.qn(t),ge.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ge.waitFor(i).next((()=>r))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return ge.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),ge.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ge.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return ge.resolve(n)}containsKey(e,t){return ge.resolve(this.Nr.containsKey(t))}}class Co{constructor(e,t){this.Br={},this.overlays={},this.kr=new Ae(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Eo(this),this.indexManager=new Ns,this.remoteDocumentCache=function(e){return new To(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Gi(t),this.$r=new yo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _o,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new xo(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){I("MemoryPersistence","Starting transaction:",e);const r=new ko(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return ge.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class ko extends pe{constructor(e){super(),this.currentSequenceNumber=e}}class Io{constructor(e){this.persistence=e,this.zr=new bo,this.jr=null}static Hr(e){return new Io(e)}get Jr(){if(this.jr)return this.jr;throw P()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),ge.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ge.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Jr,(n=>{const r=re.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,J.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return ge.or([()=>ge.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ao{constructor(e){this.serializer=e}O(e,t,n,r){const i=new ve("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fe,{unique:!0}),e.createObjectStore("documentMutations")}(e),No(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ge.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),No(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fe,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ge.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Je});t.createIndex("collectionPathOverlayIndex",Ze,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",et,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ve});t.createIndex("documentKeyIndex",ze),t.createIndex("collectionGroupIndex",We)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ye}).createIndex("sequenceNumberIndex",Qe,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:$e}).createIndex("documentKeyIndex",Xe,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=zs(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>ge.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>ge.forEach(n,(n=>{O(n.userId===t.userId);const r=Ji(this.serializer,n);return Vs(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new ee(n),o=function(e){return[0,Oe(e)]}(s);r.push(t.get(o).next((n=>n?ge.resolve():(n=>t.put({targetId:0,path:Oe(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ge.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ge});const n=t.store("collectionParents"),r=new Rs,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Oe(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new ee(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Le(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Zi(n),i=es(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new re(ee.fromString(e.document.name).popFirst(5)):e.noDocument?re.fromSegments(e.noDocument.path):e.unknownDocument?re.fromSegments(e.unknownDocument.path):P()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>ge.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=lo(this.serializer),i=new Co(Io.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ar();Ji(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ge.forEach(n,((e,n)=>{const s=new S(n),o=ls.lt(this.serializer,s),a=i.getIndexManager(s),l=Ws.lt(s,this.serializer,a,i.referenceDelegate);return new vo(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new at(t,Ae.oe),e).next()}))}))}}function No(e){e.createObjectStore("targetDocuments",{keyPath:He}).createIndex("documentTargetsIndex",Ke,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qe,{unique:!0}),e.createObjectStore("targetGlobal")}const Ro="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Po{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Po.D())throw new L(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new io(this,r),this.Ti=t+"main",this.serializer=new Gi(a),this.Ei=new ye(this.Ti,this.ui,new Ao(this.serializer)),this.Qr=new Qs(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lo(this.serializer),this.$r=new ss,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&A("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new L(M.FAILED_PRECONDITION,Ro);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Ae(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Do(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(xe(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Oo(e).get("owner").next((e=>ge.resolve(this.Si(e))))}bi(e){return Do(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=lt(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ge.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ge.resolve(!0):Oo(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new L(M.FAILED_PRECONDITION,Ro);return!1}}return!(!this.networkEnabled||!this.inForeground)||Do(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&I("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new at(e,Ae.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Do(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Ws.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Os(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ls.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){I("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?ot:15===e?st:14===e?it:13===e?rt:12===e?nt:11===e?tt:void P()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new at(r,this.kr?this.kr.next():Ae.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw A("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new L(M.FAILED_PRECONDITION,fe);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Oo(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new L(M.FAILED_PRECONDITION,Ro)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oo(e).put("owner",t)}static D(){return ye.D()}yi(e){const t=Oo(e);return t.get("owner").next((e=>this.Si(e)?(I("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(A("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;(0,c.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return I("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return A("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){A("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Oo(e){return lt(e,"owner")}function Do(e){return lt(e,"clientMetadata")}function Mo(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Lo{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=ar(),r=ar();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lo(e,t.fromCache,n,r)}}class Fo{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jo{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,c.nr)()?8:_e((0,c.ZQ)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Fo;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(k()<=l.$b.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",Hn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ge.resolve()):(k()<=l.$b.DEBUG&&I("QueryEngine","Query:",Hn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(k()<=l.$b.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",Hn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):ge.resolve())}ji(e,t){if(Ln(t))return ge.resolve(null);let n=Un(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=zn(t,null,"F"),n=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ar(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,zn(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Ln(t)||r.isEqual(J.min())?ge.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?ge.resolve(null):(k()<=l.$b.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hn(t)),this.es(e,s,t,ce(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new mt(Yn(e));return t.forEach(((t,r)=>{Kn(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return k()<=l.$b.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Hn(t)),this.zi.getDocumentsMatchingQuery(e,t,he.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Uo{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new dt(Y),this.rs=new $n((e=>kn(e)),In),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vo(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Bo(e,t,n,r){return new Uo(e,t,n,r)}async function Vo(e,t){const n=D(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ar();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function zo(e){const t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Wo(e,t,n){let r=ar(),i=ar();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Jn();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(J.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):I("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function qo(e,t){const n=D(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ho(e,t){const n=D(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,ge.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Ki(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Ko(e,t,n){const r=D(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!xe(e))throw e;I("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Go(e,t,n){const r=D(e);let i=J.min(),s=ar();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=D(e),i=r.rs.get(n);return void 0!==i?ge.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Un(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:J.min(),n?s:ar()))).next((e=>($o(r,Gn(t),e),{documents:e,hs:s})))))}function Yo(e,t){const n=D(e),r=D(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function Qo(e,t){const n=D(e),r=n.ss.get(t)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,ce(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>($o(n,t,e),e)))}function $o(e,t,n){let r=e.ss.get(t)||J.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar();const r=await Ho(e,Un(ts(t.bundledQuery))),i=D(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=bi(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(bt.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Jo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zo(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ea(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class ta{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new L(r.error.code,r.error.message))),s?new ta(e,t,r.state,i):(A("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class na{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new L(n.error.code,n.error.message))),i?new na(e,n.state,r):(A("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ra{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=cr();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Pe(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new ra(e,i):(A("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ia{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ia(t.clientId,t.onlineState):(A("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class sa{constructor(){this.activeTargetIds=cr()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oa{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new dt(Y),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Jo(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new sa),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Jo(this.persistenceKey,n));if(e){const t=ra.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ea(this.persistenceKey,e));if(n){const r=na.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ea(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return I("SharedClientState","READ",e,t),t}setItem(e,t){I("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(I("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void A("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Ae.oe;if(null!=e)try{const n=JSON.parse(e);O("number"==typeof n),t=n}catch(e){A("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ae.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new ta(this.currentUser,e,t,n),i=Zo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Zo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=ea(this.persistenceKey,e),i=new na(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return ra.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ta.Es(new S(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return na.Es(r,t)}xs(e){return ia.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);I("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=cr();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class aa{constructor(){this.no=new sa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new sa,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class la{io(e){}shutdown(){}}class ca{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ua=null;function ha(){return null===ua?ua=268435456+Math.round(2147483648*Math.random()):ua++,"0x"+ua.toString(16)}const da={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fa{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const pa="WebChannelConnection";class ma extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=ha(),o=this.vo(e,t.toUriEncodedString());I("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(I("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw N("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=da[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=ha();return new Promise(((s,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(m.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case g.NO_ERROR:const t=a.getResponseJson();I(pa,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case g.TIMEOUT:I(pa,"RPC '".concat(e,"' ").concat(i," timed out")),o(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case g.HTTP_ERROR:const n=a.getStatus();if(I(pa,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(t)>=0?t:M.UNKNOWN}(t.status);o(new L(e,t.message))}else o(new L(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(M.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{I(pa,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);I(pa,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=ha(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=b(),o=_(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new f({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");I(pa,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const m=new fa({lo:t=>{d?I(pa,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(I(pa,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),I(pa,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),g=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return g(u,p.EventType.OPEN,(()=>{d||(I(pa,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.mo())})),g(u,p.EventType.CLOSE,(()=>{d||(d=!0,I(pa,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.po())})),g(u,p.EventType.ERROR,(t=>{d||(d=!0,N(pa,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),m.po(new L(M.UNAVAILABLE,"The operation could not be completed")))})),g(u,p.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];O(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){I(pa,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Kr[e];if(void 0!==t)return Qr(t)}(t),i=o.message;void 0===n&&(n=M.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,m.po(new L(n,i)),u.close()}else I(pa,"RPC '".concat(e,"' stream ").concat(r," received:"),i),m.yo(i)}})),g(o,y.STAT_EVENT,(t=>{t.stat===v.PROXY?I(pa,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===v.NOPROXY&&I(pa,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{m.fo()}),0),m}}function ga(){return"undefined"!=typeof window?window:null}function va(){return"undefined"!=typeof document?document:null}function ya(e){return new mi(e,!0)}class _a{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&I("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class ba{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new _a(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(A(t.toString()),A("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===M.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new L(M.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return I("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wa extends ba{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t),bt.fromBase64String(t||"")):(O(void 0===t||t instanceof Buffer||t instanceof Uint8Array),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?M.UNKNOWN:Qr(e.code);return new L(t,e.message||"")}(o);n=new ai(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ei(e,r.document.name),s=bi(r.document.updateTime),o=r.document.createTime?bi(r.document.createTime):J.min(),a=new Xt({mapValue:{fields:r.document.fields}}),l=Zt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new si(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ei(e,r.document),s=r.readTime?bi(r.readTime):J.min(),o=Zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new si([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ei(e,r.document),s=r.removedTargetIds||[];n=new si([],s,i,null)}else{if(!("filter"in t))return P();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Hr(r,i),o=e.targetId;n=new oi(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return J.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?J.min():t.readTime?bi(t.readTime):J.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Ii(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=An(r)?{documents:Di(e,r)}:{query:Mi(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yi(e,t.resumeToken);const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(J.min())>0){n.readTime=vi(e,t.snapshotVersion.toTimestamp());const r=gi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Ii(this.serializer),t.removeTarget=e,this.i_(t)}}class xa extends ba{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(O(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(O(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?bi(e.updateTime):bi(t);return n.isEqual(J.min())&&(n=bi(t)),new Cr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=bi(e.commitTime);return this.listener.A_(n,t)}return O(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Ii(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Pi(this.serializer,e)))};this.i_(t)}}class Ta extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,xi(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(M.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,xi(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(M.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Sa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(A(t),this.y_=!1):I("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Ea{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Da(this)&&(I("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=D(e);t.M_.add(4),await ka(t),t.N_.set("Unknown"),t.M_.delete(4),await Ca(t)}(this))}))})),this.N_=new Sa(n,r)}}async function Ca(e){if(Da(e))for(const t of e.x_)await t(!0)}async function ka(e){for(const t of e.x_)await t(!1)}function Ia(e,t){const n=D(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Oa(n)?Pa(n):Za(n).Xo()&&Na(n,t))}function Aa(e,t){const n=D(e),r=Za(n);n.F_.delete(t),r.Xo()&&Ra(n,t),0===n.F_.size&&(r.Xo()?r.n_():Da(n)&&n.N_.set("Unknown"))}function Na(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(J.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Za(e).P_(t)}function Ra(e,t){e.L_.xe(t),Za(e).I_(t)}function Pa(e){e.L_=new ci({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Za(e).start(),e.N_.w_()}function Oa(e){return Da(e)&&!Za(e).Zo()&&e.F_.size>0}function Da(e){return 0===D(e).M_.size}function Ma(e){e.L_=void 0}async function La(e){e.N_.set("Online")}async function Fa(e){e.F_.forEach(((t,n)=>{Na(e,t)}))}async function ja(e,t){Ma(e),Oa(e)?(e.N_.D_(t),Pa(e)):e.N_.set("Unknown")}async function Ua(e,t,n){if(e.N_.set("Online"),t instanceof ai&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){I("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ba(e,n)}else if(t instanceof si?e.L_.Ke(t):t instanceof oi?e.L_.He(t):e.L_.We(t),!n.isEqual(J.min()))try{const t=await zo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),Ra(e,t);const i=new Ki(r.target,t,n,r.sequenceNumber);Na(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){I("RemoteStore","Failed to raise snapshot:",t),await Ba(e,t)}}async function Ba(e,t,n){if(!xe(t))throw t;e.M_.add(1),await ka(e),e.N_.set("Offline"),n||(n=()=>zo(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{I("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Ca(e)}))}function Va(e,t){return t().catch((n=>Ba(e,n,t)))}async function za(e){const t=D(e),n=el(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Wa(t);)try{const e=await qo(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,qa(t,e)}catch(e){await Ba(t,e)}Ha(t)&&Ka(t)}function Wa(e){return Da(e)&&e.v_.length<10}function qa(e,t){e.v_.push(t);const n=el(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Ha(e){return Da(e)&&!el(e).Zo()&&e.v_.length>0}function Ka(e){el(e).start()}async function Ga(e){el(e).V_()}async function Ya(e){const t=el(e);for(const n of e.v_)t.d_(n.mutations)}async function Qa(e,t,n){const r=e.v_.shift(),i=Wr.from(r,t,n);await Va(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await za(e)}async function $a(e,t){t&&el(e).E_&&await async function(e,t){if(function(e){return Yr(e)&&e!==M.ABORTED}(t.code)){const n=e.v_.shift();el(e).t_(),await Va(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await za(e)}}(e,t),Ha(e)&&Ka(e)}async function Xa(e,t){const n=D(e);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=Da(n);n.M_.add(3),await ka(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Ca(n)}async function Ja(e,t){const n=D(e);t?(n.M_.delete(2),await Ca(n)):t||(n.M_.add(2),await ka(n),n.N_.set("Unknown"))}function Za(e){return e.B_||(e.B_=function(e,t,n){const r=D(e);return r.f_(),new wa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:La.bind(null,e),To:Fa.bind(null,e),Ao:ja.bind(null,e),h_:Ua.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Oa(e)?Pa(e):e.N_.set("Unknown")):(await e.B_.stop(),Ma(e))}))),e.B_}function el(e){return e.k_||(e.k_=function(e,t,n){const r=D(e);return r.f_(),new xa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Ga.bind(null,e),Ao:$a.bind(null,e),R_:Ya.bind(null,e),A_:Qa.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await za(e)):(await e.k_.stop(),e.v_.length>0&&(I("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class tl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new tl(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nl(e,t){if(A("AsyncQueue","".concat(t,": ").concat(e)),xe(e))return new L(M.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class rl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||re.comparator(t.key,n.key):(e,t)=>re.comparator(e.key,t.key),this.keyedMap=er(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new rl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class il{constructor(){this.q_=new dt(re.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):P():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class sl{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new sl(e,t,rl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ol{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class al{constructor(){this.queries=new $n((e=>qn(e)),Wn),this.onlineState="Unknown",this.z_=new Set}}async function ll(e,t){const n=D(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new ol,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=nl(e,"Initialization of query '".concat(Hn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&dl(n)}async function cl(e,t){const n=D(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ul(e,t){const n=D(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&dl(n)}function hl(e,t,n){const r=D(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function dl(e){e.z_.forEach((e=>{e.next()}))}var fl,pl;(pl=fl||(fl={})).J_="default",pl.Cache="cache";class ml{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==fl.Cache}}class gl{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class vl{constructor(e){this.serializer=e}Ps(e){return Ei(this.serializer,e)}Is(e){return e.metadata.exists?Ri(this.serializer,e.document,!1):Zt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return bi(e)}}class yl{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_l(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=ee.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new vl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ar()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=D(e);let s=ar(),o=Jn();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Ho(i,function(e){return Un(Mn(ee.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Wo(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new vl(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await Xo(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function _l(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class bl{constructor(e){this.key=e}}class wl{constructor(e){this.key=e}}class xl{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ar(),this.mutatedKeys=ar(),this.Ia=Yn(e),this.Ta=new rl(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new il,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Kn(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new sl(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new il,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ar(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new wl(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new bl(n))})),t}pa(e){this.la=e.hs,this.Pa=ar();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return sl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Tl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Sl{constructor(e){this.key=e,this.wa=!1}}class El{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new $n((e=>qn(e)),Wn),this.Da=new Map,this.Ca=new Set,this.va=new dt(re.comparator),this.Fa=new Map,this.Ma=new bo,this.xa={},this.Oa=new Map,this.Na=Ys.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Cl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tc(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Il(r,t,n,!0),i}async function kl(e,t){const n=tc(e);await Il(n,t,!0,!1)}async function Il(e,t,n,r){const i=await Ho(e.localStore,Un(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Al(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ia(e.remoteStore,i),a}async function Al(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await Go(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Vl(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Go(e.localStore,t,!0),o=new xl(t,s.hs),a=o.da(s.documents),l=ii.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Vl(e,n,c.fa);const u=new Tl(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function Nl(e,t,n){const r=D(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Wn(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ko(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Aa(r.remoteStore,i.targetId),Ul(r,i.targetId)})).catch(me)):(Ul(r,i.targetId),await Ko(r.localStore,i.targetId,!0))}async function Rl(e,t){const n=D(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Aa(n.remoteStore,r.targetId))}async function Pl(e,t){const n=D(e);try{const e=await function(e,t){const n=D(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=Jn(),l=ar();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Wo(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(J.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ge.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?O(r.wa):e.removedDocuments.size>0&&(O(r.wa),r.wa=!1))})),await ql(n,e,t)}catch(e){await me(e)}}function Ol(e,t,n){const r=D(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=D(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&dl(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dl(e,t,n){const r=D(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new dt(re.comparator);e=e.insert(s,Zt.newNoDocument(s,J.min()));const n=ar().add(s),i=new ri(J.min(),new Map,new dt(Y),e,n);await Pl(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Wl(r)}else await Ko(r.localStore,t,!1).then((()=>Ul(r,t,n))).catch(me)}async function Ml(e,t){const n=D(e),r=t.batch.batchId;try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ge.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);O(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ar();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);jl(n,r,null),Fl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ql(n,e)}catch(e){await me(e)}}async function Ll(e,t,n){const r=D(e);try{const e=await function(e,t){const n=D(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(O(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);jl(r,t,n),Fl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ql(r,e)}catch(n){await me(n)}}function Fl(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function jl(e,t,n){const r=D(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Ul(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Bl(e,t)}))}function Bl(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Aa(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Wl(e))}function Vl(e,t,n){for(const r of n)r instanceof bl?(e.Ma.addReference(r.key,t),zl(e,r)):r instanceof wl?(I("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Bl(e,r.key)):P()}function zl(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(I("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Wl(e))}function Wl(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new re(ee.fromString(t)),r=e.Na.next();e.Fa.set(r,new Sl(n)),e.va=e.va.insert(n,r),Ia(e.remoteStore,new Ki(Un(Mn(n.path)),r,"TargetPurposeLimboResolution",Ae.oe))}}async function ql(e,t,n){const r=D(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Lo.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=D(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ge.forEach(t,(t=>ge.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ge.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xe(e))throw e;I("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Hl(e,t){const n=D(e);if(!n.currentUser.isEqual(t)){I("SyncEngine","User change. New user:",t.toKey());const e=await Vo(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new L(M.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ql(n,e.us)}}function Kl(e,t){const n=D(e),r=n.Fa.get(t);if(r&&r.wa)return ar().add(r.key);{let e=ar();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function Gl(e,t){const n=D(e),r=await Go(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&Vl(n,t.targetId,i.fa),i}async function Yl(e,t){const n=D(e);return Qo(n.localStore,t).then((e=>ql(n,e)))}async function Ql(e,t,n,r){const i=D(e),s=await function(e,t){const n=D(e),r=D(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ge.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await za(i.remoteStore):"acknowledged"===n||"rejected"===n?(jl(i,t,r||null),Fl(i,t),function(e,t){D(D(e).mutationQueue).Mn(t)}(i.localStore,t)):P(),await ql(i,s)):I("SyncEngine","Cannot apply mutation batch with id: "+t)}async function $l(e,t,n){const r=D(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await Ho(r.localStore,Un(t[0]));for(const e of t){const t=r.ba.get(e),n=await Gl(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Yo(r.localStore,o);e=await Ho(r.localStore,t),await Al(r,Xl(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function Xl(e){return Dn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jl(e){return function(e){return D(D(e).persistence).Bi()}(D(e).localStore)}async function Zl(e,t,n,r){const i=D(e);if(i.La)return void I("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Qo(i.localStore,Gn(s[0])),r=ri.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,bt.EMPTY_BYTE_STRING);await ql(i,e,r);break}case"rejected":await Ko(i.localStore,t,!0),Ul(i,t,r);break;default:P()}}async function ec(e,t,n){const r=tc(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){I("SyncEngine","Adding an already active target "+e);continue}const t=await Yo(r.localStore,e),n=await Ho(r.localStore,t);await Al(r,Xl(t),n.targetId,!1,n.resumeToken),Ia(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await Ko(r.localStore,e,!1).then((()=>{Aa(r.remoteStore,e),Ul(r,e)})).catch(me)}}function tc(e){const t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dl.bind(null,t),t.Sa.h_=ul.bind(null,t.eventManager),t.Sa.ka=hl.bind(null,t.eventManager),t}function nc(e){const t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ml.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ll.bind(null,t),t}class rc{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ya(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Bo(this.persistence,new jo,e.initialUser,this.serializer)}createPersistence(e){return new Co(Io.Hr,this.serializer)}createSharedClientState(e){return new aa}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ic extends rc{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await nc(this.Qa.syncEngine),await za(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Bo(this.persistence,new jo,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new to(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ie(t,this.persistence);return new ke(e.asyncQueue,n)}createPersistence(e){const t=Mo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new Po(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ga(),va(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new aa}}class sc extends ic{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof oa&&(this.sharedClientState.syncEngine={Zs:Ql.bind(null,t),Xs:Zl.bind(null,t),eo:ec.bind(null,t),Bi:Jl.bind(null,t),Ys:Yl.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=D(e);if(tc(n),nc(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await $l(n,e.toArray());n.La=!0,await Ja(n.remoteStore,!0);for(const r of t)Ia(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Ul(n,i),Ko(n.localStore,i,!0)))),Aa(n.remoteStore,i)})),await t,await $l(n,e),function(e){const t=D(e);t.Fa.forEach(((e,n)=>{Aa(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new dt(re.comparator)}(n),n.La=!1,await Ja(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=ga();if(!oa.D(t))throw new L(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Mo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oa(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class oc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ol(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hl.bind(null,this.syncEngine),await Ja(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new al}createDatastore(e){const t=ya(e.databaseInfo.databaseId),n=function(e){return new ma(e)}(e.databaseInfo);return function(e,t,n,r){return new Ta(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ea(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ol(this.syncEngine,e,0)),ca.D()?new ca:new la)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new El(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=D(e);I("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await ka(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ac(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class lc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):A("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class cc{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new F,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new gl(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class uc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=D(e),r={documents:t.map((e=>Si(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,ee.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){O(!!t.found),t.found.name,t.found.updateTime;const n=Ei(e,t.found.name),r=bi(t.found.updateTime),i=t.found.createTime?bi(t.found.createTime):J.min(),s=new Xt({mapValue:{fields:t.found.fields}});return Zt.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){O(!!t.missing),O(!!t.readTime);const n=Ei(e,t.missing),r=bi(t.readTime);return Zt.newNoDocument(n,r)}(e,t):P()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());O(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Br(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=re.fromPath(t);this.mutations.push(new Vr(n,this.precondition(n)))})),await async function(e,t){const n=D(e),r={writes:t.map((e=>Pi(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,ee.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw P();t=J.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new L(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?kr.exists(!1):kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new L(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hc{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new _a(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new uc(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Ne(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yr(t)}return!1}}class dc{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{I("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(I("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=nl(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function fc(e,t){e.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Vo(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function pc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gc(e);I("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Xa(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Xa(t.remoteStore,n))),e._onlineComponents=t}function mc(e){return"FirebaseError"===e.name?e.code===M.FAILED_PRECONDITION||e.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{await fc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!mc(n))throw n;N("Error using user provided cache. Falling back to memory cache: "+n),await fc(e,new rc)}}else I("FirestoreClient","Using default OfflineComponentProvider"),await fc(e,new rc);return e._offlineComponents}async function vc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),await pc(e,e._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),await pc(e,new oc))),e._onlineComponents}function yc(e){return gc(e).then((e=>e.persistence))}function _c(e){return gc(e).then((e=>e.localStore))}function bc(e){return vc(e).then((e=>e.remoteStore))}function wc(e){return vc(e).then((e=>e.syncEngine))}function xc(e){return vc(e).then((e=>e.datastore))}async function Tc(e){const t=await vc(e),n=t.eventManager;return n.onListen=Cl.bind(null,t.syncEngine),n.onUnlisten=Nl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rl.bind(null,t.syncEngine),n}function Sc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lc({next:s=>{t.enqueueAndForget((()=>cl(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ml(Mn(n.path),s,{includeMetadataChanges:!0,ra:!0});return ll(e,o)}(await Tc(e),e.asyncQueue,t,n,r))),r.promise}function Ec(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lc({next:n=>{t.enqueueAndForget((()=>cl(e,o))),n.fromCache&&"server"===r.source?i.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ml(n,s,{includeMetadataChanges:!0,ra:!0});return ll(e,o)}(await Tc(e),e.asyncQueue,t,n,r))),r.promise}function Cc(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Xr().encode(e):e,function(e,t){return new cc(e,t)}(function(e,t){if(e instanceof Uint8Array)return ac(e,t);if(e instanceof ArrayBuffer)return ac(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ya(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=D(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=D(e),r=bi(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(_l(r));const i=new yl(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await ql(e,o.ca,void 0),await function(e,t){const n=D(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return N("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await wc(e),i,r)}))}function kc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ic=new Map;function Ac(e,t,n){if(!n)throw new L(M.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Nc(e,t,n,r){if(!0===t&&!0===r)throw new L(M.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Rc(e){if(!re.isDocumentKey(e))throw new L(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Pc(e){if(re.isDocumentKey(e))throw new L(M.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Oc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":P()}function Dc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oc(e);throw new L(M.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Mc(e,t){if(t<=0)throw new L(M.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Lc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new W(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ic.get(e);t&&(I("ComponentProvider","Removing Datastore"),Ic.delete(e),t.terminate())}(this),Promise.resolve()}}function jc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Dc(e,Fc))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&N("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,c.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(s)}e._authCredentials=new B(new j(t,n))}}class Uc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Uc(this.firestore,e,this._query)}}class Bc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bc(this.firestore,e,this._key)}}class Vc extends Uc{constructor(e,t,n){super(e,t,Mn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bc(this.firestore,null,new re(e))}withConverter(e){return new Vc(this.firestore,e,this._path)}}function zc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),Ac("collection","path",t),e instanceof Fc){const n=ee.fromString(t,...r);return Pc(n),new Vc(e,null,n)}{if(!(e instanceof Bc||e instanceof Vc))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ee.fromString(t,...r));return Pc(n),new Vc(e.firestore,null,n)}}function Wc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=G.newId()),Ac("doc","path",t),e instanceof Fc){const n=ee.fromString(t,...r);return Rc(n),new Bc(e,null,new re(n))}{if(!(e instanceof Bc||e instanceof Vc))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ee.fromString(t,...r));return Rc(n),new Bc(e.firestore,e instanceof Vc?e.converter:null,new re(n))}}function qc(e,t){return e=(0,c.Ku)(e),t=(0,c.Ku)(t),(e instanceof Bc||e instanceof Vc)&&(t instanceof Bc||t instanceof Vc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Hc(e,t){return e=(0,c.Ku)(e),t=(0,c.Ku)(t),e instanceof Uc&&t instanceof Uc&&e.firestore===t.firestore&&Wn(e._query,t._query)&&e.converter===t.converter}class Kc{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new _a(this,"async_queue_retry"),this.hu=()=>{const e=va();e&&I("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=va();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=va();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new F;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!xe(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw A("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=tl.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&P()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function Gc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Yc{constructor(){this._progressObserver={},this._taskCompletionResolver=new F,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qc extends Fc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Kc,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xc(this),this._firestoreClient.terminate()}}function $c(e){return e._firestoreClient||Xc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xc(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new It(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,kc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new dc(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Jc(e,t,n){const r=new F;return e.asyncQueue.enqueue((async()=>{try{await fc(e,n),await pc(e,t),r.resolve()}catch(e){const n=e;if(!mc(n))throw n;N("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Zc(e){return function(e){const t=new F;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=D(e);Da(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=D(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=nl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await wc(e),t))),t.promise}($c(e=Dc(e,Qc)))}function eu(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yc(e),n=await bc(e);return t.setNetworkEnabled(!0),function(e){const t=D(e);return t.M_.delete(0),Ca(t)}(n)}))}($c(e=Dc(e,Qc)))}function tu(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yc(e),n=await bc(e);return t.setNetworkEnabled(!1),async function(e){const t=D(e);t.M_.add(0),await ka(t),t.N_.set("Offline")}(n)}))}($c(e=Dc(e,Qc)))}function nu(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=D(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await _c(e),t)))}($c(e=Dc(e,Qc)),t).then((t=>t?new Uc(e,null,t.query):null))}function ru(e){if(e._initialized||e._terminated)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(bt.fromBase64String(e))}catch(e){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new iu(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ne(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ou{constructor(e){this._methodName=e}}class au{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}}const lu=/^__.*__$/;class cu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mr(e,this.data,t,this.fieldTransforms)}}class uu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}class du{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new du(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Pu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(hu(this.fu)&&lu.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class fu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ya(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new du({fu:e,methodName:t,vu:n,path:ne.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pu(e){const t=e._freezeSettings(),n=ya(e._databaseId);return new fu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Iu("Data must be an object, but it was:",o,r);const a=Cu(r,o);let l,c;if(s.merge)l=new yt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Au(t,r,n);if(!o.contains(i))throw new L(M.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ou(e,i)||e.push(i)}l=new yt(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new cu(new Xt(a),l,c)}class gu extends ou{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gu}}function vu(e,t,n){return new du({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yu extends ou{_toFieldTransform(e){return new Er(e.path,new vr)}isEqual(e){return e instanceof yu}}class _u extends ou{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vu(this,e,!0),n=this.Mu.map((e=>Eu(e,t))),r=new yr(n);return new Er(e.path,r)}isEqual(e){return e instanceof _u&&(0,c.bD)(this.Mu,e.Mu)}}class bu extends ou{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vu(this,e,!0),n=this.Mu.map((e=>Eu(e,t))),r=new br(n);return new Er(e.path,r)}isEqual(e){return e instanceof bu&&(0,c.bD)(this.Mu,e.Mu)}}class wu extends ou{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new xr(e.serializer,dr(e.serializer,this.xu));return new Er(e.path,t)}isEqual(e){return e instanceof wu&&this.xu===e.xu}}function xu(e,t,n,r){const i=e.Fu(1,t,n);Iu("Data must be an object, but it was:",i,r);const s=[],o=Xt.empty();ut(r,((e,r)=>{const a=Ru(t,e,n);r=(0,c.Ku)(r);const l=i.Su(a);if(r instanceof gu)s.push(a);else{const e=Eu(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new yt(s);return new uu(o,a,i.fieldTransforms)}function Tu(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Au(t,r,n)],l=[i];if(s.length%2!=0)throw new L(M.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let c=0;c<s.length;c+=2)a.push(Au(t,s[c])),l.push(s[c+1]);const u=[],h=Xt.empty();for(let f=a.length-1;f>=0;--f)if(!Ou(u,a[f])){const e=a[f];let t=l[f];t=(0,c.Ku)(t);const n=o.Su(e);if(t instanceof gu)u.push(e);else{const r=Eu(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new yt(u);return new uu(h,d,o.fieldTransforms)}function Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Eu(n,e.Fu(r?4:3,t))}function Eu(e,t){if(ku(e=(0,c.Ku)(e)))return Iu("Unsupported field value:",t,e),Cu(e,t);if(e instanceof ou)return function(e,t){if(!hu(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Eu(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=X.fromDate(e);return{timestampValue:vi(t.serializer,n)}}if(e instanceof X){const n=new X(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vi(t.serializer,n)}}if(e instanceof au)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iu)return{bytesValue:yi(t.serializer,e._byteString)};if(e instanceof Bc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:wi(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Oc(e)))}(e,t)}function Cu(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,((e,r)=>{const i=Eu(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ku(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof X||e instanceof au||e instanceof iu||e instanceof Bc||e instanceof ou)}function Iu(e,t,n){if(!ku(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Oc(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Au(e,t,n){if((t=(0,c.Ku)(t))instanceof su)return t._internalPath;if("string"==typeof t)return Ru(e,t);throw Pu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nu=new RegExp("[~\\*/\\[\\]]");function Ru(e,t,n){if(t.search(Nu)>=0)throw Pu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new su(...t.split("."))._internalPath}catch(r){throw Pu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Pu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new L(M.INVALID_ARGUMENT,a+e+l)}function Ou(e,t){return e.some((e=>e.isEqual(t)))}class Du{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mu extends Du{data(){return super.data()}}function Lu(e,t){return"string"==typeof t?Ru(e,t):t instanceof su?t._internalPath:t._delegate._internalPath}function Fu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ju{}class Uu extends ju{}function Bu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof ju&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof zu)).length,n=e.filter((e=>e instanceof Vu)).length;if(t>1||t>0&&n>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Vu extends Uu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vu(e,t,n)}_apply(e){const t=this._parse(e);return $u(e._query,t),new Uc(e.firestore,e.converter,Vn(e._query,t))}_parse(e){const t=pu(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new L(M.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Qu(o,s);const t=[];for(const n of o)t.push(Yu(r,e,n));a={arrayValue:{values:t}}}else a=Yu(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qu(o,s),a=Su(n,t,o,"in"===s||"not-in"===s);return an.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class zu extends ju{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zu(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$u(n,i),n=Vn(n,i)}(e._query,t),new Uc(e.firestore,e.converter,Vn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wu extends Uu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rn(t,n)}(e._query,this._field,this._direction);return new Uc(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new On(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class qu extends Uu{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qu(e,t,n)}_apply(e){return new Uc(e.firestore,e.converter,zn(e._query,this._limit,this._limitType))}}class Hu extends Uu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Hu(e,t,n)}_apply(e){const t=Gu(e,this.type,this._docOrFields,this._inclusive);return new Uc(e.firestore,e.converter,function(e,t){return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Ku extends Uu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ku(e,t,n)}_apply(e){const t=Gu(e,this.type,this._docOrFields,this._inclusive);return new Uc(e.firestore,e.converter,function(e,t){return new On(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Gu(e,t,n,r){if(n[0]=(0,c.Ku)(n[0]),n[0]instanceof Du)return function(e,t,n,r,i){if(!r)throw new L(M.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of jn(e))if(o.field.isKeyField())s.push(Ut(t,r.key));else{const e=r.data.field(o.field);if(Et(e))throw new L(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new L(M.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new en(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=pu(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new L(M.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new L(M.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Fn(e)&&-1!==s.indexOf("/"))throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ee.fromString(s));if(!re.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new re(n);a.push(Ut(t,i))}else{const e=Su(n,r,s);a.push(e)}}return new en(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Yu(e,t,n){if("string"==typeof(n=(0,c.Ku)(n))){if(""===n)throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ee.fromString(n));if(!re.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ut(e,new re(r))}if(n instanceof Bc)return Ut(e,n._key);throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Oc(n),"."))}function Qu(e,t){if(!Array.isArray(e)||0===e.length)throw new L(M.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function $u(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(M.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(M.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Xu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(St(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw P()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new au(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ct(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kt(e));default:return null}}convertTimestamp(e){const t=xt(e);return new X(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ee.fromString(e);O(Hi(n));const r=new At(n.get(1),n.get(3)),i=new re(n.popFirst(5));return r.isEqual(t)||A("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ju(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zu extends Xu{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bc(this.firestore,null,t)}}class eh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class th extends Du{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Lu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class nh extends th{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class rh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new eh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new nh(this._firestore,this._userDataWriter,n.key,n,new eh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new nh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new eh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new nh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ih(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ih(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function sh(e,t){return e instanceof th&&t instanceof th?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof rh&&t instanceof rh&&e._firestore===t._firestore&&Hc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class oh extends Xu{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bc(this.firestore,null,t)}}function ah(e){e=Dc(e,Bc);const t=Dc(e.firestore,Qc),n=$c(t),r=new oh(t);return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=D(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new L(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=nl(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await _c(e),t,n))),n.promise}(n,e._key).then((n=>new th(t,r,e._key,n,new eh(null!==n&&n.hasLocalMutations,!0),e.converter)))}function lh(e){e=Dc(e,Uc);const t=Dc(e.firestore,Qc),n=$c(t),r=new oh(t);return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Go(e,t,!0),i=new xl(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=nl(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await _c(e),t,n))),n.promise}(n,e._query).then((n=>new rh(t,r,e,n)))}function ch(e,t,n){e=Dc(e,Bc);const r=Dc(e.firestore,Qc),i=Ju(e.converter,t,n);return fh(r,[mu(pu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kr.none())])}function uh(e,t,n){e=Dc(e,Bc);const r=Dc(e.firestore,Qc),i=pu(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=(0,c.Ku)(t))||t instanceof su?Tu(i,"updateDoc",e._key,t,n,a):xu(i,"updateDoc",e._key,t),fh(r,[s.toMutation(e._key,kr.exists(!0))])}function hh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=(0,c.Ku)(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Gc(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Gc(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let h,d,f;if(e instanceof Bc)d=Dc(e.firestore,Qc),f=Mn(e._key.path),h={next:t=>{n[l]&&n[l](ph(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Dc(e,Uc);d=Dc(t.firestore,Qc),f=t._query;const r=new oh(d);h={next:e=>{n[l]&&n[l](new rh(d,r,t,e))},error:n[l+1],complete:n[l+2]},Fu(e._query)}return function(e,t,n,r){const i=new lc(r),s=new ml(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ll(await Tc(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>cl(await Tc(e),s)))}}($c(d),f,u,h)}function dh(e,t){return function(e,t){const n=new lc(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){D(e).z_.add(t),t.next()}(await Tc(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){D(e).z_.delete(t)}(await Tc(e),n)))}}($c(e=Dc(e,Qc)),Gc(t)?t:{next:t})}function fh(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=nc(e);try{const e=await function(e,t){const n=D(e),r=X.now(),i=t.reduce(((e,t)=>e.add(t.key)),ar());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Jn(),l=ar();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Or(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Lr(e.key,t,Jt(t.value.mapValue),kr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:tr(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new dt(Y)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await ql(r,e.changes),await za(r.remoteStore)}catch(e){const t=nl(e,"Failed to persist write");n.reject(t)}}(await wc(e),t,n))),n.promise}($c(e),t)}function ph(e,t,n){const r=n.docs.get(t._key),i=new oh(e);return new th(e,i,t._key,r,new eh(n.hasPendingWrites,n.fromCache),t.converter)}const mh={maxAttempts:5};class gh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pu(e)}set(e,t,n){this._verifyNotCommitted();const r=vh(e,this._firestore),i=Ju(r.converter,t,n),s=mu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,kr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=vh(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=(0,c.Ku)(t))||t instanceof su?Tu(this._dataReader,"WriteBatch.update",r._key,t,n,o):xu(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vh(e,this._firestore);return this._mutations=this._mutations.concat(new Br(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vh(e,t){if((e=(0,c.Ku)(e)).firestore!==t)throw new L(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yh extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pu(e)}get(e){const t=vh(e,this._firestore),n=new Zu(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return P();const r=e[0];if(r.isFoundDocument())return new Du(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Du(this._firestore,n,t._key,null,t.converter);throw P()}))}set(e,t,n){const r=vh(e,this._firestore),i=Ju(r.converter,t,n),s=mu(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=vh(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=(0,c.Ku)(t))||t instanceof su?Tu(this._dataReader,"Transaction.update",r._key,t,n,o):xu(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=vh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vh(e,this._firestore),n=new oh(this._firestore);return super.get(e).then((e=>new th(this._firestore,n,t._key,e._document,new eh(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){E=e}(o.SDK_VERSION),(0,o._registerComponent)(new a.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Qc(new V(e.getProvider("auth-internal")),new H(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new At(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(T,"4.6.4",e),(0,o.registerVersion)(T,"4.6.4","esm2017")}();function _h(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new L("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function bh(){if("undefined"===typeof Uint8Array)throw new L("unimplemented","Uint8Arrays are not available in this environment.")}function wh(){if("undefined"==typeof atob)throw new L("unimplemented","Blobs are unavailable in Firestore in this environment.")}class xh{constructor(e){this._delegate=e}static fromBase64String(e){return wh(),new xh(iu.fromBase64String(e))}static fromUint8Array(e){return bh(),new xh(iu.fromUint8Array(e))}toBase64(){return wh(),this._delegate.toBase64()}toUint8Array(){return bh(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Th(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Sh{enableIndexedDbPersistence(e,t){return function(e,t){ru(e=Dc(e,Qc));const n=$c(e);if(n._uninitializedComponentsProvider)throw new L(M.FAILED_PRECONDITION,"SDK cache is already specified.");N("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new oc;return Jc(n,i,new ic(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){ru(e=Dc(e,Qc));const t=$c(e);if(t._uninitializedComponentsProvider)throw new L(M.FAILED_PRECONDITION,"SDK cache is already specified.");N("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new oc;return Jc(t,r,new sc(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new L(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new F;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ye.D())return Promise.resolve();const t=e+"main";await ye.delete(t)}(Mo(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Eh{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof At||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||N("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jc(this._delegate,e,t,n)}enableNetwork(){return eu(this._delegate)}disableNetwork(){return tu(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Nc("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Zc(this._delegate)}onSnapshotsInSync(e){return dh(this._delegate,e)}get app(){if(!this._appCompat)throw new L("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uh(this,zc(this._delegate,e))}catch(t){throw Rh(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nh(this,Wc(this._delegate,e))}catch(t){throw Rh(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lh(this,function(e,t){if(e=Dc(e,Fc),Ac("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new L(M.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Uc(e,null,function(e){return new On(ee.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Rh(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Dc(e,Qc);const r=Object.assign(Object.assign({},mh),n);return function(e){if(e.maxAttempts<1)throw new L(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new F;return e.asyncQueue.enqueueAndForget((async()=>{const i=await xc(e);new hc(e.asyncQueue,i,n,t,r).Xa()})),r.promise}($c(e),(n=>t(new yh(e,n))),r)}(this._delegate,(t=>e(new kh(this,t))))}batch(){return $c(this._delegate),new Ih(new gh(this._delegate,(e=>fh(this._delegate,e))))}loadBundle(e){return function(e,t){const n=$c(e=Dc(e,Qc)),r=new Yc;return Cc(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return nu(this._delegate,e).then((e=>e?new Lh(this,e):null))}}class Ch extends Xu{constructor(e){super(),this.firestore=e}convertBytes(e){return new xh(new iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nh.forKey(t,this.firestore,null)}}class kh{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ch(e)}get(e){const t=Bh(e);return this._delegate.get(t).then((e=>new Dh(this._firestore,new th(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Bh(e);return n?(_h("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bh(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bh(e);return this._delegate.delete(t),this}}class Ih{constructor(e){this._delegate=e}set(e,t,n){const r=Bh(e);return n?(_h("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bh(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ah{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new nh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mh(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ah.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Ah(e,new Ch(e),t),r.set(t,i)),i}}Ah.INSTANCES=new WeakMap;class Nh{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ch(e)}static forPath(e,t,n){if(e.length%2!==0)throw new L("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Nh(t,new Bc(t._delegate,n,new re(e)))}static forKey(e,t,n){return new Nh(t,new Bc(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Uh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uh(this.firestore,zc(this._delegate,e))}catch(t){throw Rh(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,c.Ku)(e))instanceof Bc&&qc(this._delegate,e)}set(e,t){t=_h("DocumentReference.set",t);try{return t?ch(this._delegate,e,t):ch(this._delegate,e)}catch(n){throw Rh(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?uh(this._delegate,e):uh(this._delegate,e,t,...r)}catch(s){throw Rh(s,"updateDoc()","DocumentReference.update()")}}delete(){return fh(Dc((e=this._delegate).firestore,Qc),[new Br(e._key,kr.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ph(t),i=Oh(t,(e=>new Dh(this.firestore,new th(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return hh(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ah(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dc(e,Bc);const t=Dc(e.firestore,Qc);return Sc($c(t),e._key,{source:"server"}).then((n=>ph(t,e,n)))}(this._delegate):function(e){e=Dc(e,Bc);const t=Dc(e.firestore,Qc);return Sc($c(t),e._key).then((n=>ph(t,e,n)))}(this._delegate),t.then((e=>new Dh(this.firestore,new th(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Nh(this.firestore,e?this._delegate.withConverter(Ah.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rh(e,t,n){return e.message=e.message.replace(t,n),e}function Ph(e){for(const t of e)if("object"===typeof t&&!Th(t))return t;return{}}function Oh(e,t){var n,r;let i;return i=Th(e[0])?e[0]:Th(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nh(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sh(this._delegate,e._delegate)}}class Mh extends Dh{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||P(),t}}class Lh{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ch(e)}where(e,t,n){try{return new Lh(this.firestore,Bu(this._delegate,function(e,t,n){const r=t,i=Lu("where",e);return Vu._create(i,r,n)}(e,t,n)))}catch(r){throw Rh(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Lh(this.firestore,Bu(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Lu("orderBy",e);return Wu._create(n,t)}(e,t)))}catch(n){throw Rh(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lh(this.firestore,Bu(this._delegate,(Mc("limit",t=e),qu._create("limit",t,"F"))))}catch(t){throw Rh(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Lh(this.firestore,Bu(this._delegate,(Mc("limitToLast",t=e),qu._create("limitToLast",t,"L"))))}catch(t){throw Rh(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Lh(this.firestore,Bu(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hu._create("startAt",t,!0)}(...arguments)))}catch(e){throw Rh(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Lh(this.firestore,Bu(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hu._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Rh(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Lh(this.firestore,Bu(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ku._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Rh(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Lh(this.firestore,Bu(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ku._create("endAt",t,!0)}(...arguments)))}catch(e){throw Rh(e,"endAt()","Query.endAt()")}}isEqual(e){return Hc(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lh(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dc(e,Uc);const t=Dc(e.firestore,Qc),n=$c(t),r=new oh(t);return Ec(n,e._query,{source:"server"}).then((n=>new rh(t,r,e,n)))}(this._delegate):function(e){e=Dc(e,Uc);const t=Dc(e.firestore,Qc),n=$c(t),r=new oh(t);return Fu(e._query),Ec(n,e._query).then((n=>new rh(t,r,e,n)))}(this._delegate),t.then((e=>new jh(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ph(t),i=Oh(t,(e=>new jh(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return hh(this._delegate,r,i)}withConverter(e){return new Lh(this.firestore,e?this._delegate.withConverter(Ah.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Fh{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jh{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Lh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Mh(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Fh(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Mh(this._firestore,n))}))}isEqual(e){return sh(this._delegate,e._delegate)}}class Uh extends Lh{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nh(this.firestore,e):null}doc(e){try{return new Nh(this.firestore,void 0===e?Wc(this._delegate):Wc(this._delegate,e))}catch(t){throw Rh(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Dc(e.firestore,Qc),r=Wc(e),i=Ju(e.converter,t);return fh(n,[mu(pu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kr.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Nh(this.firestore,e)))}isEqual(e){return qc(this._delegate,e._delegate)}withConverter(e){return new Uh(this.firestore,e?this._delegate.withConverter(Ah.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bh(e){return Dc(e,Bc)}class Vh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new su(...t)}static documentId(){return new Vh(ne.keyField().canonicalString())}isEqual(e){return(e=(0,c.Ku)(e))instanceof su&&this._delegate._internalPath.isEqual(e._internalPath)}}class zh{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new zh(e)}static delete(){const e=new gu("deleteField");return e._methodName="FieldValue.delete",new zh(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _u("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new zh(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bu("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new zh(e)}static increment(e){const t=new wu("increment",e);return t._methodName="FieldValue.increment",new zh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wh={Firestore:Eh,GeoPoint:au,Timestamp:X,Blob:xh,Transaction:kh,WriteBatch:Ih,DocumentReference:Nh,DocumentSnapshot:Dh,Query:Lh,QueryDocumentSnapshot:Mh,QuerySnapshot:jh,CollectionReference:Uh,FieldPath:Vh,FieldValue:zh,setLogLevel:function(e){var t;t=e,C.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var qh;(function(e,t){e.INTERNAL.registerComponent(new a.uA("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Wh)))})(qh=s.A,((e,t)=>new Eh(e,t,new Sh))),qh.registerVersion("@firebase/firestore-compat","0.3.33")},6187:(e,t,n)=>{"use strict";n.d(t,{N1:()=>f,nu:()=>m,yP:()=>p});var r=n(9950),i=n(3842);const s="label";function o(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function a(e,t){e.labels=t}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):{...t}}))}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;const n={labels:[],datasets:[]};return a(n,e.labels),l(n,e.datasets,t),n}function u(e,t){const{height:n=150,width:s=300,redraw:u=!1,datasetIdKey:h,type:d,data:f,options:p,plugins:m=[],fallbackContent:g,updateMode:v,...y}=e,_=(0,r.useRef)(null),b=(0,r.useRef)(null),w=()=>{_.current&&(b.current=new i.t1(_.current,{type:d,data:c(f,h),options:p&&{...p},plugins:m}),o(t,b.current))},x=()=>{o(t,null),b.current&&(b.current.destroy(),b.current=null)};return(0,r.useEffect)((()=>{!u&&b.current&&p&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(b.current,p)}),[u,p]),(0,r.useEffect)((()=>{!u&&b.current&&a(b.current.config.data,f.labels)}),[u,f.labels]),(0,r.useEffect)((()=>{!u&&b.current&&f.datasets&&l(b.current.config.data,f.datasets,h)}),[u,f.datasets]),(0,r.useEffect)((()=>{b.current&&(u?(x(),setTimeout(w)):b.current.update(v))}),[u,p,f.labels,f.datasets,v]),(0,r.useEffect)((()=>{b.current&&(x(),setTimeout(w))}),[d]),(0,r.useEffect)((()=>(w(),()=>x())),[]),r.createElement("canvas",{ref:_,role:"img",height:n,width:s,...y},g)}const h=(0,r.forwardRef)(u);function d(e,t){return i.t1.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(h,{...t,ref:n,type:e})))}const f=d("line",i.ZT),p=d("bar",i.A6),m=d("doughnut",i.ju)},5271:(e,t,n)=>{"use strict";n.d(t,{Wp:()=>Ca,_h:()=>pa});var r={version:"0.18.5"},i=1200,s=1252,o=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],a={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},l=function(e){-1!=o.indexOf(e)&&(s=a[0]=e)};var c=function(e){i=e,l(e)};function u(){c(1200),l(1252)}function h(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var d,f=function(e){return String.fromCharCode(e)},p=function(e){return String.fromCharCode(e)};var m=null,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function v(e){for(var t="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,o=(3&n)<<4|(r=e.charCodeAt(c++))>>4,a=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?a=l=64:isNaN(i)&&(l=64),t+=g.charAt(s)+g.charAt(o)+g.charAt(a)+g.charAt(l);return t}function y(e){var t="",n=0,r=0,i=0,s=0,o=0,a=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=g.indexOf(e.charAt(l++))<<2|(s=g.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(o=g.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(r)),i=(3&o)<<6|(a=g.indexOf(e.charAt(l++))),64!==a&&(t+=String.fromCharCode(i));return t}var _=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),b=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(t){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function w(e){return _?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function x(e){return _?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var T=function(e){return _?b(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function S(e){if("undefined"===typeof ArrayBuffer)return T(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function E(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var C=_?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:b(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var k=/\u0000/g,I=/[\u0001-\u0006]/g;function A(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function N(e,t){var n=""+e;return n.length>=t?n:We("0",t-n.length)+n}function R(e,t){var n=""+e;return n.length>=t?n:We(" ",t-n.length)+n}function P(e,t){var n=""+e;return n.length>=t?n:n+We(" ",t-n.length)}var O=Math.pow(2,32);function D(e,t){return e>O||e<-O?function(e,t){var n=""+Math.round(e);return n.length>=t?n:We("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:We("0",t-n.length)+n}(Math.round(e),t)}function M(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var L=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],F=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var j={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},U={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},B={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function V(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,o=1,a=0,l=1,c=0,u=0,h=Math.floor(i);c<t&&(a=(h=Math.floor(i))*o+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=o,o=a,l=c,c=u;if(u>t&&(c>t?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var d=Math.floor(r*a/u);return[d,r*a-d*u,u]}function z(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,o=[],a={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),t&&t.date1904&&(r+=1462),a.u>.9999&&(a.u=0,86400==++i&&(a.T=i=0,++r,++a.D)),60===r)o=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var W=new Date(1899,11,31,0,0,0),q=W.getTime(),H=new Date(1900,2,1,0,0,0);function K(e,t){var n=e.getTime();return t?n-=1262304e5:e>=H&&(n+=864e5),(n-(q+6e4*(e.getTimezoneOffset()-W.getTimezoneOffset())))/864e5}function G(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Y(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=G(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=G(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),G(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Q(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Y(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return ve(14,K(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function X(e,t,n,r){var i,s="",o=0,a=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return F[n.m-1][1];case 5:return F[n.m-1][0];default:return F[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return L[n.q][0];default:return L[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(a=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(a*(n.S+n.u)))>=60*a&&(o=0),"s"===t?0===o?"0":""+o/a:(s=N(o,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):N(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?N(i,c):""}function J(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var Z=/%/g;function ee(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+ee(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var te=/# (\?+)( ?)\/( ?)(\d+)/;var ne=/^#*0*\.([0#]+)/,re=/\).*[0#]/,ie=/\(###\) ###\\?-####/;function se(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function oe(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function ae(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function le(e,t,n){if(40===e.charCodeAt(0)&&!t.match(re)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?le("n",r,n):"("+le("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return he(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Z,""),i=t.length-r.length;return he(e,r,n*Math.pow(10,2*i))+We("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return ee(t,n);if(36===t.charCodeAt(0))return"$"+le(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+D(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=D(n,0))&&(i=""),i.length>t.length?i:se(t.substr(0,t.length-i.length))+i;if(s=t.match(te))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(0===s?"":""+s)+" "+(0===o?We(" ",e[1].length+1+e[4].length):R(o,e[1].length)+e[2]+"/"+e[3]+N(a,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+D(l,t.length-t.indexOf("0"));if(s=t.match(ne))return i=oe(n,s[1].length).replace(/^([^\.]+)$/,"$1."+se(s[1])).replace(/\.$/,"."+se(s[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+We("0",se(s[1]).length-t.length)})),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+oe(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+J(D(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+le(e,t,-n):J(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+N(ae(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return le(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=A(le(e,t.replace(/[\\-]/g,""),n)),o=0,A(A(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""})));if(t.match(ie))return"("+(i=le(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=V(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=he("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=P(a[2],o)).length<s[4].length&&(u=se(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=V(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?R(a[1],o)+s[2]+"/"+s[3]+P(a[2],o):We(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=D(n,0),t.length<=i.length?i:se(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=t.indexOf(".")-o,d=t.length-i.length-h;return se(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=ae(n,s[1].length),n<0?"-"+le(e,t,-n):J(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?N(0,3-e.length):"")+e}))+"."+N(o,s[1].length);switch(t){case"###,##0.00":return le(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=J(D(l,0));return"0"!==f?c+f:"";case"###,###.00":return le(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return le(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function ce(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+ce(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function ue(e,t,n){if(40===e.charCodeAt(0)&&!t.match(re)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ue("n",r,n):"("+ue("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return he(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Z,""),i=t.length-r.length;return he(e,r,n*Math.pow(10,2*i))+We("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return ce(t,n);if(36===t.charCodeAt(0))return"$"+ue(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+N(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:se(t.substr(0,t.length-i.length))+i;if(s=t.match(te))return function(e,t,n){return n+(0===t?"":""+t)+We(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+N(l,t.length-t.indexOf("0"));if(s=t.match(ne))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+se(s[1])).replace(/\.$/,"."+se(s[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+We("0",se(s[1]).length-t.length)})),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+J(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ue(e,t,-n):J(""+n)+"."+We("0",s[1].length);if(s=t.match(/^#,#*,#0/))return ue(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=A(ue(e,t.replace(/[\\-]/g,""),n)),o=0,A(A(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<i.length?i.charAt(o++):"0"===e?"0":""})));if(t.match(ie))return"("+(i=ue(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=V(l,Math.pow(10,o)-1,!1),i=""+c," "==(u=he("n",s[1],a[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=P(a[2],o)).length<s[4].length&&(u=se(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),c+((a=V(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?R(a[1],o)+s[2]+"/"+s[3]+P(a[2],o):We(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:se(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=t.indexOf(".")-o,d=t.length-i.length-h;return se(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+ue(e,t,-n):J(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?N(0,3-e.length):"")+e}))+"."+N(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=J(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return ue(e,t.slice(0,t.lastIndexOf(".")),n)+se(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function he(e,t,n){return(0|n)===n?ue(e,t,n):le(e,t,n)}var de=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fe(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":M(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(de))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var pe=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function me(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function ge(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var o=n[0].match(pe),a=n[1].match(pe);return me(t,o)?[r,n[0]]:me(t,a)?[r,n[1]]:[r,n[null!=o&&null!=a?2:1]]}return[r,s]}function ve(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:j)[e])&&(r=n.table&&n.table[U[e]]||j[U[e]]),null==r&&(r=B[e]||"General")}if(M(r,0))return Q(t,n);t instanceof Date&&(t=K(t,n.date1904));var i=ge(r,t);if(M(i[1]))return Q(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,s,o,a=[],l="",c=0,u="",h="t",d="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!M(e,c))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);a[a.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";a[a.length]={t:p,v:f},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=z(t,n,"2"===e.charAt(c+1))))return"";a[a.length]={t:"X",v:e.substr(c,2)},h=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=z(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===h.toLowerCase()&&(u="M"),"h"===u&&(u=d),a[a.length]={t:u,v:l},h=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=z(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";a[a.length]=m,h=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(de)){if(null==i&&null==(i=z(t,n)))return"";a[a.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",fe(e)||(a[a.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;a[a.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;a[a.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;a[a.length]={t:u,v:l},h=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":a[a.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);a[a.length]={t:"D",v:l};break;case" ":a[a.length]={t:u,v:u},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);a[a.length]={t:"t",v:u},++c}var g,v=0,y=0;for(c=a.length-1,h="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=d,h="h",v<1&&(v=1);break;case"s":(g=a[c].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":h=a[c].t;break;case"m":"s"===h&&(a[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&a[c].v.match(/[Hh]/)&&(v=1),v<2&&a[c].v.match(/[Mm]/)&&(v=2),v<3&&a[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var _,b="";for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=X(a[c].t.charCodeAt(0),a[c].v,i,y),a[c].t="t";break;case"n":case"?":for(_=c+1;null!=a[_]&&("?"===(u=a[_].t)||"D"===u||(" "===u||"t"===u)&&null!=a[_+1]&&("?"===a[_+1].t||"t"===a[_+1].t&&"/"===a[_+1].v)||"("===a[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===a[_].v||" "===a[_].v&&null!=a[_+1]&&"?"==a[_+1].t));)a[c].v+=a[_].v,a[_]={v:"",t:";"},++_;b+=a[c].v,c=_-1;break;case"G":a[c].t="t",a[c].v=Q(t,n)}var w,x,T="";if(b.length>0){40==b.charCodeAt(0)?(w=t<0&&45===b.charCodeAt(0)?-t:t,x=he("n",b,w)):(x=he("n",b,w=t<0&&r>1?-t:t),w<0&&a[0]&&"t"==a[0].t&&(x=x.substr(1),a[0].v="-"+a[0].v)),_=x.length-1;var S=a.length;for(c=0;c<a.length;++c)if(null!=a[c]&&"t"!=a[c].t&&a[c].v.indexOf(".")>-1){S=c;break}var E=a.length;if(S===a.length&&-1===x.indexOf("E")){for(c=a.length-1;c>=0;--c)null!=a[c]&&-1!=="n?".indexOf(a[c].t)&&(_>=a[c].v.length-1?(_-=a[c].v.length,a[c].v=x.substr(_+1,a[c].v.length)):_<0?a[c].v="":(a[c].v=x.substr(0,_+1),_=-1),a[c].t="t",E=c);_>=0&&E<a.length&&(a[E].v=x.substr(0,_+1)+a[E].v)}else if(S!==a.length&&-1===x.indexOf("E")){for(_=x.indexOf(".")-1,c=S;c>=0;--c)if(null!=a[c]&&-1!=="n?".indexOf(a[c].t)){for(s=a[c].v.indexOf(".")>-1&&c===S?a[c].v.indexOf(".")-1:a[c].v.length-1,T=a[c].v.substr(s+1);s>=0;--s)_>=0&&("0"===a[c].v.charAt(s)||"#"===a[c].v.charAt(s))&&(T=x.charAt(_--)+T);a[c].v=T,a[c].t="t",E=c}for(_>=0&&E<a.length&&(a[E].v=x.substr(0,_+1)+a[E].v),_=x.indexOf(".")+1,c=S;c<a.length;++c)if(null!=a[c]&&(-1!=="n?(".indexOf(a[c].t)||c===S)){for(s=a[c].v.indexOf(".")>-1&&c===S?a[c].v.indexOf(".")+1:0,T=a[c].v.substr(0,s);s<a[c].v.length;++s)_<x.length&&(T+=x.charAt(_++));a[c].v=T,a[c].t="t",E=c}}}for(c=0;c<a.length;++c)null!=a[c]&&"n?".indexOf(a[c].t)>-1&&(w=r>1&&t<0&&c>0&&"-"===a[c-1].v?-t:t,a[c].v=he(a[c].t,a[c].v,w),a[c].t="t");var C="";for(c=0;c!==a.length;++c)null!=a[c]&&(C+=a[c].v);return C}(i[1],t,n,i[0])}function ye(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=j[n]){if(j[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return j[t]=e,t}function _e(e){for(var t=0;392!=t;++t)void 0!==e[t]&&ye(e[t],t)}function be(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',j=e}var we=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var xe=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=~n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=~n,_=e.length-15,b=0;b<_;)y=v[e[b++]^255&y]^g[e[b++]^y>>8&255]^m[e[b++]^y>>16&255]^p[e[b++]^y>>>24]^f[e[b++]]^d[e[b++]]^h[e[b++]]^u[e[b++]]^c[e[b++]]^l[e[b++]]^a[e[b++]]^o[e[b++]]^s[e[b++]]^i[e[b++]]^r[e[b++]]^t[e[b++]];for(_+=15;b<_;)y=y>>>8^t[255&(y^e[b++])];return~y},e.str=function(e,n){for(var r=~n,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^o)]:o<2048?r=(r=r>>>8^t[255&(r^(192|o>>6&31))])>>>8^t[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|o>>8&7))])>>>8^t[255&(r^(128|o>>2&63))])>>>8^t[255&(r^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(r^(128|63&a))]):r=(r=(r=r>>>8^t[255&(r^(224|o>>12&15))])>>>8^t[255&(r^(128|o>>6&63))])>>>8^t[255&(r^(128|63&o))];return~r},e}(),Te=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){en(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),s=e.l+i,o={};if(21589===r)1&(n=e.read_shift(1))&&(o.mtime=e.read_shift(4)),i>5&&(2&n&&(o.atime=e.read_shift(4)),4&n&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=s,t[r]=o}return t}function o(){return e||(e={})}function a(e,t){if(80==e[0]&&75==e[1])return fe(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=P(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(_&&Buffer.isBuffer(e)?e.toString("binary"):P(e)).split("\r\n"),i=0,s="";for(i=0;i<r.length;++i)if(s=r[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var o=(r[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var a="--"+(o[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};d(u);var h,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==a&&p!==a+"--"||(f++&&_e(u,r.slice(h,i),n),h=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,s,o,a,f=512,p=[],m=e.slice(0,512);en(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(E,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return fe(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&en(m=e.slice(0,f),28);var v=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var y=m.read_shift(4,"i");if(3===n&&0!==y)throw new Error("# Directory Sectors: Expected 0 saw "+y);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),r=m.read_shift(4,"i"),a=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var b=-1,w=0;w<109&&!((b=m.read_shift(4,"i"))<0);++w)p[w]=b;var x=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);c(a,i,x,f,p);var T=function(e,t,n,r){var i=e.length,s=[],o=[],a=[],l=[],c=r-1,u=0,h=0,d=0,f=0;for(u=0;u<i;++u)if(a=[],(d=u+t)>=i&&(d-=i),!o[d]){l=[];var p=[];for(h=d;h>=0;){p[h]=!0,o[h]=!0,a[a.length]=h,l.push(e[h]);var m=n[Math.floor(4*h/r)];if(r<4+(f=4*h&c))throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!e[m])break;if(p[h=Kt(e[m],f)])break}s[d]={nodes:a,data:wt([l])}}return s}(x,s,p,f);T[s].name="!Directory",r>0&&o!==S&&(T[o].name="!MiniFAT"),T[p[0]].name="!FAT",T.fat_addrs=p,T.ssz=f;var C=[],k=[],I=[];!function(e,t,n,r,i,s,o,a){for(var c,d=0,f=r.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var v=p.slice(m,m+128);en(v,64),g=v.read_shift(2),c=Tt(v,0,g-f),r.push(c);var y={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.ct=h(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.mt=h(v,v.l-8)),y.start=v.read_shift(4,"i"),y.size=v.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=S,y.name=""),5===y.type?(d=y.start,i>0&&d!==S&&(t[d].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=u(n,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:d!==S&&y.start!==S&&t[d]&&(y.content=l(y,t[d].data,(t[a]||{}).data))),y.content&&en(y.content,0),s[c]=y,o.push(y)}}(s,T,x,C,r,{},k,o),function(e,t,n){for(var r=0,i=0,s=0,o=0,a=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;a<u.length;++a)i=e[r=u[a]].L,s=e[r].R,o=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==o&&(c[o]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<a&&u.push(i)),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<a&&u.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((a=r)!=c[a])do{a=c[a],t[r]=t[a]+"/"+t[r]}while(0!==a&&-1!==c[a]&&a!=c[a]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(k,I,C),C.shift();var A={FileIndex:k,FullPaths:I};return t&&t.raw&&(A.raw={header:v,sectors:x}),A}function l(e,t,n){for(var r=e.start,i=e.size,s=[],o=r;n&&i>0&&o>=0;)s.push(t.slice(o*g,o*g+g)),i-=g,o=Kt(n,4*o);return 0===s.length?nn(0):C(s).slice(0,e.size)}function c(e,t,n,r,i){var s=S;if(e===S){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=n[e],a=(r>>>2)-1;if(!o)return;for(var l=0;l<a&&(s=Kt(o,4*l))!==S;++l)i.push(s);c(Kt(o,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var s=[],o=[];i||(i=[]);var a=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,s[s.length]=l,o.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&a))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=Kt(e[u],c)}return{nodes:s,data:wt([o])}}function h(e,t){return new Date(1e3*(Ht(e,t+4)/1e7*Math.pow(2,32)+Ht(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(Te.find(e,"/"+t))return;var n=nn(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var i=!1,s=!1,o=e.FullPaths.length-1;o>=0;--o){var a=e.FileIndex[o];switch(a.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(a.R*a.L*a.C)&&(i=!0),a.R>-1&&a.L>-1&&a.R==a.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},h=[];for(o=0;o<e.FullPaths.length;++o)u[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&h.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<h.length;++o){var f=n(h[o][0]);(s=u[f])||(h.push([f,{name:r(f).replace("/",""),type:1,clsid:N,ct:l,mt:l,content:null}]),u[f]=!0)}for(h.sort((function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,s=0,o=Math.min(n.length,r.length);i<o;++i){if(s=n[i].length-r[i].length)return s;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],o=0;o<h.length;++o)e.FullPaths[o]=h[o][0],e.FileIndex[o]=h[o][1];for(o=0;o<h.length;++o){var p=e.FileIndex[o],m=e.FullPaths[o];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||N,0===o)p.C=h.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=o+1;c<h.length&&n(e.FullPaths[c])!=m;++c);for(p.C=c>=h.length?-1:c,c=o+1;c<h.length&&n(e.FullPaths[c])!=n(m);++c);p.R=c>=h.length?-1:c,p.type=1}else n(e.FullPaths[o+1]||"")==n(m)&&(p.R=o+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],o=s,a=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(s.length),(a=e.FileIndex[l]).size&&a.content&&"\x01Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=a.content,u=_&&Buffer.isBuffer(c)?c.toString("binary"):P(c),h=0,d=Math.min(1024,u.length),f=0,p=0;p<=d;++p)(f=u.charCodeAt(p))>=32&&f<128&&++h;var m=h>=4*d/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+o),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+ge(a,o)),i.push(""),i.push(m?ye(u):ve(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],o=nn(1),a=n.compression?8:0,l=0;0;var c=0,u=0,h=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var y=h,_=nn(p.length);for(u=0;u<p.length;++u)_.write_shift(1,127&p.charCodeAt(u));_=_.slice(0,_.l),g[d]=xe.buf(m.content,0);var b=m.content;8==a&&(b=O(b)),(o=nn(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),m.mt?i(o,m.mt):o.write_shift(4,0),o.write_shift(-4,8&l?0:g[d]),o.write_shift(4,8&l?0:b.length),o.write_shift(4,8&l?0:m.content.length),o.write_shift(2,_.length),o.write_shift(2,0),h+=o.length,r.push(o),h+=_.length,r.push(_),h+=b.length,r.push(b),8&l&&((o=nn(12)).write_shift(-4,g[d]),o.write_shift(4,b.length),o.write_shift(4,m.content.length),h+=o.l,r.push(o)),(o=nn(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),o.write_shift(4,0),o.write_shift(-4,g[d]),o.write_shift(4,b.length),o.write_shift(4,m.content.length),o.write_shift(2,_.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,y),v+=o.l,s.push(o),v+=_.length,s.push(_),++d}return o=nn(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,d),o.write_shift(2,d),o.write_shift(4,v),o.write_shift(4,h),o.write_shift(2,0),C([C(r),C(s),o])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var o=e.FullPaths.length+3>>2,a=t+127>>7,l=(t+7>>3)+n+o+a,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var h=[1,u,c,a,o,n,t,0];return e.FileIndex[0].size=t<<6,h[7]=(e.FileIndex[0].start=h[0]+h[1]+h[2]+h[3]+h[4]+h[5])+(h[6]+7>>3),h}(e),s=nn(r[7]<<9),o=0,a=0;for(o=0;o<8;++o)s.write_shift(1,A[o]);for(o=0;o<8;++o)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),o=0;o<3;++o)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:S),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:S),s.write_shift(4,r[1]),o=0;o<109;++o)s.write_shift(-4,o<r[2]?r[1]+o:-1);if(r[1])for(a=0;a<r[1];++a){for(;o<236+127*a;++o)s.write_shift(-4,o<r[2]?r[1]+o:-1);s.write_shift(-4,a===r[1]-1?S:a+1)}var l=function(e){for(a+=e;o<a-1;++o)s.write_shift(-4,o+1);e&&(++o,s.write_shift(-4,S))};for(a=o=0,a+=r[1];o<a;++o)s.write_shift(-4,R.DIFSECT);for(a+=r[2];o<a;++o)s.write_shift(-4,R.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,h=e.FileIndex[0];c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&((u=h.content.length)<4096||(h.start=a,l(u+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,R.ENDOFCHAIN);for(a=o=0,c=0;c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&(!(u=h.content.length)||u>=4096||(h.start=a,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,R.ENDOFCHAIN);for(o=0;o<r[4]<<2;++o){var d=e.FullPaths[o];if(d&&0!==d.length){h=e.FileIndex[o],0===o&&(h.start=h.size?h.start-1:S);var p=0===o&&n.root||h.name;if(u=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,u),s.write_shift(1,h.type),s.write_shift(1,h.color),s.write_shift(-4,h.L),s.write_shift(-4,h.R),s.write_shift(-4,h.C),h.clsid)s.write_shift(16,h.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,h.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,h.start),s.write_shift(4,h.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((h=e.FileIndex[o]).size>=4096)if(s.l=h.start+1<<9,_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+511&-512;else{for(c=0;c<h.size;++c)s.write_shift(1,h.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((h=e.FileIndex[o]).size>0&&h.size<4096)if(_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+63&-64;else{for(c=0;c<h.size;++c)s.write_shift(1,h.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(_)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,g=64,S=-2,E="d0cf11e0a1b11ae1",A=[208,207,17,224,161,177,26,225],N="00000000000000000000000000000000",R={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:S,FREESECT:-1,HEADER_SIGNATURE:E,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:N,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function P(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function O(e){return m?m.deflateRawSync(e):ie(e)}var D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function F(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var j="undefined"!==typeof Uint8Array,U=j?new Uint8Array(256):[],B=0;B<256;++B)U[B]=F(B);function V(e,t){var n=U[255&e];return t<=8?n>>>8-t:(n=n<<8|U[e>>8&255],t<=16?n>>>16-t:(n=n<<8|U[e>>16&255])>>>24-t)}function z(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function W(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function q(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function H(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function K(e,t,n){var r=7&t,i=t>>>3,s=(1<<n)-1,o=e[i]>>>r;return n<8-r?o&s:(o|=e[i+1]<<8-r,n<16-r?o&s:(o|=e[i+2]<<16-r,n<24-r?o&s:(o|=e[i+3]<<24-r)&s))}function G(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function Y(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function Q(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function $(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function X(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(_){var s=x(r);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(j){var o=new Uint8Array(r);if(o.set)o.set(e);else for(;i<n;++i)o[i]=e[i];return o}return e.length=r,e}function J(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function Z(e,t,n){var r=1,i=0,s=0,o=0,a=0,l=e.length,c=j?new Uint16Array(32):J(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var u=j?new Uint16Array(l):J(l);for(s=0;s<l;++s)c[i=e[s]]++,r<i&&(r=i),u[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=a=a+c[s-1]<<1;for(s=0;s<l;++s)0!=(a=e[s])&&(u[s]=c[a+16]++);var h=0;for(s=0;s<l;++s)if(0!=(h=e[s]))for(a=V(u[s],r)>>r-h,o=(1<<r+4-h)-1;o>=0;--o)t[a|o<<h]=15&h|s<<4;return r}var ee=j?new Uint16Array(512):J(512),te=j?new Uint16Array(32):J(32);if(!j){for(var ne=0;ne<512;++ne)ee[ne]=0;for(ne=0;ne<32;++ne)te[ne]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);Z(e,te,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);Z(n,ee,288)}();var re=function(){for(var e=j?new Uint8Array(32768):[],t=0,n=0;t<L.length-1;++t)for(;n<L[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=j?new Uint8Array(259):[];for(t=0,n=0;t<M.length-1;++t)for(;n<M[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,s=0,o=j?new Uint16Array(32768):[];s<t.length;){var a=Math.min(65535,t.length-s);if(a<10){for(7&(i=G(n,i,+!(s+a!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,a),n.write_shift(2,65535&~a);a-- >0;)n[n.l++]=t[s++];i=8*n.l}else{i=G(n,i,+!(s+a!=t.length)+2);for(var l=0;a-- >0;){var c=t[s],u=-1,h=0;if((u=o[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+h]==t[s+h]&&h<250;)++h;if(h>2){(c=r[h])<=22?i=Q(n,i,U[c+1]>>1)-1:(Q(n,i,3),Q(n,i+=5,U[c-23]>>5),i+=3);var d=c<8?0:c-4>>2;d>0&&($(n,i,h-M[c]),i+=d),c=e[s-u],i=Q(n,i,U[c]>>3),i-=3;var f=c<4?0:c-2>>1;f>0&&($(n,i,s-u-L[c]),i+=f);for(var p=0;p<h;++p)o[l]=32767&s,l=32767&(l<<5^t[s]),++s;a-=h-1}else c<=143?c+=48:i=Y(n,i,1),i=Q(n,i,U[c]),o[l]=32767&s,++s}i=Q(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function ie(e){var t=nn(50+Math.floor(1.1*e.length)),n=re(e,t);return t.slice(0,n)}var se=j?new Uint16Array(32768):J(32768),oe=j?new Uint16Array(32768):J(32768),ae=j?new Uint16Array(128):J(128),le=1,ce=1;function ue(e,t){var n=q(e,t)+257,r=q(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,o=j?new Uint8Array(19):J(19),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=j?new Uint8Array(8):J(8),u=j?new Uint8Array(8):J(8),h=o.length,d=0;d<i;++d)o[D[d]]=s=W(e,t),l<s&&(l=s),c[s]++,t+=3;var f=0;for(c[0]=0,d=1;d<=l;++d)u[d]=f=f+c[d-1]<<1;for(d=0;d<h;++d)0!=(f=o[d])&&(a[d]=u[f]++);var p=0;for(d=0;d<h;++d)if(0!=(p=o[d])){f=U[a[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)ae[f|m<<p]=7&p|d<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(f=ae[H(e,t)]),f>>>=3){case 16:for(s=3+z(e,t),t+=2,f=g[g.length-1];s-- >0;)g.push(f);break;case 17:for(s=3+W(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+H(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var v=g.slice(0,n),y=g.slice(n);for(d=n;d<286;++d)v[d]=0;for(d=r;d<30;++d)y[d]=0;return le=Z(v,se,286),ce=Z(y,oe,30),t}function he(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[w(t),2];for(var n=0,r=0,i=x(t||1<<18),s=0,o=i.length>>>0,a=0,l=0;0==(1&r);)if(r=W(e,n),n+=3,r>>>1!=0)for(r>>1==1?(a=9,l=5):(n=ue(e,n),a=le,l=ce);;){!t&&o<s+32767&&(o=(i=X(i,s+32767)).length);var c=K(e,n,a),u=r>>>1==1?ee[c]:se[c];if(n+=15&u,0===((u>>>=4)>>>8&255))i[s++]=u;else{if(256==u)break;var h=(u-=257)<8?0:u-4>>2;h>5&&(h=0);var d=s+M[u];h>0&&(d+=K(e,n,h),n+=h),c=K(e,n,l),n+=15&(u=r>>>1==1?te[c]:oe[c]);var f=(u>>>=4)<4?0:u-2>>1,p=L[u];for(f>0&&(p+=K(e,n,f),n+=f),!t&&o<d&&(o=(i=X(i,d+100)).length);s<d;)i[s]=i[s-p],++s}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[1+(n>>>3)]<<8;if(n+=32,m>0)for(!t&&o<s+m&&(o=(i=X(i,s+m)).length);m-- >0;)i[s++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function de(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function fe(e,t){var n=e;en(n,0);var r={FileIndex:[],FullPaths:[]};d(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var o=n.read_shift(2);n.l+=6;var a=n.read_shift(4);for(n.l=a,i=0;i<o;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),h=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=s(n.slice(n.l+u,n.l+u+h));n.l+=u+h+f;var g=n.l;n.l=p+4,pe(n,l,c,r,m),n.l=g}return r}function pe(e,t,n,r,i){e.l+=2;var o=e.read_shift(2),a=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(i);var o=31&t,a=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(a),r.setSeconds(o<<1),r}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),h=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<h;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=s(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=d;var v=e.slice(e.l,e.l+c);switch(a){case 8:v=function(e,t){if(!m)return he(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+a)}var y=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&de(y,"Bad compressed size: "+t+" != "+c),u!=n&&de(y,"Bad uncompressed size: "+n+" != "+u),be(r,f,v,{unsafe:!0,mt:l})}var me={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ge(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&me[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&me[r[1]]?me[r[1]]:"application/octet-stream"}function ve(e){for(var t=v(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function ye(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var s=r[i];if(0!=s.length)for(var o=0;o<s.length;){var a=76,l=s.slice(o,o+a);"="==l.charAt(a-1)?a--:"="==l.charAt(a-2)?a-=2:"="==l.charAt(a-3)&&(a-=3),l=s.slice(o,o+a),(o+=a)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function _e(e,t,n){for(var r,i="",s="",o="",a=0;a<10;++a){var l=t[a];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++a,s.toLowerCase()){case"base64":r=T(y(t.slice(a).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return T(t.join("\r\n"))}(t.slice(a));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=be(e,i.slice(n.length),r,{unsafe:!0});o&&(u.ctype=o)}function be(e,t,n,i){var s=i&&i.unsafe;s||d(e);var o=!s&&Te.find(e,t);if(!o){var a=e.FullPaths[0];t.slice(0,a.length)==a?a=t:("/"!=a.slice(-1)&&(a+="/"),a=(a+t).replace("//","/")),o={name:r(t),type:2},e.FileIndex.push(o),e.FullPaths.push(a),s||Te.utils.cfb_gc(e)}return o.content=n,o.size=n?n.length:0,i&&(i.CLSID&&(o.clsid=i.CLSID),i.mt&&(o.mt=i.mt),i.ct&&(o.ct=i.ct)),o}return t.find=function(e,t){var n=e.FullPaths.map((function(e){return e.toUpperCase()})),r=n.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),o=!0===i?n.indexOf(s):r.indexOf(s);if(-1!==o)return e.FileIndex[o];var a=!s.match(I);for(s=s.replace(k,""),a&&(s=s.replace(I,"!")),o=0;o<n.length;++o){if((a?n[o].replace(I,"!"):n[o]).replace(k,"")==s)return e.FileIndex[o];if((a?r[o].replace(I,"!"):r[o]).replace(k,"")==s)return e.FileIndex[o]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||_&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return o(),a(e.readFileSync(t),n)}(t,n);case"base64":return a(T(y(t)),n);case"binary":return a(T(t),n)}return a(t,n)},t.parse=a,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return o(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:P(r);case"base64":return v("string"==typeof r?r:P(r));case"buffer":if(_)return Buffer.isBuffer(r)?r:b(r);case"array":return"string"==typeof r?T(r):r}return r},t.writeFile=function(t,n,r){o();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:be,cfb_del:function(e,t){d(e);var n=Te.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var i=Te.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:Yt,CheckField:Zt,prep_blob:en,bconcat:C,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(n){console.error("cannot use native zlib: "+(n.message||n))}},_deflateRaw:ie,_inflateRaw:he,consts:R},t}();let Se;function Ee(e){return"string"===typeof e?S(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function Ce(e,t,n){if("undefined"!==typeof Se&&Se.writeFileSync)return n?Se.writeFileSync(e,t,n):Se.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=S(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?ut(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([Ee(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var a=File(e);return a.open("w"),a.encoding="binary",Array.isArray(t)&&(t=E(t)),a.write(t),a.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function ke(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function Ie(e,t){for(var n=[],r=ke(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function Ae(e){for(var t=[],n=ke(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function Ne(e){for(var t=[],n=ke(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var Re=new Date(1899,11,30,0,0,0);function Pe(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(Re.getTime()+6e4*(e.getTimezoneOffset()-Re.getTimezoneOffset())))/864e5}var Oe=new Date,De=Re.getTime()+6e4*(Oe.getTimezoneOffset()-Re.getTimezoneOffset()),Me=Oe.getTimezoneOffset();function Le(e){var t=new Date;return t.setTime(24*e*60*60*1e3+De),t.getTimezoneOffset()!==Me&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Me)),t}var Fe=new Date("2017-02-19T19:06:09.000Z"),je=isNaN(Fe.getFullYear())?new Date("2/19/17"):Fe,Ue=2017==je.getFullYear();function Be(e,t){var n=new Date(e);if(Ue)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==je.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function Ve(e,t){if(_&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return ut(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return ut(h(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return ut(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return ut(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return n[e]||e}))}catch(s){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function ze(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=ze(e[n]));return t}function We(e,t){for(var n="";n.length<t;)n+=e;return n}function qe(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,(function(e,t){return n=-n,t})),isNaN(t=Number(r))?t:t/n):t/n}var He=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ke(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==He.indexOf(o))return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function Ge(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=_?b(n):function(e){for(var t=[],n=0,r=e.length+250,i=w(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var a=1023&e.charCodeAt(++s);i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(3&o)<<4,i[n++]=128|63&a}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|63&o;n>r&&(t.push(i.slice(0,n)),n=0,i=w(65535),r=65530)}return t.push(i.slice(0,n)),C(t)}(n),Te.utils.cfb_add(e,t,r);Te.utils.cfb_add(e,t,n)}else e.file(t,n)}function Ye(){return Te.utils.cfb_new()}var Qe='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var $e={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Xe=Ae($e),Je=/[&<>'"]/g,Ze=/[\u0000-\u0008\u000b-\u001f]/g;function et(e){return(e+"").replace(Je,(function(e){return Xe[e]})).replace(Ze,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function tt(e){return et(e).replace(/ /g,"_x0020_")}var nt=/[\u0000-\u001f]/g;function rt(e){return(e+"").replace(Je,(function(e){return Xe[e]})).replace(/\n/g,"<br/>").replace(nt,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}function it(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function st(e){for(var t="",n=0,r=0,i=0,s=0,o=0,a=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(o=(31&r)<<6,o|=63&i,t+=String.fromCharCode(o)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(a=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(o=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(a>>>10&1023)),t+=String.fromCharCode(56320+(1023&a)))));return t}function ot(e){var t,n,r,i=w(2*e.length),s=1,o=0,a=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(i[o++]=255&a,i[o++]=a>>>8,a=0),i[o++]=t%256,i[o++]=t>>>8;return i.slice(0,o).toString("ucs2")}function at(e){return b(e,"binary").toString("utf8")}var lt="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",ct=_&&(at(lt)==st(lt)&&at||ot(lt)==st(lt)&&ot)||st,ut=_?function(e){return b(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},ht=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var dt=/(^\s|\s$|\n)/;function ft(e,t){return"<"+e+(t.match(dt)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function pt(e){return ke(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function mt(e,t,n){return"<"+e+(null!=n?pt(n):"")+(null!=t?(t.match(dt)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function gt(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(n){if(t)throw n}return""}var vt={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},yt=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],_t={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};var bt=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},wt=_?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:b(e)}))):bt(e)}:bt,xt=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(Wt(e,i)));return r.join("").replace(k,"")},Tt=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(k,""):xt(e,t,n)}:xt,St=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},Et=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):St(e,t,n)}:St,Ct=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(zt(e,i)));return r.join("")},kt=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Ct(e,t,n)}:Ct,It=function(e,t){var n=Ht(e,t);return n>0?kt(e,t+4,t+4+n-1):""},At=It,Nt=function(e,t){var n=Ht(e,t);return n>0?kt(e,t+4,t+4+n-1):""},Rt=Nt,Pt=function(e,t){var n=2*Ht(e,t);return n>0?kt(e,t+4,t+4+n-1):""},Ot=Pt,Dt=function(e,t){var n=Ht(e,t);return n>0?Tt(e,t+4,t+4+n):""},Mt=Dt,Lt=function(e,t){var n=Ht(e,t);return n>0?kt(e,t+4,t+4+n):""},Ft=Lt,jt=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},Ut=jt,Bt=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Vt(){Tt=function(e,t,n){return d.utils.decode(1200,e.slice(t,n)).replace(k,"")},kt=function(e,t,n){return d.utils.decode(65001,e.slice(t,n))},At=function(e,t){var n=Ht(e,t);return n>0?d.utils.decode(s,e.slice(t+4,t+4+n-1)):""},Rt=function(e,t){var n=Ht(e,t);return n>0?d.utils.decode(i,e.slice(t+4,t+4+n-1)):""},Ot=function(e,t){var n=2*Ht(e,t);return n>0?d.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},Mt=function(e,t){var n=Ht(e,t);return n>0?d.utils.decode(1200,e.slice(t+4,t+4+n)):""},Ft=function(e,t){var n=Ht(e,t);return n>0?d.utils.decode(65001,e.slice(t+4,t+4+n)):""}}_&&(At=function(e,t){if(!Buffer.isBuffer(e))return It(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Rt=function(e,t){if(!Buffer.isBuffer(e))return Nt(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Ot=function(e,t){if(!Buffer.isBuffer(e))return Pt(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},Mt=function(e,t){if(!Buffer.isBuffer(e))return Dt(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},Ft=function(e,t){if(!Buffer.isBuffer(e))return Lt(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Ut=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):jt(e,t)},Bt=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof d&&Vt();var zt=function(e,t){return e[t]},Wt=function(e,t){return 256*e[t+1]+e[t]},qt=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},Ht=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Kt=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Gt=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Yt(e,t){var n,r,s,o,a,l,c="",u=[];switch(t){case"dbcs":if(l=this.l,_&&Buffer.isBuffer(this))c=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)c+=String.fromCharCode(Wt(this,l)),l+=2;e*=2;break;case"utf8":c=kt(this,this.l,this.l+e);break;case"utf16le":e*=2,c=Tt(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof d)return Yt.call(this,e,"dbcs");c=d.utils.decode(i,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":c=At(this,this.l),e=4+Ht(this,this.l);break;case"lpstr-cp":c=Rt(this,this.l),e=4+Ht(this,this.l);break;case"lpwstr":c=Ot(this,this.l),e=4+2*Ht(this,this.l);break;case"lpp4":e=4+Ht(this,this.l),c=Mt(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Ht(this,this.l),c=Ft(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,c="";0!==(s=zt(this,this.l+e++));)u.push(f(s));c=u.join("");break;case"_wstr":for(e=0,c="";0!==(s=Wt(this,this.l+e));)u.push(f(s)),e+=2;e+=2,c=u.join("");break;case"dbcs-cont":for(c="",l=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(l))return s=zt(this,l),this.l=l+1,o=Yt.call(this,e-a,s?"dbcs-cont":"sbcs-cont"),u.join("")+o;u.push(f(Wt(this,l))),l+=2}c=u.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof d){c=d.utils.decode(i,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(c="",l=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(l))return s=zt(this,l),this.l=l+1,o=Yt.call(this,e-a,s?"dbcs-cont":"sbcs-cont"),u.join("")+o;u.push(f(zt(this,l))),l+=1}c=u.join("");break;default:switch(e){case 1:return n=zt(this,this.l),this.l++,n;case 2:return n=("i"===t?qt:Wt)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?Kt:Gt)(this,this.l),this.l+=4,n):(r=Ht(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?Ut(this,this.l):Ut([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:c=Et(this,this.l,e)}}return this.l+=e,c}var Qt=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},$t=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},Xt=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function Jt(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)Xt(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof d&&874==s)for(i=0;i!=t.length;++i){var o=d.utils.encode(s,t.charAt(i));this[this.l+i]=o[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var l=t.charCodeAt(i);this[this.l++]=255&l,this[this.l++]=l>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,Qt(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,o=r?-t:t;isFinite(o)?0==o?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var a=0;a<=5;++a,s/=256)e[n+a]=255&s;e[n+6]=(15&i)<<4|15&s,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,$t(this,t,this.l)}}return this.l+=r,this}function Zt(e,t){var n=Et(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function en(e,t){e.l=t,e.read_shift=Yt,e.chk=Zt,e.write_shift=Jt}function tn(e,t){e.l+=t}function nn(e){var t=w(e);return en(t,0),t}function rn(){var e=[],t=_?256:2048,n=function(e){var t=nn(e);return en(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return i(),C(e)},_bufs:e}}function sn(e,t,n,r){var i,s=+t;if(!isNaN(s)){r||(r=yo[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,128+(127&s)),o.write_shift(1,s>>7));for(var a=0;4!=a;++a){if(!(r>=128)){o.write_shift(1,r);break}o.write_shift(1,128+(127&r)),r>>=7}r>0&&Bt(n)&&e.push(n)}}function on(e,t,n){var r=ze(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function an(e,t,n){var r=ze(e);return r.s=on(r.s,t.s,n),r.e=on(r.e,t.s,n),r}function ln(e,t){if(e.cRel&&e.c<0)for(e=ze(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ze(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=mn(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function cn(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?ln(e.s,t.biff)+":"+ln(e.e,t.biff):(e.s.rRel?"":"$")+hn(e.s.r)+":"+(e.e.rRel?"":"$")+hn(e.e.r):(e.s.cRel?"":"$")+fn(e.s.c)+":"+(e.e.cRel?"":"$")+fn(e.e.c)}function un(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function hn(e){return""+(e+1)}function dn(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function fn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function pn(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function mn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function gn(e){var t=e.indexOf(":");return-1==t?{s:pn(e),e:pn(e)}:{s:pn(e.slice(0,t)),e:pn(e.slice(t+1))}}function vn(e,t){return"undefined"===typeof t||"number"===typeof t?vn(e.s,e.e):("string"!==typeof e&&(e=mn(e)),"string"!==typeof t&&(t=mn(t)),e==t?e:e+":"+t)}function yn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function _n(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=ve(e.z,n?Pe(t):t)}catch(r){}try{return e.w=ve((e.XF||{}).numFmtId||(n?14:0),n?Pe(t):t)}catch(r){return""+t}}function bn(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?rr[e.v]||e.v:_n(e,void 0==t?e.v:t))}function wn(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function xn(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;null!=m&&null==i&&(i=m);var s=e||(i?[]:{}),o=0,a=0;if(s&&null!=r.origin){if("number"==typeof r.origin)o=r.origin;else{var l="string"==typeof r.origin?pn(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=yn(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==o&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[h].length;++d)if("undefined"!==typeof t[h][d]){var f={v:t[h][d]},p=o+h,g=a+d;if(c.s.r>p&&(c.s.r=p),c.s.c>g&&(c.s.c=g),c.e.r<p&&(c.e.r=p),c.e.c<g&&(c.e.c=g),!t[h][d]||"object"!==typeof t[h][d]||Array.isArray(t[h][d])||t[h][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[h][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||j[14],r.cellDates?(f.t="d",f.w=ve(f.z,Pe(f.v))):(f.t="n",f.v=Pe(f.v),f.w=ve(f.z,f.v))):f.t="s";else f=t[h][d];if(i)s[p]||(s[p]=[]),s[p][g]&&s[p][g].z&&(f.z=s[p][g].z),s[p][g]=f;else{var v=mn({c:g,r:p});s[v]&&s[v].z&&(f.z=s[v].z),s[v]=f}}}return c.s.c<1e7&&(s["!ref"]=vn(c)),s}function Tn(e,t){return xn(null,e,t)}function Sn(e,t){return t||(t=nn(4)),t.write_shift(4,e),t}function En(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Cn(e,t){var n=!1;return null==t&&(n=!0,t=nn(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function kn(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function In(e,t){var n=e.l,r=e.read_shift(1),i=En(e),s=[],o={t:i,h:i};if(0!==(1&r)){for(var a=e.read_shift(4),l=0;l!=a;++l)s.push(kn(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var An=In;function Nn(e,t){var n=!1;return null==t&&(n=!0,t=nn(23+4*e.t.length)),t.write_shift(1,1),Cn(e.t,t),t.write_shift(4,1),function(e,t){t||(t=nn(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function Rn(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Pn(e,t){return null==t&&(t=nn(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function On(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Dn(e,t){return null==t&&(t=nn(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Mn=En,Ln=Cn;function Fn(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function jn(e,t){var n=!1;return null==t&&(n=!0,t=nn(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var Un=En,Bn=Fn,Vn=jn;function zn(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?Ut([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Kt(t,0)>>2;return n?i/100:i}function Wn(e,t){null==t&&(t=nn(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function qn(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Hn=qn,Kn=function(e,t){return t||(t=nn(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Gn(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Yn(e,t){return(t||nn(8)).write_shift(8,e,"f")}function Qn(e,t){if(t||(t=nn(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var $n=2,Xn=3,Jn=80,Zn={1:{n:"CodePage",t:$n},2:{n:"Category",t:Jn},3:{n:"PresentationFormat",t:Jn},4:{n:"ByteCount",t:Xn},5:{n:"LineCount",t:Xn},6:{n:"ParagraphCount",t:Xn},7:{n:"SlideCount",t:Xn},8:{n:"NoteCount",t:Xn},9:{n:"HiddenCount",t:Xn},10:{n:"MultimediaClipCount",t:Xn},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Jn},15:{n:"Company",t:Jn},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:Xn},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:Xn,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Jn},27:{n:"ContentStatus",t:Jn},28:{n:"Language",t:Jn},29:{n:"Version",t:Jn},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},er={1:{n:"CodePage",t:$n},2:{n:"Title",t:Jn},3:{n:"Subject",t:Jn},4:{n:"Author",t:Jn},5:{n:"Keywords",t:Jn},6:{n:"Comments",t:Jn},7:{n:"Template",t:Jn},8:{n:"LastAuthor",t:Jn},9:{n:"RevNumber",t:Jn},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:Xn},15:{n:"WordCount",t:Xn},16:{n:"CharCount",t:Xn},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Jn},19:{n:"DocSecurity",t:Xn},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function tr(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var nr=ze(tr([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),rr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ir={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sr={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function or(e,t){var n,r=function(e){for(var t=[],n=ke(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(ir),i=[];i[i.length]=Qe,i[i.length]=mt("Types",null,{xmlns:vt.CT,"xmlns:xsd":vt.xsd,"xmlns:xsi":vt.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return mt("Default",null,{Extension:e[0],ContentType:e[1]})})));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=mt("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:sr[r][t.bookType]||sr[r].xlsx}))},o=function(n){(e[n]||[]).forEach((function(e){i[i.length]=mt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:sr[n][t.bookType]||sr[n].xlsx})}))},a=function(t){(e[t]||[]).forEach((function(e){i[i.length]=mt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})}))};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var ar={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function lr(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function cr(e){var t=[Qe,mt("Relationships",null,{xmlns:vt.RELS})];return ke(e["!id"]).forEach((function(n){t[t.length]=mt("Relationship",null,e["!id"][n])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ur(e,t,n,r,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,s?i.TargetMode=s:[ar.HLINK,ar.XPATH,ar.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function hr(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function dr(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+r.version+"</meta:generator></office:meta></office:document-meta>"}var fr=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function pr(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=et(t),r[r.length]=n?mt(e,t,n):ft(e,t))}function mr(e,t){var n=t||{},r=[Qe,mt("cp:coreProperties",null,{"xmlns:cp":vt.CORE_PROPS,"xmlns:dc":vt.dc,"xmlns:dcterms":vt.dcterms,"xmlns:dcmitype":vt.dcmitype,"xmlns:xsi":vt.xsi})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&pr("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:gt(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&pr("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:gt(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=fr.length;++s){var o=fr[s],a=n.Props&&null!=n.Props[o[1]]?n.Props[o[1]]:e?e[o[1]]:null;!0===a?a="1":!1===a?a="0":"number"==typeof a&&(a=String(a)),null!=a&&pr(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var gr=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],vr=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function yr(e){var t=[],n=mt;return e||(e={}),e.Application="SheetJS",t[t.length]=Qe,t[t.length]=mt("Properties",null,{xmlns:vt.EXT_PROPS,"xmlns:vt":vt.vt}),gr.forEach((function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=et(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}})),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+et(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function _r(e){var t=[Qe,mt("Properties",null,{xmlns:vt.CUST_PROPS,"xmlns:vt":vt.vt})];if(!e)return t.join("");var n=1;return ke(e).forEach((function(r){++n,t[t.length]=mt("property",function(e,t){switch(typeof e){case"string":var n=mt("vt:lpwstr",et(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return mt((0|e)==e?"vt:i4":"vt:r8",et(String(e)));case"boolean":return mt("vt:bool",e?"true":"false")}if(e instanceof Date)return mt("vt:filetime",gt(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:et(r)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var br={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function wr(e,t){var n=nn(4),r=nn(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=nn(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var s=nn(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=nn(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return C([n,r])}var xr=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Tr(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Sr(e,t,n){var r=nn(8),i=[],s=[],o=8,a=0,l=nn(8),c=nn(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!t){(c=nn(8)).write_shift(4,0),i.unshift(c);var u=[nn(4)];for(u[0].write_shift(4,e.length),a=0;a<e.length;++a){var h=e[a][0];for((l=nn(8+2*(h.length+1)+(h.length%2?0:2))).write_shift(4,a+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=C(u),s.unshift(l),o+=8+l.length}for(a=0;a<e.length;++a)if((!t||t[e[a][0]])&&!(xr.indexOf(e[a][0])>-1||vr.indexOf(e[a][0])>-1)&&null!=e[a][1]){var d=e[a][1],f=0;if(t){var p=n[f=+t[e[a][0]]];if("version"==p.p&&"string"==typeof d){var m=d.split(".");d=(+m[0]<<16)+(+m[1]||0)}l=wr(p.t,d)}else{var g=Tr(d);-1==g&&(g=31,d=String(d)),l=wr(g,d)}s.push(l),(c=nn(8)).write_shift(4,t?f:2+a),i.push(c),o+=8+l.length}var v=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,v),v+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),C([r].concat(i).concat(s))}function Er(e,t,n,r,i,s){var o=nn(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Te.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,i?68:48);var l=Sr(e,n,r);if(a.push(l),i){var c=Sr(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return C(a)}function Cr(e,t){return 1===e.read_shift(t)}function kr(e,t){return t||(t=nn(2)),t.write_shift(2,+!!e),t}function Ir(e){return e.read_shift(2,"u")}function Ar(e,t){return t||(t=nn(2)),t.write_shift(2,e),t}function Nr(e,t,n){return n||(n=nn(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function Rr(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont",o=i;(n&&n.biff>=8&&(i=1200),n&&8!=n.biff)?12==n.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");n.biff>=2&&n.biff<=5&&(s="cpstr");var a=r?e.read_shift(r,s):"";return i=o,a}function Pr(e){var t=e.t||"",n=nn(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=nn(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),C([n,r])}function Or(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Dr(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Or(e,r,n)}function Mr(e,t,n){if(n.biff>5)return Dr(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Lr(e,t,n){return n||(n=nn(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Fr(e,t){t||(t=nn(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function jr(e){var t=nn(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)t.write_shift(4,o[n]);if(28==s)Fr(r=r.slice(1),t);else if(2&s){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)t.write_shift(2,a.charCodeAt(n));t.write_shift(2,0),8&s&&Fr(i>-1?r.slice(i+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Ur(e,t,n,r){return r||(r=nn(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Br(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function Vr(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function zr(e,t){return t||(t=nn(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Wr(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=nn(i);return s.write_shift(2,r),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function qr(e,t){var n=!t||t.biff>=8?2:1,r=nn(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Hr(e,t,n,r){var i=n&&5==n.biff;r||(r=nn(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}function Kr(e,t,n,r){var i=n&&5==n.biff;r||(r=nn(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Gr(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=Rr(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(Br(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function Yr(e){var t=nn(24),n=pn(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return C([t,jr(e[1])])}function Qr(e){var t=e[1].Tooltip,n=nn(10+2*(t.length+1));n.write_shift(2,2048);var r=pn(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function $r(e,t,n){if(!n.cellStyles)return tn(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),o=e.read_shift(r),a=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var Xr=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Ae({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=Tn(function(t,n){var r=[],i=w(1);switch(n.type){case"base64":i=T(y(t));break;case"binary":i=T(t);break;case"buffer":case"array":i=t}en(i,0);var s=i.read_shift(1),o=!!(136&s),a=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:a=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=i.read_shift(2)),i.l+=3,2!=s&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=i.read_shift(2));var h=i.read_shift(2),f=n.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(f=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var p=[],m={},g=Math.min(i.length,2==s?521:u-10-(a?264:0)),v=l?32:11;i.l<g&&13!=i[i.l];)switch((m={}).name=d.utils.decode(f,i.slice(i.l,i.l+v)).replace(/[\u0000\r\n].*$/g,""),i.l+=v,m.type=String.fromCharCode(i.read_shift(1)),2==s||l||(m.offset=i.read_shift(4)),m.len=i.read_shift(1),2==s&&(m.offset=i.read_shift(2)),m.dec=i.read_shift(1),m.name.length&&p.push(m),2!=s&&(i.l+=l?13:14),m.type){case"B":a&&8==m.len||!n.WTF||console.log("Skipping "+m.name+":"+m.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+m.name+":"+m.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+m.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var _=0,b=0;for(r[0]=[],b=0;b!=p.length;++b)r[0][b]=p[b].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++_]=[],b=0,b=0;b!=p.length;++b){var x=i.slice(i.l,i.l+p[b].len);i.l+=p[b].len,en(x,0);var S=d.utils.decode(f,x);switch(p[b].type){case"C":S.trim().length&&(r[_][b]=S.replace(/\s+$/,""));break;case"D":8===S.length?r[_][b]=new Date(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8)):r[_][b]=S;break;case"F":r[_][b]=parseFloat(S.trim());break;case"+":case"I":r[_][b]=l?2147483648^x.read_shift(-4,"i"):x.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":r[_][b]=!0;break;case"N":case"F":r[_][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[_][b]="##MEMO##"+(l?parseInt(S.trim(),10):x.read_shift(4));break;case"N":(S=S.replace(/\u0000/g,"").trim())&&"."!=S&&(r[_][b]=+S||0);break;case"@":r[_][b]=new Date(x.read_shift(-8,"f")-621356832e5);break;case"T":r[_][b]=new Date(864e5*(x.read_shift(4)-2440588)+x.read_shift(4));break;case"Y":r[_][b]=x.read_shift(4,"i")/1e4+x.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[_][b]=-x.read_shift(-8,"f");break;case"B":if(a&&8==p[b].len){r[_][b]=x.read_shift(8,"f");break}case"G":case"P":x.l+=p[b].len;break;case"0":if("_NullFlags"===p[b].name)break;default:throw new Error("DBF Unsupported data type "+p[b].type)}}else i.l+=h;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=p,r}(t,r),r);return i["!cols"]=r.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return wn(n(e,t),t)}catch(r){if(t&&t.WTF)throw r}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&c(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var o=rn(),a=ga(e,{header:1,raw:!0,cellDates:!0}),l=a[0],u=a.slice(1),h=e["!cols"]||[],d=0,f=0,p=0,m=1;for(d=0;d<l.length;++d)if(((h[d]||{}).DBF||{}).name)l[d]=h[d].DBF.name,++p;else if(null!=l[d]){if(++p,"number"===typeof l[d]&&(l[d]=l[d].toString(10)),"string"!==typeof l[d])throw new Error("DBF Invalid column name "+l[d]+" |"+typeof l[d]+"|");if(l.indexOf(l[d])!==d)for(f=0;f<1024;++f)if(-1==l.indexOf(l[d]+"_"+f)){l[d]+="_"+f;break}}var g=yn(e["!ref"]),v=[],y=[],_=[];for(d=0;d<=g.e.c-g.s.c;++d){var b="",w="",x=0,T=[];for(f=0;f<u.length;++f)null!=u[f][d]&&T.push(u[f][d]);if(0!=T.length&&null!=l[d]){for(f=0;f<T.length;++f){switch(typeof T[f]){case"number":w="B";break;case"string":default:w="C";break;case"boolean":w="L";break;case"object":w=T[f]instanceof Date?"D":"C"}x=Math.max(x,String(T[f]).length),b=b&&b!=w?"C":w}x>250&&(x=250),"C"==(w=((h[d]||{}).DBF||{}).type)&&h[d].DBF.len>x&&(x=h[d].DBF.len),"B"==b&&"N"==w&&(b="N",_[d]=h[d].DBF.dec,x=h[d].DBF.len),y[d]="C"==b||"N"==w?x:r[b]||0,m+=y[d],v[d]=b}else v[d]="?"}var S=o.next(32);for(S.write_shift(4,318902576),S.write_shift(4,u.length),S.write_shift(2,296+32*p),S.write_shift(2,m),d=0;d<4;++d)S.write_shift(4,0);for(S.write_shift(4,(+t[s]||3)<<8),d=0,f=0;d<l.length;++d)if(null!=l[d]){var E=o.next(32),C=(l[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);E.write_shift(1,C,"sbcs"),E.write_shift(1,"?"==v[d]?"C":v[d],"sbcs"),E.write_shift(4,f),E.write_shift(1,y[d]||r[v[d]]||0),E.write_shift(1,_[d]||0),E.write_shift(1,2),E.write_shift(4,0),E.write_shift(1,0),E.write_shift(4,0),E.write_shift(4,0),f+=y[d]||r[v[d]]||0}var k=o.next(264);for(k.write_shift(4,13),d=0;d<65;++d)k.write_shift(4,0);for(d=0;d<u.length;++d){var I=o.next(m);for(I.write_shift(1,0),f=0;f<l.length;++f)if(null!=l[f])switch(v[f]){case"L":I.write_shift(1,null==u[d][f]?63:u[d][f]?84:70);break;case"B":I.write_shift(8,u[d][f]||0,"f");break;case"N":var A="0";for("number"==typeof u[d][f]&&(A=u[d][f].toFixed(_[f]||0)),p=0;p<y[f]-A.length;++p)I.write_shift(1,32);I.write_shift(1,A,"sbcs");break;case"D":u[d][f]?(I.write_shift(4,("0000"+u[d][f].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(u[d][f].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+u[d][f].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var N=String(null!=u[d][f]?u[d][f]:"").slice(0,y[f]);for(I.write_shift(1,N,"sbcs"),p=0;p<y[f]-N.length;++p)I.write_shift(1,32)}}return o.next(1).write_shift(1,26),o.end()}}}(),Jr=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+ke(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?p(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:p(r)};function i(e,i){var s,o=e.split(/[\n\r]+/),a=-1,l=-1,u=0,h=0,f=[],p=[],m=null,g={},v=[],y=[],_=[],b=0;for(+i.codepage>=0&&c(+i.codepage);u!==o.length;++u){b=0;var w,x=o[u].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),T=x.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),S=T[0];if(x.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==T[1].charAt(0)&&p.push(x.slice(3).replace(/;;/g,";"));break;case"C":var E=!1,C=!1,k=!1,I=!1,A=-1,N=-1;for(h=1;h<T.length;++h)switch(T[h].charAt(0)){case"A":case"G":break;case"X":l=parseInt(T[h].slice(1))-1,C=!0;break;case"Y":for(a=parseInt(T[h].slice(1))-1,C||(l=0),s=f.length;s<=a;++s)f[s]=[];break;case"K":'"'===(w=T[h].slice(1)).charAt(0)?w=w.slice(1,w.length-1):"TRUE"===w?w=!0:"FALSE"===w?w=!1:isNaN(qe(w))?isNaN(Ke(w).getDate())||(w=Be(w)):(w=qe(w),null!==m&&fe(m)&&(w=Le(w))),"undefined"!==typeof d&&"string"==typeof w&&"string"!=(i||{}).type&&(i||{}).codepage&&(w=d.utils.decode(i.codepage,w)),E=!0;break;case"E":I=!0;var R=qi(T[h].slice(1),{r:a,c:l});f[a][l]=[f[a][l],R];break;case"S":k=!0,f[a][l]=[f[a][l],"S5S"];break;case"R":A=parseInt(T[h].slice(1))-1;break;case"C":N=parseInt(T[h].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}if(E&&(f[a][l]&&2==f[a][l].length?f[a][l][0]=w:f[a][l]=w,m=null),k){if(I)throw new Error("SYLK shared formula cannot have own formula");var P=A>-1&&f[A][N];if(!P||!P[1])throw new Error("SYLK shared formula cannot find base");f[a][l][1]=Gi(P[1],{r:a-A,c:l-N})}break;case"F":var O=0;for(h=1;h<T.length;++h)switch(T[h].charAt(0)){case"X":l=parseInt(T[h].slice(1))-1,++O;break;case"Y":for(a=parseInt(T[h].slice(1))-1,s=f.length;s<=a;++s)f[s]=[];break;case"M":b=parseInt(T[h].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":m=p[parseInt(T[h].slice(1))];break;case"W":for(_=T[h].slice(1).split(" "),s=parseInt(_[0],10);s<=parseInt(_[1],10);++s)b=parseInt(_[2],10),y[s-1]=0===b?{hidden:!0}:{wch:b},gi(y[s-1]);break;case"C":y[l=parseInt(T[h].slice(1))-1]||(y[l]={});break;case"R":v[a=parseInt(T[h].slice(1))-1]||(v[a]={}),b>0?(v[a].hpt=b,v[a].hpx=_i(b)):0===b&&(v[a].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}O<1&&(m=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+x)}}return v.length>0&&(g["!rows"]=v),y.length>0&&(g["!cols"]=y),i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),[f,g]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return i(y(e),t);case"binary":return i(e,t);case"buffer":return i(_&&Buffer.isBuffer(e)?e.toString("binary"):E(e),t);case"array":return i(Ve(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],o=Tn(r,t);return ke(s).forEach((function(e){o[e]=s[e]})),o}function o(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+Ki(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return wn(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],s=[],a=yn(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach((function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=fi(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=pi(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)}))),e["!rows"]&&function(e,t){t.forEach((function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*yi(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))}))}(i,e["!rows"]),i.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" "));for(var u=a.s.r;u<=a.e.r;++u)for(var h=a.s.c;h<=a.e.c;++h){var d=mn({r:u,c:h});(n=l?(e[u]||[])[h]:e[d])&&(null!=n.v||n.f&&!n.F)&&s.push(o(n,0,u,h))}return i.join(c)+c+s.join(c)+c+"E"+c}}}(),Zr=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,o=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var a=n[s].trim().split(","),l=a[0],c=a[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){o[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?o[r][i]=!0:"FALSE"===u?o[r][i]=!1:isNaN(qe(c))?isNaN(Ke(c).getDate())?o[r][i]=c:o[r][i]=Be(c):o[r][i]=qe(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),o[r][i++]=""!==u?u:null}if("EOD"===u)break}}else o[++r]=[],i=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,n){return Tn(function(t,n){switch(n.type){case"base64":return e(y(t),n);case"binary":return e(t,n);case"buffer":return e(_&&Buffer.isBuffer(t)?t.toString("binary"):E(t),n);case"array":return e(Ve(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return wn(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],s=yn(n["!ref"]),o=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var a=s.s.r;a<=s.e.r;++a){t(i,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=mn({r:a,c:l});if(r=o?(n[a]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=ve(r.z||j[14],Pe(Be(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}()}}(),ei=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return Tn(function(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,o=[];s!==n.length;++s){var a=n[s].trim().split(":");if("cell"===a[0]){var l=pn(a[1]);if(o.length<=l.r)for(r=o.length;r<=l.r;++r)o[r]||(o[r]=[]);switch(r=l.r,i=l.c,a[2]){case"t":o[r][i]=a[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":o[r][i]=+a[3];break;case"vtf":var c=a[a.length-1];case"vtc":"nl"===a[3]?o[r][i]=!!+a[4]:o[r][i]=+a[4],"vtf"==a[2]&&(o[r][i]=[o[r][i],c])}}}return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}(e,t),t)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),r=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",i=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),s="--SocialCalcSpreadsheetControlSave--";function o(t){if(!t||!t["!ref"])return"";for(var n,r=[],i=[],s="",o=gn(t["!ref"]),a=Array.isArray(t),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(s=mn({r:l,c:c}),(n=a?(t[l]||[])[c]:t[s])&&null!=n.v&&"z"!==n.t){switch(i=["cell",s,"t"],n.t){case"s":case"str":i.push(e(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=e(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=e(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=Pe(Be(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||ve(n.z||j[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,n){return wn(t(e,n),n)},to_sheet:t,from_sheet:function(e){return[n,r,i,r,o(e),s].join("\n")}}}(),ti=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(qe(e))?isNaN(Ke(e).getDate())?t[n][r]=e:t[n][r]=Be(e):t[n][r]=qe(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,s=0,o=0;s<e.length;++s)34==(o=e.charCodeAt(s))?i=!i:!i&&o in t&&(r[o]=(r[o]||0)+1);for(s in o=[],r)Object.prototype.hasOwnProperty.call(r,s)&&o.push([r[s],s]);if(!o.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&o.push([r[s],s]);return o.sort((function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]})),t[o.pop()[1]]||44}function i(e,t){var n=t||{},i="";null!=m&&null==n.dense&&(n.dense=m);var s=n.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var a=0,l=0,c=0,u=0,h=0,d=i.charCodeAt(0),f=!1,p=0,g=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var v=null!=n.dateNF?function(e){var t="number"==typeof e?j[e]:e;return t=t.replace(we,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function y(){var t=e.slice(u,h),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=qe(t)))if(!isNaN(Ke(t).getDate())||v&&t.match(v)){r.z=n.dateNF||j[14];var i=0;v&&t.match(v)&&(t=function(e,t,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(t.match(we)||[]).forEach((function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?a=c:i=c}})),l>=0&&-1==a&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==a&&-1==l?c:-1==r&&-1==i&&-1==s?u:c+"T"+u}(0,n.dateNF,t.match(v)||[]),i=1),n.cellDates?(r.t="d",r.v=Be(t,i)):(r.t="n",r.v=Pe(Be(t,i))),!1!==n.cellText&&(r.w=ve(r.z,r.v instanceof Date?Pe(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[a]||(s[a]=[]),s[a][l]=r):s[mn({c:l,r:a})]=r),u=h+1,g=e.charCodeAt(u),o.e.c<l&&(o.e.c=l),o.e.r<a&&(o.e.r=a),p==d)++l;else if(l=0,++a,n.sheetRows&&n.sheetRows<=a)return!0}e:for(;h<e.length;++h)switch(p=e.charCodeAt(h)){case 34:34===g&&(f=!f);break;case d:case 10:case 13:if(!f&&y())break e}return h-u>0&&y(),s["!ref"]=vn(o),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):Tn(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),o=s.length-1;o>=0&&0===s[o].length;)--o;for(var a=10,l=0,c=0;c<=o;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,a=Math.max(a,l);for(c=0;c<=o;++c){i[c]=[];var u=0;for(e(s[c].slice(0,a).trim(),i,c,u,r),u=1;u<=(s[c].length-a)/10+1;++u)e(s[c].slice(a+10*(u-1),a+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function o(e,t){var n="",r="string"==t.type?[0,0,0,0]:aa(e,t);switch(t.type){case"base64":n=y(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof d?d.utils.decode(t.codepage,e):_&&Buffer.isBuffer(e)?e.toString("binary"):E(e);break;case"array":n=Ve(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=ct(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=ct(n):"binary"==t.type&&"undefined"!==typeof d&&t.codepage&&(n=d.utils.decode(t.codepage,d.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?ei.to_sheet("string"==t.type?n:ct(n),t):s(n,t)}return{to_workbook:function(e,t){return wn(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,n=[],r=yn(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var o=[],a=r.s.c;a<=r.e.c;++a){var l=mn({r:s,c:a});if((t=i?(e[s]||[])[a]:e[l])&&null!=t.v){for(var c=(t.w||(bn(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===a?" ":""))}else o.push("          ")}n.push(o.join(""))}return n.join("\n")}}}();var ni=function(){function e(e,t,n){if(e){en(e,e.l||0);for(var r=n.Enum||b;e.l<e.length;){var i=e.read_shift(2),s=r[i]||r[65535],o=e.read_shift(2),a=e.l+o,l=s.f&&s.f(e,o,n);if(e.l=a,t(l,s,i))return}}}function t(t,n){if(!t)return t;var r=n||{};null!=m&&null==r.dense&&(r.dense=m);var i=r.dense?[]:{},s="Sheet1",o="",a=0,l={},c=[],u=[],h={s:{r:0,c:0},e:{r:0,c:0}},d=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=b,e(t,(function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:h=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||j[14],r.cellDates&&(e[1].t="d",e[1].v=Le(e[1].v))),r.qpro&&e[3]>a&&(i["!ref"]=vn(h),l[s]=i,c.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s=o||"Sheet"+(a+1),o="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[mn(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[mn(e[0])]=e[1]}}),r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=w,14==t[2]&&(r.qpro=!0,t.l=0),e(t,(function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>a&&(i["!ref"]=vn(h),l[s]=i,c.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],s="Sheet"+(a+1)),d>0&&e[0].r>=d)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[mn(e[0])]=e[1],h.e.c<e[0].c&&(h.e.c=e[0].c),h.e.r<e[0].r&&(h.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==a&&(s=e[1])}}),r)}if(i["!ref"]=vn(h),l[o||s]=i,c.push(o||s),!u.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],g=0;g<u.length;++g)l[c[g]]?(p.push(u[g]||c[g]),f[u[g]]=l[u[g]]||l[c[g]]):(p.push(u[g]),f[u[g]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var o=e.read_shift(1);return s[1].v=e.read_shift(o,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,n){var r=nn(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var s=n.charCodeAt(i);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=nn(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function o(e,t,n){var r=nn(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function a(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?fn(t):hn(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},u=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function h(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var i=nn(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<r.length;++s){var o=r.charCodeAt(s);i.write_shift(1,o>=128?95:o)}return i.write_shift(1,0),i}function f(e,t){var n=h(e),r=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var o=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*o)*(i*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function p(e,t,n,r){var i=nn(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,o=0,a=0,l=0;return r<0&&(o=1,r=-r),a=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,a-31))>>>0))&&(++a,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,l),a+=16383+(o?32768:0),i.write_shift(2,a),i}function g(e,t){var n=h(e),r=e.read_shift(8,"f");return n[1].v=r,n}function v(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function _(e,t){var n=nn(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var b={0:{n:"BOF",f:Ir},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var o=e.read_shift(2);!function(e,t){en(e,0);var n=[],r=0,i="",s="",o="",c="";for(;e.l<e.length;){var h=e[e.l++];switch(h){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),n.push(s+i);break;case 2:var d=a(t[0].c,e.read_shift(2),!0),f=a(t[0].r,e.read_shift(2),!1);s=a(t[0].c,e.read_shift(2),!0),i=a(t[0].r,e.read_shift(2),!1),n.push(d+f+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";h=e[e.l++];)p+=String.fromCharCode(h);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:c=n.pop(),o=n.pop(),n.push(["AND","OR"][h-20]+"("+o+","+c+")");break;default:if(h<32&&u[h])c=n.pop(),o=n.pop(),n.push(o+u[h]+c);else{if(!l[h])return h<=7?console.error("WK1 invalid opcode "+h.toString(16)):h<=24?console.error("WK1 unsupported op "+h.toString(16)):h<=30?console.error("WK1 invalid opcode "+h.toString(16)):h<=115?console.error("WK1 unsupported function opcode "+h.toString(16)):console.error("WK1 unrecognized opcode "+h.toString(16));if(69==(r=l[h][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+h.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[h][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+o),s),e.l+=o}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:v},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},w={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=h(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:f},24:{n:"NUMBER18",f:function(e,t){var n=h(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=f(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=h(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:g},40:{n:"FORMULA28",f:function(e,t){var n=g(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:v},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&c(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=rn(),a=yn(e["!ref"]),l=Array.isArray(e),u=[];_o(r,0,function(e){var t=nn(2);return t.write_shift(2,e),t}(1030)),_o(r,6,function(e){var t=nn(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(a));for(var h=Math.min(a.e.r,8191),d=a.s.r;d<=h;++d)for(var f=hn(d),p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(u[p]=fn(p));var m=u[p]+f,g=l?(e[d]||[])[p]:e[m];if(g&&"z"!=g.t)if("n"==g.t)(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?_o(r,13,s(d,p,g.v)):_o(r,14,o(d,p,g.v));else _o(r,15,i(d,p,bn(g).slice(0,239)))}return _o(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&c(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=rn();_o(r,0,function(e){var t=nn(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,s=0;s<e.SheetNames.length;++s){var o=e.SheetNames[s],a=e.Sheets[o];if(a&&a["!ref"]){++i;var l=gn(a["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&_o(r,27,_(e.SheetNames[i],s++));var o=0;for(i=0;i<e.SheetNames.length;++i){var a=e.Sheets[e.SheetNames[i]];if(a&&a["!ref"]){for(var l=yn(a["!ref"]),u=Array.isArray(a),h=[],f=Math.min(l.e.r,8191),m=l.s.r;m<=f;++m)for(var g=hn(m),v=l.s.c;v<=l.e.c;++v){m===l.s.r&&(h[v]=fn(v));var y=h[v]+g,b=u?(a[m]||[])[v]:a[y];if(b&&"z"!=b.t)if("n"==b.t)_o(r,23,p(m,v,o,b.v));else _o(r,22,d(m,v,o,bn(b).slice(0,239)))}++o}}return _o(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(T(y(e)),n);case"binary":return t(T(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var ri=/^\s|\s$|[\t\n\r]/;function ii(e,t){if(!t.bookSST)return"";var n=[Qe];n[n.length]=mt("sst",null,{xmlns:yt[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(ri)&&(s+=' xml:space="preserve"'),s+=">"+et(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var si=function(e,t){var n=!1;return null==t&&(n=!0,t=nn(15+4*e.t.length)),t.write_shift(1,0),Cn(e.t,t),n?t.slice(0,t.l):t};function oi(e){var t=rn();sn(t,159,function(e,t){return t||(t=nn(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)sn(t,19,si(e[n]));return sn(t,160),t.end()}function ai(e){if("undefined"!==typeof d)return d.utils.encode(s,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function li(e){var t,n,r=0,i=ai(e),s=i.length+1;for((t=w(s))[0]=i.length,n=1;n!=s;++n)t[n]=i[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var ci=function(){function e(e,n){switch(n.type){case"base64":return t(y(e),n);case"binary":return t(e,n);case"buffer":return t(_&&Buffer.isBuffer(e)?e.toString("binary"):E(e),n);case"array":return t(Ve(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach((function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,o=0,a=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(o,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++a,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][a]=c:n[mn({r:t,c:a})]=c}}o=s.lastIndex}a>i.e.c&&(i.e.c=a)})),n["!ref"]=vn(i),n}return{to_workbook:function(t,n){return wn(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=yn(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var o=r.s.c;o<=r.e.c;++o)n.push("\\cellx"+(o+1));for(n.push("\\pard\\intbl"),o=r.s.c;o<=r.e.c;++o){var a=mn({r:s,c:o});(t=i?(e[s]||[])[o]:e[a])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(bn(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function ui(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var hi=6,di=hi;function fi(e){return Math.floor((e+Math.round(128/di)/256)*di)}function pi(e){return Math.floor((e-5)/di*100+.5)/100}function mi(e){return Math.round((e*di+5)/di*256)/256}function gi(e){e.width?(e.wpx=fi(e.width),e.wch=pi(e.wpx),e.MDW=di):e.wpx?(e.wch=pi(e.wpx),e.width=mi(e.wch),e.MDW=di):"number"==typeof e.wch&&(e.width=mi(e.wch),e.wpx=fi(e.width),e.MDW=di),e.customWidth&&delete e.customWidth}var vi=96;function yi(e){return 96*e/vi}function _i(e){return e*vi/96}function bi(e,t){var n,r=[Qe,mt("styleSheet",null,{xmlns:yt[0],"xmlns:vt":vt.vt})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=mt("numFmt",null,{numFmtId:r,formatCode:et(e[r])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=mt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=mt("cellXfs",null),e.forEach((function(e){t[t.length]=mt("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=mt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function wi(e,t,n){n||(n=nn(6+4*t.length)),n.write_shift(2,e),Cn(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function xi(e,t){t||(t=nn(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=nn(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Qn(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),Cn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Ti,Si=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ei=tn;function Ci(e,t){t||(t=nn(84)),Ti||(Ti=Ae(Si));var n=Ti[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(Qn({auto:1},t),Qn({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function ki(e,t,n){n||(n=nn(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Ii(e,t){return t||(t=nn(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Ai=tn;function Ni(e){var t;sn(e,613,Sn(1)),sn(e,46,(t||(t=nn(51)),t.write_shift(1,0),Ii(0,t),Ii(0,t),Ii(0,t),Ii(0,t),Ii(0,t),t.length>t.l?t.slice(0,t.l):t)),sn(e,614)}function Ri(e){var t,n;sn(e,619,Sn(1)),sn(e,48,(t={xfId:0,builtinId:0,name:"Normal"},n||(n=nn(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),jn(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),sn(e,620)}function Pi(e){sn(e,508,function(e,t,n){var r=nn(2052);return r.write_shift(4,e),jn(t,r),jn(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),sn(e,509)}function Oi(e,t){var n=rn();return sn(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n})),0!=n&&(sn(e,615,Sn(n)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&sn(e,44,wi(r,t[r]))})),sn(e,616))}}(n,e.SSF),function(e){sn(e,611,Sn(1)),sn(e,43,xi({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),sn(e,612)}(n),function(e){sn(e,603,Sn(2)),sn(e,45,Ci({patternType:"none"})),sn(e,45,Ci({patternType:"gray125"})),sn(e,604)}(n),Ni(n),function(e){sn(e,626,Sn(1)),sn(e,47,ki({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),sn(e,627)}(n),function(e,t){sn(e,617,Sn(t.length)),t.forEach((function(t){sn(e,47,ki(t,0))})),sn(e,618)}(n,t.cellXfs),Ri(n),function(e){sn(e,505,Sn(0)),sn(e,506)}(n),Pi(n),sn(n,279),n.end()}function Di(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Qe];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Mi(){var e=rn();return sn(e,332),sn(e,334,Sn(1)),sn(e,335,function(e){var t=nn(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Cn(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),sn(e,336),sn(e,339,function(e,t){var n=nn(8+2*t.length);return n.write_shift(4,e),Cn(t,n),n.slice(0,n.l)}(1,"XLDAPR")),sn(e,52),sn(e,35,Sn(514)),sn(e,4096,Sn(0)),sn(e,4097,Ar(1)),sn(e,36),sn(e,53),sn(e,340),sn(e,337,function(e,t){var n=nn(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),sn(e,51,function(e){var t=nn(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),sn(e,338),sn(e,333),e.end()}function Li(){var e=[Qe];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var Fi=1024;function ji(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[mt("xml",null,{"xmlns:v":_t.v,"xmlns:o":_t.o,"xmlns:x":_t.x,"xmlns:mv":_t.mv}).replace(/\/>/,">"),mt("o:shapelayout",mt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),mt("v:shapetype",[mt("v:stroke",null,{joinstyle:"miter"}),mt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Fi<1e3*e;)Fi+=1e3;return t.forEach((function(e){var t=pn(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?mt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=mt("v:fill",r,n);++Fi,i=i.concat(["<v:shape"+pt({id:"_x0000_s"+Fi,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,mt("v:shadow",null,{on:"t",obscured:"t"}),mt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ft("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),ft("x:AutoFill","False"),ft("x:Row",String(t.r)),ft("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),i.push("</xml>"),i.join("")}function Ui(e){var t=[Qe,mt("comments",null,{xmlns:yt[0]})],n=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var r=et(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(r=n.indexOf(et(e.a))),i.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(ft("t",et(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",o=1;o<i.length;++o)s+="Reply:\n    "+i[o]+"\n";t.push(ft("t",et(s)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Bi(e,t,n){var r=[Qe,mt("ThreadedComments",null,{xmlns:vt.TCMNT}).replace(/[\/]>/,">")];return e.forEach((function(e){var i="";(e[1]||[]).forEach((function(s,o){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var a={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==o?i=a.id:a.parentId=i,s.ID=a.id,s.a&&(a.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(mt("threadedComment",ft("text",s.t||""),a))}else delete s.ID}))})),r.push("</ThreadedComments>"),r.join("")}var Vi=En;function zi(e){var t=rn(),n=[];return sn(t,628),sn(t,630),e.forEach((function(e){e[1].forEach((function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),sn(t,632,function(e){return Cn(e.slice(0,54))}(e.a)))}))})),sn(t,631),sn(t,633),e.forEach((function(e){e[1].forEach((function(r){r.iauthor=n.indexOf(r.a);var i={s:pn(e[0]),e:pn(e[0])};sn(t,635,function(e,t){return null==t&&(t=nn(36)),t.write_shift(4,e[1].iauthor),Kn(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&sn(t,637,Nn(r)),sn(t,636),delete r.iauthor}))})),sn(t,634),sn(t,629),t.end()}var Wi=["xlsb","xlsm","xlam","biff8","xla"];var qi=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var s=!1,o=!1;0==r.length?o=!0:"["==r.charAt(0)&&(o=!0,r=r.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var a=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return s?l+=t.c:--l,o?a+=t.r:--a,n+(s?"":"$")+fn(l)+(o?"":"$")+hn(a)}return function(r,i){return t=i,r.replace(e,n)}}(),Hi=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Ki=function(){return function(e,t){return e.replace(Hi,(function(e,n,r,i,s,o){var a=dn(i)-(r?0:t.c),l=un(o)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==a?"":r?a+1:"["+a+"]")}))}}();function Gi(e,t){return e.replace(Hi,(function(e,n,r,i,s,o){return n+("$"==r?r+i:fn(dn(i)+t.c))+("$"==s?s+o:hn(un(o)+t.r))}))}function Yi(e){e.l+=1}function Qi(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function $i(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Xi(e);12==n.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),o=Qi(e,2),a=Qi(e,2);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function Xi(e){var t=Qi(e,2),n=Qi(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Ji(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=Qi(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=Qi(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function Zi(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function es(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function ts(e){return[e.read_shift(1),e.read_shift(1)]}function ns(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Cr(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=rr[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Gn(e);break;case 2:n[1]=Mr(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function rs(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==n.biff?Hn:Vr)(e,8));return i}function is(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=ns(e,n.biff);return o}function ss(e,t,n){return e.l+=2,[Zi(e)]}function os(e){return e.l+=6,[]}function as(e){return e.l+=2,[Ir(e),1&e.read_shift(2)]}var ls=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var cs={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:tn},3:{n:"PtgAdd",f:Yi},4:{n:"PtgSub",f:Yi},5:{n:"PtgMul",f:Yi},6:{n:"PtgDiv",f:Yi},7:{n:"PtgPower",f:Yi},8:{n:"PtgConcat",f:Yi},9:{n:"PtgLt",f:Yi},10:{n:"PtgLe",f:Yi},11:{n:"PtgEq",f:Yi},12:{n:"PtgGe",f:Yi},13:{n:"PtgGt",f:Yi},14:{n:"PtgNe",f:Yi},15:{n:"PtgIsect",f:Yi},16:{n:"PtgUnion",f:Yi},17:{n:"PtgRange",f:Yi},18:{n:"PtgUplus",f:Yi},19:{n:"PtgUminus",f:Yi},20:{n:"PtgPercent",f:Yi},21:{n:"PtgParen",f:Yi},22:{n:"PtgMissArg",f:Yi},23:{n:"PtgStr",f:function(e,t,n){return e.l++,Rr(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,rr[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Gn(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[Is[i],ks[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?ks:Cs)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,Ji(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,$i(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:tn},40:{n:"PtgMemNoMem",f:tn},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),o=(16384&s)>>14,a=(32768&s)>>15;if(s&=16383,1==a)for(;i>524287;)i-=1048576;if(1==o)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:o,rRel:a}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return Xi(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),s=Qi(e,2),o=Qi(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,Ji(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12,6;break;case 12:12}return[r,i,$i(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},us={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},hs={1:{n:"PtgElfLel",f:as},2:{n:"PtgElfRw",f:ss},3:{n:"PtgElfCol",f:ss},6:{n:"PtgElfRwV",f:ss},7:{n:"PtgElfColV",f:ss},10:{n:"PtgElfRadical",f:ss},11:{n:"PtgElfRadicalS",f:os},13:{n:"PtgElfColS",f:os},15:{n:"PtgElfColSV",f:os},16:{n:"PtgElfRadicalLel",f:as},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:ls[n>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},ds={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:es},33:{n:"PtgAttrBaxcel",f:es},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),ts(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),ts(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function fs(e,t,n,r){if(r.biff<8)return tn(e,t);for(var i=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=is(e,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=rs(e,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&12==r.biff&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return 0!==(t=i-e.l)&&s.push(tn(e,t)),s}function ps(e,t,n){for(var r,i,s=e.l+t,o=[];s!=e.l;)t=s-e.l,i=e[e.l],r=cs[i]||cs[us[i]],24!==i&&25!==i||(r=(24===i?hs:ds)[e[e.l+1]]),r&&r.f?o.push([r.n,r.f(e,t,n)]):tn(e,t);return o}function ms(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)if(2===o[0])i.push('"'+o[1].replace(/"/g,'""')+'"');else i.push(o[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var gs={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function vs(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function ys(e,t,n){var r=vs(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function _s(e,t,n,r,i){var s,o,a,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,y=e[0].length;v<y;++v){var _=e[0][v];switch(_[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=h.pop(),o=h.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=We(" ",e[0][m][1][1]);break;case 1:g=We("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=g,m=-1}h.push(o+gs[_[0]]+s);break;case"PtgIsect":s=h.pop(),o=h.pop(),h.push(o+" "+s);break;case"PtgUnion":s=h.pop(),o=h.pop(),h.push(o+","+s);break;case"PtgRange":s=h.pop(),o=h.pop(),h.push(o+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":a=on(_[1][1],u,i),h.push(ln(a,c));break;case"PtgRefN":a=n?on(_[1][1],n,i):_[1][1],h.push(ln(a,c));break;case"PtgRef3d":d=_[1][1],a=on(_[1][2],u,i);p=ys(r,d,i);h.push(p+"!"+ln(a,c));break;case"PtgFunc":case"PtgFuncVar":var b=_[1][0],w=_[1][1];b||(b=0);var x=0==(b&=127)?[]:h.slice(-b);h.length-=b,"User"===w&&(w=x.shift()),h.push(w+"("+x.join(",")+")");break;case"PtgBool":h.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":h.push(_[1]);break;case"PtgNum":h.push(String(_[1]));break;case"PtgStr":h.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=an(_[1][1],n?{s:n}:u,i),h.push(cn(l,i));break;case"PtgArea":l=an(_[1][1],u,i),h.push(cn(l,i));break;case"PtgArea3d":d=_[1][1],l=_[1][2],p=ys(r,d,i),h.push(p+"!"+cn(l,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgName":f=_[1][2];var T=(r.names||[])[f-1]||(r[0]||[])[f],S=T?T.Name:"SH33TJSNAME"+String(f);S&&"_xlfn."==S.slice(0,6)&&!i.xlfn&&(S=S.slice(6)),h.push(S);break;case"PtgNameX":var E,C=_[1][1];if(f=_[1][2],!(i.biff<=5)){var k="";if(14849==((r[C]||[])[0]||[])[0]||(1025==((r[C]||[])[0]||[])[0]?r[C][f]&&r[C][f].itab>0&&(k=r.SheetNames[r[C][f].itab-1]+"!"):k=r.SheetNames[f-1]+"!"),r[C]&&r[C][f])k+=r[C][f].Name;else if(r[0]&&r[0][f])k+=r[0][f].Name;else{var I=(vs(r,C,i)||"").split(";;");I[f-1]?k=I[f-1]:k+="SH33TJSERRX"}h.push(k);break}C<0&&(C=-C),r[C]&&(E=r[C][f]),E||(E={Name:"SH33TJSERRY"}),h.push(E.Name);break;case"PtgParen":var A="(",N=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:A=We(" ",e[0][m][1][1])+A;break;case 3:A=We("\r",e[0][m][1][1])+A;break;case 4:N=We(" ",e[0][m][1][1])+N;break;case 5:N=We("\r",e[0][m][1][1])+N;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}h.push(A+h.pop()+N);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":h.push("#REF!");break;case"PtgExp":a={c:_[1][1],r:_[1][0]};var R={c:n.c,r:n.r};if(r.sharedf[mn(a)]){var P=r.sharedf[mn(a)];h.push(_s(P,u,R,r,i))}else{var O=!1;for(s=0;s!=r.arrayf.length;++s)if(o=r.arrayf[s],!(a.c<o[0].s.c||a.c>o[0].e.c)&&!(a.r<o[0].s.r||a.r>o[0].e.r)){h.push(_s(o[1],u,R,r,i)),O=!0;break}O||h.push(_[1])}break;case"PtgArray":h.push("{"+ms(_[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":h.push("");break;case"PtgList":h.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(_))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var D=!0;switch((_=e[0][m])[1][0]){case 4:D=!1;case 0:g=We(" ",_[1][1]);break;case 5:D=!1;case 1:g=We("\r",_[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}h.push((D?g:"")+h.pop()+(D?"":g)),m=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return h[0]}function bs(e,t,n,r,i){var s=Ur(t,n,i),o=function(e){if(null==e){var t=nn(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Yn("number"==typeof e?e:0)}(e.v),a=nn(6);a.write_shift(2,33),a.write_shift(4,0);for(var l=nn(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return C([s,o,a,l])}function ws(e,t,n){var r=e.read_shift(4),i=ps(e,r,n),s=e.read_shift(4);return[i,s>0?fs(e,s,i,n):null]}var xs=ws,Ts=ws,Ss=ws,Es=ws,Cs={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ks={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Is={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};var As="undefined"!==typeof Map;function Ns(e,t,n){var r=0,i=e.length;if(n){if(As?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=As?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(As?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function Rs(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(di=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=pi(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=mi(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function Ps(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function Os(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){ye(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===r)return i;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Ds(e,t,n){if(e&&e["!ref"]){var r=yn(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var Ms=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Ls=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Fs(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=rr[e.v];break;case"d":r&&r.cellDates?i=Be(e.v,-1).toISOString():((e=ze(e)).t="n",i=""+(e.v=Pe(Be(e.v)))),"undefined"===typeof e.z&&(e.z=j[14]);break;default:i=e.v}var a=ft("v",et(i)),l={r:t},c=Os(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=ft("v",""+Ns(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=o),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;a=mt("f",et(e.f),u)+(null!=e.v?a:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),mt("c",a,l)}function js(e,t,n,r){var i,s=[Qe,mt("worksheet",null,{xmlns:yt[0],"xmlns:r":vt.r})],o=n.SheetNames[e],a="",l=n.Sheets[o];null==l&&(l={});var c=l["!ref"]||"A1",u=yn(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=vn(u)}r||(r={}),l["!comments"]=[];var h=[];!function(e,t,n,r,i){var s=!1,o={},a=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(u){}s=!0,o.codeName=ut(et(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),a=(a||"")+mt("outlinePr",null,c)}(s||a)&&(i[i.length]=mt("sheetPr",a,o))}(l,n,e,t,s),s[s.length]=mt("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),mt("sheetViews",mt("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=mt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=mt("col",null,Rs(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(a=function(e,t){var n,r,i=[],s=[],o=yn(e["!ref"]),a="",l="",c=[],u=0,h=0,d=e["!rows"],f=Array.isArray(e),p={r:l},m=-1;for(h=o.s.c;h<=o.e.c;++h)c[h]=fn(h);for(u=o.s.r;u<=o.e.r;++u){for(s=[],l=hn(u),h=o.s.c;h<=o.e.c;++h){n=c[h]+l;var g=f?(e[u]||[])[h]:e[n];void 0!==g&&null!=(a=Fs(g,n,e,t))&&s.push(a)}(s.length>0||d&&d[u])&&(p={r:l},d&&d[u]&&((r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=yi(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=mt("row",s.join(""),p))}if(d)for(;u<d.length;++u)d&&d[u]&&(p={r:u+1},(r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=yi(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=mt("row","",p));return i.join("")}(l,t,0,0),a.length>0&&(s[s.length]=a)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return Ms.forEach((function(n){null!=e[n]&&e[n]&&(t[n]="1")})),Ls.forEach((function(n){null==e[n]||e[n]||(t[n]="0")})),e.password&&(t.password=li(e.password).toString(16).toUpperCase()),mt("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:vn(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=gn(i);o.s.r==o.e.r&&(o.e.r=gn(t["!ref"]).e.r,i=vn(o));for(var a=0;a<s.length;++a){var l=s[a];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),mt("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+vn(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var d,f,p=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(d={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=ur(r,-1,et(e[1].Target).replace(/#.*$/,""),ar.HLINK),d["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(d.location=et(e[1].Target.slice(p+1))),e[1].Tooltip&&(d.tooltip=et(e[1].Tooltip)),s[s.length]=mt("hyperlink",null,d))})),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(Ps(f=l["!margins"]),mt("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=ft("ignoredErrors",mt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(m=ur(r,-1,"../drawings/drawing"+(e+1)+".xml",ar.DRAW),s[s.length]=mt("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=h),l["!comments"].length>0&&(m=ur(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ar.VML),s[s.length]=mt("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Us(e,t,n,r){var i=function(e,t,n){var r=nn(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;i.hpx?s=20*yi(i.hpx):i.hpt&&(s=20*i.hpt),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,d=-1,f=u<<10;f<u+1<<10;++f)c.c=f,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[mn(c)])&&(h<0&&(h=f),d=f);h<0||(++a,r.write_shift(4,h),r.write_shift(4,d))}var p=r.l;return r.l=l,r.write_shift(4,a),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&sn(e,0,i)}var Bs=Hn,Vs=Kn;function zs(e){return[On(e),Gn(e),"n"]}var Ws=Hn,qs=Kn;var Hs=["left","right","top","bottom","header","footer"];function Ks(e,t,n,r,i,s,o){if(void 0===t.v)return!1;var a="";switch(t.t){case"b":a=t.v?"1":"0";break;case"d":(t=ze(t)).z=t.z||j[14],t.v=Pe(Be(t.v)),t.t="n";break;case"n":case"e":a=""+t.v;break;default:a=t.v}var l={r:n,c:r};switch(l.s=Os(i.cellXfs,t,i),t.l&&s["!links"].push([mn(l),t.l]),t.c&&s["!comments"].push([mn(l),t.c]),t.t){case"s":case"str":return i.bookSST?(a=Ns(i.Strings,t.v,i.revStrings),l.t="s",l.v=a,o?sn(e,18,function(e,t,n){return null==n&&(n=nn(8)),Dn(t,n),n.write_shift(4,t.v),n}(0,l)):sn(e,7,function(e,t,n){return null==n&&(n=nn(12)),Pn(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",o?sn(e,17,function(e,t,n){return null==n&&(n=nn(8+4*e.v.length)),Dn(t,n),Cn(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):sn(e,6,function(e,t,n){return null==n&&(n=nn(12+4*e.v.length)),Pn(t,n),Cn(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?sn(e,13,function(e,t,n){return null==n&&(n=nn(8)),Dn(t,n),Wn(e.v,n),n}(t,l)):sn(e,2,function(e,t,n){return null==n&&(n=nn(12)),Pn(t,n),Wn(e.v,n),n}(t,l)):o?sn(e,16,function(e,t,n){return null==n&&(n=nn(12)),Dn(t,n),Yn(e.v,n),n}(t,l)):sn(e,5,function(e,t,n){return null==n&&(n=nn(16)),Pn(t,n),Yn(e.v,n),n}(t,l)),!0;case"b":return l.t="b",o?sn(e,15,function(e,t,n){return null==n&&(n=nn(5)),Dn(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):sn(e,4,function(e,t,n){return null==n&&(n=nn(9)),Pn(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",o?sn(e,14,function(e,t,n){return null==n&&(n=nn(8)),Dn(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):sn(e,3,function(e,t,n){return null==n&&(n=nn(9)),Pn(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return o?sn(e,12,function(e,t,n){return null==n&&(n=nn(4)),Dn(t,n)}(0,l)):sn(e,1,function(e,t,n){return null==n&&(n=nn(8)),Pn(t,n)}(0,l)),!0}function Gs(e,t){var n,r;t&&t["!merges"]&&(sn(e,177,(n=t["!merges"].length,null==r&&(r=nn(4)),r.write_shift(4,n),r)),t["!merges"].forEach((function(t){sn(e,176,qs(t))})),sn(e,178))}function Ys(e,t){t&&t["!cols"]&&(sn(e,390),t["!cols"].forEach((function(t,n){t&&sn(e,60,function(e,t,n){null==n&&(n=nn(18));var r=Rs(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))})),sn(e,391))}function Qs(e,t){t&&t["!ref"]&&(sn(e,648),sn(e,649,function(e){var t=nn(24);return t.write_shift(4,4),t.write_shift(4,1),Kn(e,t),t}(yn(t["!ref"]))),sn(e,650))}function $s(e,t,n){t["!links"].forEach((function(t){if(t[1].Target){var r=ur(n,-1,t[1].Target.replace(/#.*$/,""),ar.HLINK);sn(e,494,function(e,t){var n=nn(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Kn({s:pn(e[0]),e:pn(e[0])},n),Vn("rId"+t,n);var r=e[1].Target.indexOf("#");return Cn((-1==r?"":e[1].Target.slice(r+1))||"",n),Cn(e[1].Tooltip||"",n),Cn("",n),n.slice(0,n.l)}(t,r))}})),delete t["!links"]}function Xs(e,t,n){sn(e,133),sn(e,137,function(e,t,n){null==n&&(n=nn(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),sn(e,138),sn(e,134)}function Js(e,t){var n,r;t["!protect"]&&sn(e,535,(n=t["!protect"],null==r&&(r=nn(66)),r.write_shift(2,n.password?li(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)})),r))}function Zs(e,t,n,r){var i=rn(),s=n.SheetNames[e],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[e].CodeName||a)}catch(h){}var l,c,u=yn(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],sn(i,129),(n.vbaraw||o["!outline"])&&sn(i,147,function(e,t,n){null==n&&(n=nn(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return Qn({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),Ln(e,n),n.slice(0,n.l)}(a,o["!outline"])),sn(i,148,Vs(u)),Xs(i,0,n.Workbook),Ys(i,o),function(e,t,n,r){var i,s=yn(t["!ref"]||"A1"),o="",a=[];sn(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){o=hn(u),Us(e,t,s,u);var h=!1;if(u<=s.e.r)for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(a[d]=fn(d)),i=a[d]+o;var f=l?(t[u]||[])[d]:t[i];h=!!f&&Ks(e,f,u,d,r,t,h)}}sn(e,146)}(i,o,0,t),Js(i,o),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],s="string"===typeof i.ref?i.ref:vn(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=gn(s);a.s.r==a.e.r&&(a.e.r=gn(t["!ref"]).e.r,s=vn(a));for(var l=0;l<o.length;++l){var c=o[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),sn(e,161,Kn(yn(s))),sn(e,162)}}(i,o,n,e),Gs(i,o),$s(i,o,r),o["!margins"]&&sn(i,476,(l=o["!margins"],null==c&&(c=nn(48)),Ps(l),Hs.forEach((function(e){Yn(l[e],c)})),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||Qs(i,o),function(e,t,n,r){if(t["!comments"].length>0){var i=ur(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",ar.VML);sn(e,551,Vn("rId"+i)),t["!legacy"]=i}}(i,o,e,r),sn(i,130),i.end()}var eo=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var to="][*?/\\".split("");function no(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return to.forEach((function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})),n}function ro(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=i,r=!!e.vbaraw,t.forEach((function(e,i){no(e);for(var s=0;s<i;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(r){var o=n&&n[i]&&n[i].CodeName||e;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}}));for(var s=0;s<e.SheetNames.length;++s)Ds(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function io(e){var t=[Qe];t[t.length]=mt("workbook",null,{xmlns:yt[0],"xmlns:r":vt.r});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(eo.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=mt("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:et(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=mt("sheet",null,o)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=mt("definedName",et(e.Ref),n))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function so(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,i=t.Workbook.Sheets,s=0,o=-1,a=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&-1==o?o=s:1==i[s].Hidden&&-1==a&&(a=s);if(!(a>o))sn(e,135),sn(e,158,(n=o,r||(r=nn(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),sn(e,136)}}function oo(e,t){var n=rn();return sn(n,131),sn(n,128,function(e,t){t||(t=nn(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return Cn("SheetJS",t),Cn(r.version,t),Cn(r.version,t),Cn("7262",t),t.length>t.l?t.slice(0,t.l):t}()),sn(n,153,function(e,t){t||(t=nn(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),Ln(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),so(n,e),function(e,t){sn(e,143);for(var n=0;n!=t.SheetNames.length;++n){sn(e,156,(r={Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]},(i=void 0)||(i=nn(127)),i.write_shift(4,r.Hidden),i.write_shift(4,r.iTabID),Vn(r.strRelID,i),Cn(r.name.slice(0,31),i),i.length>i.l?i.slice(0,i.l):i))}var r,i;sn(e,144)}(n,e),sn(n,132),n.end()}function ao(e,t,n,r,i){return(".bin"===t.slice(-4)?Zs:js)(e,n,r,i)}function lo(e,t,n){return(".bin"===t.slice(-4)?zi:Ui)(e,n)}function co(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return ke(br).map((function(e){for(var t=0;t<fr.length;++t)if(fr[t][1]==e)return fr[t];for(t=0;t<gr.length;++t)if(gr[t][1]==e)return gr[t];throw e})).forEach((function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(ft(br[r[1]]||r[1],i))}})),mt("DocumentProperties",n.join(""),{xmlns:_t.o})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&ke(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<fr.length;++r)if(t==fr[r][1])return;for(r=0;r<gr.length;++r)if(t==gr[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],o="string";"number"==typeof s?(o="float",s=String(s)):!0===s||!1===s?(o="boolean",s=s?"1":"0"):s=String(s),i.push(mt(tt(t),s,{"dt:dt":o}))}})),t&&ke(t).forEach((function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),i.push(mt(tt(n),r,{"dt:dt":s}))}})),"<"+r+' xmlns="'+_t.o+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function uo(e){return mt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Ki(e.Ref,{r:0,c:0})})}function ho(e,t,n,r,i,s,o){if(!e||void 0==e.v&&void 0==e.f)return"";var a={};if(e.f&&(a["ss:Formula"]="="+et(Ki(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=pn(e.F.slice(t.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(a["ss:HRef"]=et(e.l.Target),e.l.Tooltip&&(a["x:HRefScreenTip"]=et(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==o.c&&c[u].s.r==o.r&&(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",d="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",d=String(e.v);break;case"b":h="Boolean",d=e.v?"1":"0";break;case"e":h="Error",d=rr[e.v];break;case"d":h="DateTime",d=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||j[14]);break;case"s":h="String",d=((e.v||"")+"").replace(Je,(function(e){return Xe[e]})).replace(nt,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var f=Os(r.cellXfs,e,r);a["ss:StyleID"]="s"+(21+f),a["ss:Index"]=o.c+1;var p=null!=e.v?d:"",m="z"==e.t?"":'<Data ss:Type="'+h+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map((function(e){var t=mt("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return mt("Comment",t,{"ss:Author":e.a})})).join("")),mt("Cell",m,a)}function fo(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=_i(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function po(e,t,n){var r=[],i=n.SheetNames[e],s=n.Sheets[i],o=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(uo(a)))}return s.join("")}(s,0,e,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?function(e,t){if(!e["!ref"])return"";var n=yn(e["!ref"]),r=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach((function(e,t){gi(e);var n=!!e.width,r=Rs(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=fi(r.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(mt("Column",null,i))}));for(var o=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){for(var l=[fo(a,(e["!rows"]||[])[a])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c)&&!(r[i].s.r>a)&&!(r[i].e.c<c)&&!(r[i].e.r<a)){r[i].s.c==c&&r[i].s.r==a||(u=!0);break}if(!u){var h={r:a,c:c},d=mn(h),f=o?(e[a]||[])[c]:e[d];l.push(ho(f,d,e,t,0,0,h))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(mt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(mt("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(mt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(mt("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(ft("ProtectContents","True")),e["!protect"].objects&&i.push(ft("ProtectObjects","True")),e["!protect"].scenarios&&i.push(ft("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(ft("EnableSelection","UnlockedCells")):i.push(ft("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")}))),0==i.length?"":mt("WorksheetOptions",i.join(""),{xmlns:_t.x})}(s,0,e,n)),r.join("")}function mo(e,t){t||(t={}),e.SSF||(e.SSF=ze(j)),e.SSF&&(be(),_e(e.SSF),t.revssf=Ne(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Os(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(co(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(mt("Worksheet",po(r,t,e),{"ss:Name":et(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var r=[];r.push(mt("NumberFormat",null,{"ss:Format":et(j[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(mt("Style",r.join(""),i))})),mt("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(uo(i)))}return mt("Names",n.join(""))}(e),Qe+mt("Workbook",n.join(""),{xmlns:_t.ss,"xmlns:o":_t.o,"xmlns:x":_t.x,"xmlns:ss":_t.ss,"xmlns:dt":_t.dt,"xmlns:html":_t.html})}var go={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function vo(e,t){var n=t||{},r=Te.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Te.utils.cfb_add(r,i,Io(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],s=[],o=0,a=Ie(Zn,"n"),l=Ie(er,"n");if(e.Props)for(n=ke(e.Props),o=0;o<n.length;++o)(Object.prototype.hasOwnProperty.call(a,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:s).push([n[o],e.Props[n[o]]]);if(e.Custprops)for(n=ke(e.Custprops),o=0;o<n.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},n[o])||(Object.prototype.hasOwnProperty.call(a,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?i:s).push([n[o],e.Custprops[n[o]]]);var c=[];for(o=0;o<s.length;++o)xr.indexOf(s[o][0])>-1||vr.indexOf(s[o][0])>-1||null!=s[o][1]&&c.push(s[o]);i.length&&Te.utils.cfb_add(t,"/\x05SummaryInformation",Er(i,go.SI,l,er)),(r.length||c.length)&&Te.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Er(r,go.DSI,a,Zn,c.length?c:null,go.UDI))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&Te.utils.cfb_add(e,i,t.FileIndex[r].content)}}))}(r,Te.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var yo={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=i/20),n}},1:{f:function(e){return[Rn(e)]}},2:{f:function(e){return[Rn(e),zn(e),"n"]}},3:{f:function(e){return[Rn(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Rn(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Rn(e),Gn(e),"n"]}},6:{f:function(e){return[Rn(e),En(e),"str"]}},7:{f:function(e){return[Rn(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=Rn(e);i.r=n["!row"];var s=[i,En(e),"str"];if(n.cellFormula){e.l+=2;var o=Ts(e,r-e.l,n);s[3]=_s(o,0,i,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,i=Rn(e);i.r=n["!row"];var s=[i,Gn(e),"n"];if(n.cellFormula){e.l+=2;var o=Ts(e,r-e.l,n);s[3]=_s(o,0,i,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,i=Rn(e);i.r=n["!row"];var s=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var o=Ts(e,r-e.l,n);s[3]=_s(o,0,i,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,i=Rn(e);i.r=n["!row"];var s=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var o=Ts(e,r-e.l,n);s[3]=_s(o,0,i,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[On(e)]}},13:{f:function(e){return[On(e),zn(e),"n"]}},14:{f:function(e){return[On(e),e.read_shift(1),"e"]}},15:{f:function(e){return[On(e),e.read_shift(1),"b"]}},16:{f:zs},17:{f:function(e){return[On(e),En(e),"str"]}},18:{f:function(e){return[On(e),e.read_shift(4),"s"]}},19:{f:In},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=Un(e),o=Ss(e,0,n),a=Fn(e);e.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var o=e.read_shift(1);o>0&&(r.family=o);var a=e.read_shift(1);switch(a>0&&(r.charset=a),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),a=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=nr[r];l&&(t.rgb=ui(l));break;case 2:t.rgb=ui([s,o,a]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=En(e),r}},44:{f:function(e,t){return[e.read_shift(2),En(e)]}},45:{f:Ei},46:{f:Ai},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$r},62:{f:function(e){return[Rn(e),In(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=mn(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:tn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=Mn(e,t-19),n}},148:{f:Bs,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?En(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=Bn(e,t-8),n.name=En(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Hn},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Ws},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:En(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Bn},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Gr},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=qn(e),s=e.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=xs(e,r-e.l,n);o[1]=a}else e.l=r;return o}},427:{f:function(e,t,n){var r=e.l+t,i=[Hn(e,16)];if(n.cellFormula){var s=Es(e,r-e.l,n);i[1]=s,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Hs.forEach((function(n){t[n]=Gn(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=Hn(e,16),i=Fn(e),s=En(e),o=En(e),a=En(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Bn},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Vi},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=Hn(e,16);return t.rfx=n.s,t.ref=mn(n.s),e.l+=16,t}},636:{T:-1},637:{f:An},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:En(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function _o(e,t,n,r){var i=t;if(!isNaN(i)){var s=r||(n||[]).length||0,o=e.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&Bt(n)&&e.push(n)}}function bo(e,t,n){return e||(e=nn(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function wo(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?Pe(Be(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?_o(e,2,function(e,t,n){var r=nn(9);return bo(r,e,t),r.write_shift(2,n),r}(n,r,i)):_o(e,3,function(e,t,n){var r=nn(15);return bo(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void _o(e,5,function(e,t,n,r){var i=nn(9);return bo(i,e,t),Nr(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void _o(e,4,function(e,t,n){var r=nn(8+2*n.length);return bo(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}_o(e,1,bo(null,n,r))}function xo(e,t){var n=t||{};null!=m&&null==n.dense&&(n.dense=m);for(var r=rn(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(i=s);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return _o(r,4==n.biff?1033:3==n.biff?521:9,Wr(0,16,n)),function(e,t,n,r){var i,s=Array.isArray(t),o=yn(t["!ref"]||"A1"),a="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=vn(o)}for(var c=o.s.r;c<=o.e.r;++c){a=hn(c);for(var u=o.s.c;u<=o.e.c;++u){c===o.s.r&&(l[u]=fn(u)),i=l[u]+a;var h=s?(t[c]||[])[u]:t[i];h&&wo(e,h,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),_o(r,10),r.end()}function To(e,t,n){_o(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=nn(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function So(e,t){if(t){var n=0;t.forEach((function(t,r){++n<=256&&t&&_o(e,125,function(e,t){var n=nn(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(Rs(r,t),r))}))}}function Eo(e,t,n,r,i){var s=16+Os(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)_o(e,6,bs(t,n,r,0,s));else switch(t.t){case"d":case"n":_o(e,515,function(e,t,n,r){var i=nn(14);return Ur(e,t,r,i),Yn(n,i),i}(n,r,"d"==t.t?Pe(Be(t.v)):t.v,s));break;case"b":case"e":_o(e,517,function(e,t,n,r,i,s){var o=nn(8);return Ur(e,t,r,o),Nr(n,s,o),o}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(i.bookSST)_o(e,253,function(e,t,n,r){var i=nn(10);return Ur(e,t,r,i),i.write_shift(4,n),i}(n,r,Ns(i.Strings,t.v,i.revStrings),s));else _o(e,516,function(e,t,n,r,i){var s=!i||8==i.biff,o=nn(+s+8+(1+s)*n.length);return Ur(e,t,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}(n,r,(t.v||"").slice(0,255),s,i));break;default:_o(e,513,Ur(n,r,s))}else _o(e,513,Ur(n,r,s))}function Co(e,t,n){var r,i=rn(),s=n.SheetNames[e],o=n.Sheets[s]||{},a=(n||{}).Workbook||{},l=(a.Sheets||[])[e]||{},c=Array.isArray(o),u=8==t.biff,h="",d=[],f=yn(o["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}_o(i,2057,Wr(0,16,t)),_o(i,13,Ar(1)),_o(i,12,Ar(100)),_o(i,15,kr(!0)),_o(i,17,kr(!1)),_o(i,16,Yn(.001)),_o(i,95,kr(!0)),_o(i,42,kr(!1)),_o(i,43,kr(!1)),_o(i,130,Ar(1)),_o(i,128,function(e){var t=nn(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),_o(i,131,kr(!1)),_o(i,132,kr(!1)),u&&So(i,o["!cols"]),_o(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=nn(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(o["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){h=hn(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(d[g]=fn(g)),r=d[g]+h;var v=c?(o[m]||[])[g]:o[r];v&&(Eo(i,v,m,g,t),u&&v.l&&o["!links"].push([r,v.l]))}}var y=l.CodeName||l.name||s;return u&&_o(i,574,function(e){var t=nn(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((a.Views||[])[0])),u&&(o["!merges"]||[]).length&&_o(i,229,function(e){var t=nn(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)zr(e[n],t);return t}(o["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];_o(e,440,Yr(r)),r[1].Tooltip&&_o(e,2048,Qr(r))}delete t["!links"]}(i,o),_o(i,442,Lr(y)),u&&function(e,t){var n=nn(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),_o(e,2151,n),(n=nn(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),zr(yn(t["!ref"]||"A1"),n),n.write_shift(4,4),_o(e,2152,n)}(i,o),_o(i,10),i.end()}function ko(e,t,n){var r=rn(),i=(e||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=8==n.biff,l=5==n.biff;(_o(r,2057,Wr(0,5,n)),"xla"==n.bookType&&_o(r,135),_o(r,225,a?Ar(1200):null),_o(r,193,function(e,t){t||(t=nn(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&_o(r,191),l&&_o(r,192),_o(r,226),_o(r,92,function(e,t){var n=!t||8==t.biff,r=nn(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),_o(r,66,Ar(a?1200:1252)),a&&_o(r,353,Ar(0)),a&&_o(r,448),_o(r,317,function(e){for(var t=nn(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),a&&e.vbaraw&&_o(r,211),a&&e.vbaraw)&&_o(r,442,Lr(o.CodeName||"ThisWorkbook"));_o(r,156,Ar(17)),_o(r,25,kr(!1)),_o(r,18,kr(!1)),_o(r,19,Ar(0)),a&&_o(r,431,kr(!1)),a&&_o(r,444,Ar(0)),_o(r,61,function(){var e=nn(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),_o(r,64,kr(!1)),_o(r,141,Ar(0)),_o(r,34,kr("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&it(e.Workbook.WBProps.date1904)?"true":"false"}(e))),_o(r,14,kr(!0)),a&&_o(r,439,kr(!1)),_o(r,218,Ar(0)),To(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&_o(e,1054,Hr(i,t[i],n))}))}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)_o(e,224,Kr({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(n){_o(e,224,Kr(n,0,t))}))}(r,n),a&&_o(r,352,kr(!1));var c,u=r.end(),h=rn();a&&_o(h,140,(c||(c=nn(4)),c.write_shift(2,1),c.write_shift(2,1),c)),a&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return _o(e,t,n,i);var s=t;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=e.next(4);for(u.write_shift(2,s),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(h,252,function(e){var t=nn(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=Pr(e[r]);var i=C([t].concat(n));return i.parts=[t.length].concat(n.map((function(e){return e.length}))),i}(n.Strings)),_o(h,10);var d=h.end(),f=rn(),p=0,m=0;for(m=0;m<e.SheetNames.length;++m)p+=(a?12:11)+(a?2:1)*e.SheetNames[m].length;var g=u.length+p+d.length;for(m=0;m<e.SheetNames.length;++m){_o(f,133,qr({pos:g,hs:(s[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},n)),g+=t[m].length}var v=f.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var y=[];return u.length&&y.push(u),v.length&&y.push(v),d.length&&y.push(d),C(y)}function Io(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])gn(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=ze(j)),e&&e.SSF&&(be(),_e(e.SSF),n.revssf=Ne(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,ia(n),n.cellXfs=[],Os(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=Co(i,n,e);return r.unshift(ko(e,r,n)),C(r)}(e,t);case 4:case 3:case 2:return xo(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Ao(e,t,n,r){for(var i=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=mn({r:n,c:o}),h=r.dense?(e[n]||[])[o]:e[u],d=h&&null!=h.v&&(h.h||rt(h.w||(bn(h),h.w)||""))||"",f={};a>1&&(f.rowspan=a),l>1&&(f.colspan=l),r.editable?d='<span contenteditable="true">'+d+"</span>":h&&(f["data-t"]=h&&h.t||"z",null!=h.v&&(f["data-v"]=h.v),null!=h.z&&(f["data-z"]=h.z),h.l&&"#"!=(h.l.Target||"#").charAt(0)&&(d='<a href="'+h.l.Target+'">'+d+"</a>")),f.id=(r.id||"sjs")+"-"+u,s.push(mt("td",d,f))}}return"<tr>"+s.join("")+"</tr>"}var No='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ro="</body></html>";function Po(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function Oo(e,t){var n=t||{},r=null!=n.header?n.header:No,i=null!=n.footer?n.footer:Ro,s=[r],o=gn(e["!ref"]);n.dense=Array.isArray(e),s.push(Po(0,0,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(Ao(e,o,a,n));return s.push("</table>"+i),s.join("")}function Do(e,t,n){var r=n||{};null!=m&&(r.dense=m);var i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var o="string"==typeof r.origin?pn(r.origin):r.origin;i=o.r,s=o.c}var a=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=gn(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var h=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,g=0,v=0,y=0,_=0,b=0;for(e["!cols"]||(e["!cols"]=[]);p<a.length&&g<l;++p){var w=a[p];if(Lo(w)){if(r.display)continue;f[g]={hidden:!0}}var x=w.children;for(v=y=0;v<x.length;++v){var T=x[v];if(!r.display||!Lo(T)){var S=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):ht(T.innerHTML),E=T.getAttribute("data-z")||T.getAttribute("z");for(d=0;d<h.length;++d){var C=h[d];C.s.c==y+s&&C.s.r<g+i&&g+i<=C.e.r&&(y=C.e.c+1-s,d=-1)}b=+T.getAttribute("colspan")||1,((_=+T.getAttribute("rowspan")||1)>1||b>1)&&h.push({s:{r:g+i,c:y+s},e:{r:g+i+(_||1)-1,c:y+s+(b||1)-1}});var k={t:"s",v:S},I=T.getAttribute("data-t")||T.getAttribute("t")||"";null!=S&&(0==S.length?k.t=I||"z":r.raw||0==S.trim().length||"s"==I||("TRUE"===S?k={t:"b",v:!0}:"FALSE"===S?k={t:"b",v:!1}:isNaN(qe(S))?isNaN(Ke(S).getDate())||(k={t:"d",v:Be(S)},r.cellDates||(k={t:"n",v:Pe(k.v)}),k.z=r.dateNF||j[14]):k={t:"n",v:qe(S)})),void 0===k.z&&null!=E&&(k.z=E);var A="",N=T.getElementsByTagName("A");if(N&&N.length)for(var R=0;R<N.length&&(!N[R].hasAttribute("href")||"#"==(A=N[R].getAttribute("href")).charAt(0));++R);A&&"#"!=A.charAt(0)&&(k.l={Target:A}),r.dense?(e[g+i]||(e[g+i]=[]),e[g+i][y+s]=k):e[mn({c:y+s,r:g+i})]=k,c.e.c<y+s&&(c.e.c=y+s),y+=b}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,g-1+i),e["!ref"]=vn(c),g>=l&&(e["!fullref"]=vn((c.e.r=a.length-p+g-1+i,c))),e}function Mo(e,t){return Do((t||{}).dense?[]:{},e,t)}function Lo(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var Fo=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+pt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Qe+t}}(),jo=function(){var e="          <table:table-cell />\n",t=function(t,n,r){var i=[];i.push('      <table:table table:name="'+et(n.SheetNames[r])+'" table:style-name="ta1">\n');var s=0,o=0,a=gn(t["!ref"]||"A1"),l=t["!merges"]||[],c=0,u=Array.isArray(t);if(t["!cols"])for(o=0;o<=a.e.c;++o)i.push("        <table:table-column"+(t["!cols"][o]?' table:style-name="co'+t["!cols"][o].ods+'"':"")+"></table:table-column>\n");var h="",d=t["!rows"]||[];for(s=0;s<a.s.r;++s)h=d[s]?' table:style-name="ro'+d[s].ods+'"':"",i.push("        <table:table-row"+h+"></table:table-row>\n");for(;s<=a.e.r;++s){for(h=d[s]?' table:style-name="ro'+d[s].ods+'"':"",i.push("        <table:table-row"+h+">\n"),o=0;o<a.s.c;++o)i.push(e);for(;o<=a.e.c;++o){var f=!1,p={},m="";for(c=0;c!=l.length;++c)if(!(l[c].s.c>o)&&!(l[c].s.r>s)&&!(l[c].e.c<o)&&!(l[c].e.r<s)){l[c].s.c==o&&l[c].s.r==s||(f=!0),p["table:number-columns-spanned"]=l[c].e.c-l[c].s.c+1,p["table:number-rows-spanned"]=l[c].e.r-l[c].s.r+1;break}if(f)i.push("          <table:covered-table-cell/>\n");else{var g=mn({r:s,c:o}),v=u?(t[s]||[])[o]:t[g];if(v&&v.f&&(p["table:formula"]=et(("of:="+v.f.replace(Hi,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")),v.F&&v.F.slice(0,g.length)==g)){var y=gn(v.F);p["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,p["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(v){switch(v.t){case"b":m=v.v?"TRUE":"FALSE",p["office:value-type"]="boolean",p["office:boolean-value"]=v.v?"true":"false";break;case"n":m=v.w||String(v.v||0),p["office:value-type"]="float",p["office:value"]=v.v||0;break;case"s":case"str":m=null==v.v?"":v.v,p["office:value-type"]="string";break;case"d":m=v.w||Be(v.v).toISOString(),p["office:value-type"]="date",p["office:date-value"]=Be(v.v).toISOString(),p["table:style-name"]="ce1";break;default:i.push(e);continue}var _=et(m).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(v.l&&v.l.Target){var b=v.l.Target;"#"==(b="#"==b.charAt(0)?"#"+b.slice(1).replace(/\./,"!"):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),_=mt("text:a",_,{"xlink:href":b.replace(/&/g,"&amp;")})}i.push("          "+mt("table:table-cell",mt("text:p",_,{}),p)+"\n")}else i.push(e)}}i.push("        </table:table-row>\n")}return i.push("      </table:table>\n"),i.join("")};return function(e,n){var r=[Qe],i=pt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=pt({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==n.bookType?(r.push("<office:document"+i+s+">\n"),r.push(dr().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;gi(i),i.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}}));var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)r.push(t(e.Sheets[e.SheetNames[o]],e,o));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==n.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function Uo(e,t){if("fods"==t.bookType)return jo(e,t);var n=Ye(),r="",i=[],s=[];return Ge(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Ge(n,r="content.xml",jo(e,t)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),Ge(n,r="styles.xml",Fo(e,t)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),Ge(n,r="meta.xml",Qe+dr()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),Ge(n,r="manifest.rdf",function(e){var t,n,r=[Qe];r.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var i=0;i!=e.length;++i)r.push(hr(e[i][0],e[i][1])),r.push((t="",n=e[i][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+'"/>\n',"  </rdf:Description>\n"].join("")));return r.push(hr("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}(s)),i.push([r,"application/rdf+xml"]),Ge(n,r="META-INF/manifest.xml",function(e){var t=[Qe];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function Bo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Vo(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):T(ut(e))}function zo(e){var t=e.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function Wo(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function qo(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function Ho(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function Ko(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],s=Wo(e,n),o=7&s,a=0;if(0==(s=Math.floor(s/8)))break;switch(o){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:a=4,r=e.slice(n[0],n[0]+a),n[0]+=a;break;case 1:a=8,r=e.slice(n[0],n[0]+a),n[0]+=a;break;case 2:a=Wo(e,n),r=e.slice(n[0],n[0]+a),n[0]+=a;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(s," at offset ").concat(i))}var c={data:r,type:o};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function Go(e){var t=[];return e.forEach((function(e,n){e.forEach((function(e){e.data&&(t.push(qo(8*n+e.type)),2==e.type&&t.push(qo(e.data.length)),t.push(e.data))}))})),zo(t)}function Yo(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=Wo(e,r),s=Ko(e.slice(r[0],r[0]+i));r[0]+=i;var o={id:Ho(s[1][0].data),messages:[]};s[2].forEach((function(t){var n=Ko(t.data),i=Ho(n[3][0].data);o.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i})),(null==(t=s[3])?void 0:t[0])&&(o.merge=Ho(s[3][0].data)>>>0>0),n.push(o)}return n}function Qo(e){var t=[];return e.forEach((function(e){var n=[];n[1]=[{data:qo(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:qo(+!!e.merge),type:0}]);var r=[];e.messages.forEach((function(e){r.push(e.data),e.meta[3]=[{type:0,data:qo(e.data.length)}],n[2].push({data:Go(e.meta),type:2})}));var i=Go(n);t.push(qo(i.length)),t.push(i),r.forEach((function(e){return t.push(e)}))})),zo(t)}function $o(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=Wo(t,n),i=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var o=0,a=0;if(1==s?(a=4+(t[n[0]]>>2&7),o=(224&t[n[0]++])<<3,o|=t[n[0]++]):(a=1+(t[n[0]++]>>2),2==s?(o=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(o=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[zo(i)],0==o)throw new Error("Invalid offset 0");if(o>i[0].length)throw new Error("Invalid offset beyond length");if(a>=o)for(i.push(i[0].slice(-o)),a-=o;a>=i[i.length-1].length;)i.push(i[i.length-1]),a-=i[i.length-1].length;i.push(i[0].slice(-o,-o+a))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=zo(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Xo(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push($o(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return zo(t)}function Jo(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var s=qo(r),o=s.length;t.push(s),r<=60?(o++,t.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),o+=r,i[0]=0,i[1]=255&o,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return zo(t)}function Zo(e,t){var n=new Uint8Array(32),r=Bo(n),i=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,i)}function ea(e,t){var n=new Uint8Array(32),r=Bo(n),i=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,i)}function ta(e){return Wo(Ko(e)[1][0].data)}function na(e,t,n){var r,i,s,o;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(s=e[8])?void 0:s[0])?void 0:o.data)&&Ho(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var a=0,l=Bo(e[7][0].data),c=0,u=[],h=Bo(e[4][0].data),d=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(l.setUint16(2*p,c,!0),h.setUint16(2*p,d,!0),typeof t[p]){case"string":m=Zo({t:"s",v:t[p]},n),g=ea({t:"s",v:t[p]},n);break;case"number":m=Zo({t:"n",v:t[p]},n),g=ea({t:"n",v:t[p]},n);break;case"boolean":m=Zo({t:"b",v:t[p]},n),g=ea({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(m),c+=m.length,f.push(g),d+=g.length,++a}else l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535);for(e[2][0].data=qo(a);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535,!0);return e[6][0].data=zo(u),e[3][0].data=zo(f),a}function ra(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function ia(e){ra([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function sa(e,t){return"ods"==t.bookType?Uo(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=gn(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(vn(r)));var s=ga(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&o.push(e)}))}));var a={},l=[],c=Te.read(t.numbers,{type:"base64"});c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&Yo(Xo(t.content)).forEach((function(e){l.push(e.id),a[e.id]={deps:[],location:n,type:Ho(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var u=l.filter((function(e){return e>1})).map((function(e){return[e,qo(e)]}));c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&Yo(Xo(t.content)).forEach((function(e){e.messages.forEach((function(t){u.forEach((function(t){e.messages.some((function(e){return 11006!=Ho(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])}))&&a[t[0]].deps.push(e.id)}))}))}))}));for(var h,d=Te.find(c,a[1].location),f=Yo(Xo(d.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(h=m)}var g=ta(Ko(h.messages[0].data)[1][0].data);for(f=Yo(Xo((d=Te.find(c,a[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=ta(Ko(h.messages[0].data)[2][0].data),f=Yo(Xo((d=Te.find(c,a[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=ta(Ko(h.messages[0].data)[2][0].data),f=Yo(Xo((d=Te.find(c,a[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);var v=Ko(h.messages[0].data);v[6][0].data=qo(r.e.r+1),v[7][0].data=qo(r.e.c+1);for(var y=ta(v[46][0].data),_=Te.find(c,a[y].location),b=Yo(Xo(_.content)),w=0;w<b.length&&b[w].id!=y;++w);if(b[w].id!=y)throw"Bad ColumnRowUIDMapArchive";var x=Ko(b[w].messages[0].data);x[1]=[],x[2]=[],x[3]=[];for(var T=0;T<=r.e.c;++T){var S=[];S[1]=S[2]=[{type:0,data:qo(T+420690)}],x[1].push({type:2,data:Go(S)}),x[2].push({type:0,data:qo(T)}),x[3].push({type:0,data:qo(T)})}x[4]=[],x[5]=[],x[6]=[];for(var E=0;E<=r.e.r;++E)(S=[])[1]=S[2]=[{type:0,data:qo(E+726270)}],x[4].push({type:2,data:Go(S)}),x[5].push({type:0,data:qo(E)}),x[6].push({type:0,data:qo(E)});b[w].messages[0].data=Go(x),_.content=Jo(Qo(b)),_.size=_.content.length,delete v[46];var C=Ko(v[4][0].data);C[7][0].data=qo(r.e.r+1);var k=ta(Ko(C[1][0].data)[2][0].data);if((b=Yo(Xo((_=Te.find(c,a[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";var I=Ko(b[0].messages[0].data);for(E=0;E<s.length;++E){var A=Ko(I[2][0].data);A[1][0].data=qo(E),A[4][0].data=qo(s[E].length),I[2][E]={type:I[2][0].type,data:Go(A)}}b[0].messages[0].data=Go(I),_.content=Jo(Qo(b)),_.size=_.content.length;var N=ta(C[2][0].data);if((b=Yo(Xo((_=Te.find(c,a[N].location)).content)))[0].id!=N)throw"Bad HeaderStorageBucket";for(I=Ko(b[0].messages[0].data),T=0;T<=r.e.c;++T)(A=Ko(I[2][0].data))[1][0].data=qo(T),A[4][0].data=qo(r.e.r+1),I[2][T]={type:I[2][0].type,data:Go(A)};b[0].messages[0].data=Go(I),_.content=Jo(Qo(b)),_.size=_.content.length;var R=ta(C[4][0].data);!function(){for(var e,t=Te.find(c,a[R].location),n=Yo(Xo(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==R&&(e=i)}var s=Ko(e.messages[0].data);s[3]=[];var l=[];o.forEach((function(e,t){l[1]=[{type:0,data:qo(t)}],l[2]=[{type:0,data:qo(1)}],l[3]=[{type:2,data:Vo(e)}],s[3].push({type:2,data:Go(l)})})),e.messages[0].data=Go(s);var u=Jo(Qo(n));t.content=u,t.size=t.content.length}();var P=Ko(C[3][0].data),O=P[1][0];delete P[2];var D=Ko(O.data),M=ta(D[2][0].data);!function(){for(var e,t=Te.find(c,a[M].location),n=Yo(Xo(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==M&&(e=l)}var u=Ko(e.messages[0].data);delete u[6],delete P[7];var h=new Uint8Array(u[5][0].data);u[5]=[];for(var d=0,f=0;f<=r.e.r;++f){var p=Ko(h);d+=na(p,s[f],o),p[1][0].data=qo(f),u[5].push({data:Go(p),type:2})}u[1]=[{type:0,data:qo(r.e.c+1)}],u[2]=[{type:0,data:qo(r.e.r+1)}],u[3]=[{type:0,data:qo(d)}],u[4]=[{type:0,data:qo(r.e.r+1)}],e.messages[0].data=Go(u);var m=Jo(Qo(n));t.content=m,t.size=t.content.length}(),O.data=Go(D),C[3][0].data=Go(P),v[4][0].data=Go(C),h.messages[0].data=Go(v);var L=Jo(Qo(f));return d.content=L,d.size=d.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){Fi=1024,e&&!e.SSF&&(e.SSF=ze(j));e&&e.SSF&&(be(),_e(e.SSF),t.revssf=Ne(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,As?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=Wi.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};ia(t=t||{});var s=Ye(),o="",a=0;t.cellXfs=[],Os(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(Ge(s,o="docProps/core.xml",mr(e.Props,t)),i.coreprops.push(o),ur(t.rels,2,o,ar.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Ge(s,o,yr(e.Props)),i.extprops.push(o),ur(t.rels,3,o,ar.EXT_PROPS),e.Custprops!==e.Props&&ke(e.Custprops||{}).length>0&&(Ge(s,o="docProps/custom.xml",_r(e.Custprops)),i.custprops.push(o),ur(t.rels,4,o,ar.CUST_PROPS));for(a=1;a<=e.SheetNames.length;++a){var u={"!id":{}},h=e.Sheets[e.SheetNames[a-1]];(h||{})["!type"];if(Ge(s,o="xl/worksheets/sheet"+a+"."+n,ao(a-1,o,t,e,u)),i.sheets.push(o),ur(t.wbrels,-1,"worksheets/sheet"+a+"."+n,ar.WS[0]),h){var d=h["!comments"],f=!1,p="";d&&d.length>0&&(Ge(s,p="xl/comments"+a+"."+n,lo(d,p,t)),i.comments.push(p),ur(u,-1,"../comments"+a+"."+n,ar.CMNT),f=!0),h["!legacy"]&&f&&Ge(s,"xl/drawings/vmlDrawing"+a+".vml",ji(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Ge(s,lr(o),cr(u))}null!=t.Strings&&t.Strings.length>0&&(Ge(s,o="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?oi:ii)(e,n)}(t.Strings,o,t)),i.strs.push(o),ur(t.wbrels,-1,"sharedStrings."+n,ar.SST));Ge(s,o="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?oo:io)(e,n)}(e,o,t)),i.workbooks.push(o),ur(t.rels,1,o,ar.WB),Ge(s,o="xl/theme/theme1.xml",Di(e.Themes,t)),i.themes.push(o),ur(t.wbrels,-1,"theme/theme1.xml",ar.THEME),Ge(s,o="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?Oi:bi)(e,n)}(e,o,t)),i.styles.push(o),ur(t.wbrels,-1,"styles."+n,ar.STY),e.vbaraw&&r&&(Ge(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),ur(t.wbrels,-1,"vbaProject.bin",ar.VBA));return Ge(s,o="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?Mi:Li)()}(o)),i.metadata.push(o),ur(t.wbrels,-1,"metadata."+n,ar.XLMETA),Ge(s,"[Content_Types].xml",or(i,t)),Ge(s,"_rels/.rels",cr(t.rels)),Ge(s,"xl/_rels/workbook."+n+".rels",cr(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):oa(e,t)}function oa(e,t){Fi=1024,e&&!e.SSF&&(e.SSF=ze(j)),e&&e.SSF&&(be(),_e(e.SSF),t.revssf=Ne(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,As?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=Wi.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};ia(t=t||{});var s=Ye(),o="",a=0;if(t.cellXfs=[],Os(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Ge(s,o="docProps/core.xml",mr(e.Props,t)),i.coreprops.push(o),ur(t.rels,2,o,ar.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Ge(s,o,yr(e.Props)),i.extprops.push(o),ur(t.rels,3,o,ar.EXT_PROPS),e.Custprops!==e.Props&&ke(e.Custprops||{}).length>0&&(Ge(s,o="docProps/custom.xml",_r(e.Custprops)),i.custprops.push(o),ur(t.rels,4,o,ar.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,a=1;a<=e.SheetNames.length;++a){var h={"!id":{}},d=e.Sheets[e.SheetNames[a-1]];(d||{})["!type"];if(Ge(s,o="xl/worksheets/sheet"+a+"."+n,js(a-1,t,e,h)),i.sheets.push(o),ur(t.wbrels,-1,"worksheets/sheet"+a+"."+n,ar.WS[0]),d){var f=d["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach((function(e){e[1].forEach((function(e){1==e.T&&(g=!0)}))})),g&&(Ge(s,m="xl/threadedComments/threadedComment"+a+"."+n,Bi(f,u,t)),i.threadedcomments.push(m),ur(h,-1,"../threadedComments/threadedComment"+a+"."+n,ar.TCMNT)),Ge(s,m="xl/comments"+a+"."+n,Ui(f)),i.comments.push(m),ur(h,-1,"../comments"+a+"."+n,ar.CMNT),p=!0}d["!legacy"]&&p&&Ge(s,"xl/drawings/vmlDrawing"+a+".vml",ji(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&Ge(s,lr(o),cr(h))}return null!=t.Strings&&t.Strings.length>0&&(Ge(s,o="xl/sharedStrings."+n,ii(t.Strings,t)),i.strs.push(o),ur(t.wbrels,-1,"sharedStrings."+n,ar.SST)),Ge(s,o="xl/workbook."+n,io(e)),i.workbooks.push(o),ur(t.rels,1,o,ar.WB),Ge(s,o="xl/theme/theme1.xml",Di(e.Themes,t)),i.themes.push(o),ur(t.wbrels,-1,"theme/theme1.xml",ar.THEME),Ge(s,o="xl/styles."+n,bi(e,t)),i.styles.push(o),ur(t.wbrels,-1,"styles."+n,ar.STY),e.vbaraw&&r&&(Ge(s,o="xl/vbaProject.bin",e.vbaraw),i.vba.push(o),ur(t.wbrels,-1,"vbaProject.bin",ar.VBA)),Ge(s,o="xl/metadata."+n,Li()),i.metadata.push(o),ur(t.wbrels,-1,"metadata."+n,ar.XLMETA),u.length>1&&(Ge(s,o="xl/persons/person.xml",function(e){var t=[Qe,mt("personList",null,{xmlns:vt.TCMNT,"xmlns:x":yt[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,n){t.push(mt("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(u)),i.people.push(o),ur(t.wbrels,-1,"persons/person.xml",ar.PEOPLE)),Ge(s,"[Content_Types].xml",or(i,t)),Ge(s,"_rels/.rels",cr(t.rels)),Ge(s,"xl/_rels/workbook.xml.rels",cr(t.wbrels)),delete t.revssf,delete t.ssf,s}function aa(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=y(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function la(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Ce(t.file,Te.write(e,{type:_?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Te.write(e,t)}function ca(e,t){var n={},r=_?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?Te.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(S(i))}return t.password&&"undefined"!==typeof encrypt_agile?la(encrypt_agile(i,t.password),t):"file"===t.type?Ce(t.file,i):"string"==t.type?ct(i):i}function ua(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return v(ut(r));case"binary":return ut(r);case"string":return e;case"file":return Ce(t.file,r,"utf8");case"buffer":return _?b(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):ua(r,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function ha(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?v(n):"string"==t.type?ct(n):n;case"file":return Ce(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function da(e,t){u(),ro(e);var n=ze(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=da(e,n);return n.type="array",S(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return ua(mo(e,n),n);case"slk":case"sylk":return ua(Jr.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return ua(Oo(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return v(e);case"binary":case"string":return e;case"file":return Ce(t.file,e,"binary");case"buffer":return _?b(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(ba(e.Sheets[e.SheetNames[i]],n),n);case"csv":return ua(_a(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return ua(Zr.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return ha(Xr.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return ua(ti.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return ua(ci.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return ua(ei.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return ua(Uo(e,n),n);case"wk1":return ha(ni.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return ha(ni.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),ha(Io(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return la(vo(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=ze(t||{});return ca(sa(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function fa(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function pa(e,t,n){var r=n||{};return r.type="file",r.file=t,fa(r),da(e,r)}function ma(e,t,n,r,i,s,o,a){var l=hn(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),h=!0,d=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(g){d.__rowNum__=n}else d.__rowNum__=n;if(!o||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=o?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[f]){if(null==m)if("e"==p.t&&null===m)d[s[f]]=null;else if(void 0!==c)d[s[f]]=c;else{if(!u||null!==m)continue;d[s[f]]=null}else d[s[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==a.rawNumbers)?m:bn(p,m,a);null!=m&&(h=!1)}}else{if(void 0===c)continue;null!=s[f]&&(d[s[f]]=c)}}return{row:d,isempty:h}}function ga(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=yn(u);break;case"number":(l=yn(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var h=hn(l.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),v=l.s.r,y=0,_={};g&&!e[v]&&(e[v]=[]);var b=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(b[y]||{}).hidden)switch(d[y]=fn(y),n=g?e[v][y]:e[d[y]+h],r){case 1:s[y]=y-l.s.c;break;case 2:s[y]=d[y];break;case 3:s[y]=c.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),a=o=bn(n,null,c),m=_[o]||0){do{a=o+"_"+m++}while(_[a]);_[o]=m,_[a]=1}else _[o]=1;s[y]=a}for(v=l.s.r+i;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var x=ma(e,l,v,d,r,s,g,c);(!1===x.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(f[p++]=x.row)}return f.length=p,f}var va=/"/g;function ya(e,t,n,r,i,s,o,a){for(var l=!0,c=[],u="",h=hn(n),d=t.s.c;d<=t.e.c;++d)if(r[d]){var f=a.dense?(e[n]||[])[d]:e[r[d]+h];if(null==f)u="";else if(null!=f.v){l=!1,u=""+(a.rawNumbers&&"n"==f.t?f.v:bn(f,null,a));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===i||m===s||34===m||a.forceQuotes){u='"'+u.replace(va,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(l=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(va,'""')+'"'));c.push(u)}return!1===a.blankrows&&l?null:c.join(o)}function _a(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=yn(e["!ref"]),s=void 0!==r.FS?r.FS:",",o=s.charCodeAt(0),a=void 0!==r.RS?r.RS:"\n",l=a.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(e);for(var d=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(d[p]||{}).hidden||(h[p]=fn(p));for(var m=0,g=i.s.r;g<=i.e.r;++g)(f[g]||{}).hidden||null!=(u=ya(e,i,g,h,o,l,s,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?a:"")+u));return delete r.dense,n.join("")}function ba(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=_a(e,t);if("undefined"==typeof d||"string"==t.type)return n;var r=d.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function wa(e,t,n){var r,i=n||{},s=+!i.skipHeader,o=e||{},a=0,l=0;if(o&&null!=i.origin)if("number"==typeof i.origin)a=i.origin;else{var c="string"==typeof i.origin?pn(i.origin):i.origin;a=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:a+t.length-1+s}};if(o["!ref"]){var h=yn(o["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),-1==a&&(a=h.e.r+1,u.e.r=a+t.length-1+s)}else-1==a&&(a=0,u.e.r=t.length-1+s);var d=i.header||[],f=0;t.forEach((function(e,t){ke(e).forEach((function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var c=e[n],u="z",h="",p=mn({c:l+f,r:a+t+s});r=xa(o,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=Pe(c)),h=i.dateNF||j[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,h&&(r.z=h)):o[p]=r={t:u,v:c},h&&(r.z=h)):o[p]=c}))})),u.e.c=Math.max(u.e.c,l+d.length-1);var p=hn(a);if(s)for(f=0;f<d.length;++f)o[fn(f+l)+p]={t:"s",v:d[f]};return o["!ref"]=vn(u),o}function xa(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=pn(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return xa(e,mn("number"!=typeof t?t:{r:t,c:n||0}))}function Ta(){return{SheetNames:[],Sheets:{}}}function Sa(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=o+i);++i);}if(no(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function Ea(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var Ca={encode_col:fn,encode_row:hn,encode_cell:mn,encode_range:vn,decode_col:dn,decode_row:un,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:pn,decode_range:gn,format_cell:bn,sheet_add_aoa:xn,sheet_add_json:wa,sheet_add_dom:Do,aoa_to_sheet:Tn,json_to_sheet:function(e,t){return wa(null,e,t)},table_to_sheet:Mo,table_to_book:function(e,t){return wn(Mo(e,t),t)},sheet_to_csv:_a,sheet_to_txt:ba,sheet_to_json:ga,sheet_to_html:Oo,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,s=yn(e["!ref"]),o="",a=[],l=[],c=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)a[i]=fn(i);for(var u=s.s.r;u<=s.e.r;++u)for(o=hn(u),i=s.s.c;i<=s.e.c;++i)if(n=a[i]+o,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:ga,sheet_get_cell:xa,book_new:Ta,book_append_sheet:Sa,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Ea,cell_set_internal_link:function(e,t,n){return Ea(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:yn(t),s="string"==typeof t?t:vn(t),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=xa(e,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};r.version}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))};n.a=(n,s,o)=>{var a;o&&((a=[]).d=-1);var l,c,u,h=new Set,d=n.exports,f=new Promise(((e,t)=>{u=t,c=e}));f[t]=d,f[e]=e=>(a&&e(a),h.forEach(e),f.catch((e=>{}))),n.exports=f,s((n=>{var s;l=(n=>n.map((n=>{if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var s=[];s.d=0,n.then((e=>{o[t]=e,i(s)}),(e=>{o[r]=e,i(s)}));var o={};return o[e]=e=>e(s),o}}var a={};return a[e]=e=>{},a[t]=n,a})))(n);var o=()=>l.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(s=()=>t(o)).r=0;var n=e=>e!==a&&!h.has(e)&&(h.add(e),e&&!e.d&&(s.r++,e.push(s)));l.map((t=>t[e](n)))}));return s.r?c:o()}),(e=>(e?u(f[r]=e):c(d),i(a)))),a&&a.d<0&&(a.d=0)}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".9c3495ec.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ettarra-app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkettarra_app=self.webpackChunkettarra_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();n(4737)})();